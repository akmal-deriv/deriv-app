{"version":3,"file":"trader/js/trader.screen-small.89099e4e0eaf4a1aa6c7.js","mappings":"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","sources":["webpack://@deriv/trader/./src/Modules/Trading/Containers/allow-equals.tsx","webpack://@deriv/trader/./src/Stores/Modules/Trading/Helpers/preview-proposal.ts","webpack://@deriv/trader/./src/Modules/Trading/Components/Form/TradeParams/amount-mobile.tsx","webpack://@deriv/trader/./src/Modules/Trading/Containers/Multiplier/multiplier-amount-modal.tsx","webpack://@deriv/trader/./src/Modules/Trading/Components/Form/RadioGroupWithInfoMobile/radio-group-with-info-mobile.tsx","webpack://@deriv/trader/./src/Modules/Trading/Components/Form/RadioGroupWithInfoMobile/index.ts","webpack://@deriv/trader/./src/Modules/Trading/Containers/Multiplier/multiplier-options.tsx","webpack://@deriv/trader/./src/Modules/Trading/Containers/radio-group-options-modal.tsx","webpack://@deriv/trader/./src/Modules/Trading/Components/Form/TradeParams/Multiplier/expiration-modal.jsx","webpack://@deriv/trader/./src/Modules/Trading/Components/Form/TradeParams/Multiplier/widgets.jsx","webpack://@deriv/trader/./src/Modules/Trading/Components/Form/TradeParams/Accumulator/accumulators-amount-mobile.tsx","webpack://@deriv/trader/./src/Modules/Trading/Components/Form/TradeParams/Duration/duration-mobile.jsx","webpack://@deriv/trader/./src/Modules/Trading/Containers/trade-params-mobile.tsx","webpack://@deriv/trader/./src/Modules/Trading/Components/Elements/mobile-widget.jsx","webpack://@deriv/trader/./src/Modules/Trading/Components/Elements/Multiplier/cancel-deal-mobile.tsx","webpack://@deriv/trader/./src/Modules/Trading/Containers/Multiplier/risk-management-dialog.tsx","webpack://@deriv/trader/./src/Modules/Trading/Components/Elements/Multiplier/risk-management-info.tsx","webpack://@deriv/trader/./src/Modules/Trading/Components/Elements/payout-per-point-mobile.tsx","webpack://@deriv/trader/./src/Modules/Trading/Components/Form/screen-small.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport { useTraderStore } from 'Stores/useTraderStores';\nimport { observer } from '@deriv/stores';\nimport React from 'react';\nimport { Checkbox, Text } from '@deriv/components';\nimport { Localize, localize } from '@deriv/translations';\n\ntype TAllowEquals = {\n    onChange: (e: { target: { name: string; value: number } }) => Promise<void>;\n    is_allow_equal: boolean;\n    has_equals_only: boolean;\n    className?: string;\n};\n\nconst AllowEquals = ({ onChange, is_allow_equal, has_equals_only, className }: TAllowEquals) => {\n    const handleOnChange: React.ComponentProps<typeof Checkbox>['onChange'] = e => {\n        e.persist();\n        if ('checked' in e.target) {\n            const { name, checked } = e.target;\n            onChange({ target: { name, value: Number(checked) } });\n        }\n    };\n\n    return (\n        <div className={classNames('allow-equals', 'mobile-widget', className)}>\n            <Checkbox\n                label={localize('Equals')}\n                value={is_allow_equal}\n                name='is_equal'\n                onChange={handleOnChange}\n                disabled={has_equals_only}\n            />\n            <Text as='p' size='xxxs'>\n                <Localize i18n_default_text='Win payout if exit spot is also equal to entry spot.' />\n            </Text>\n        </div>\n    );\n};\n\nexport default observer(() => {\n    const { is_equal, has_equals_only, onChange } = useTraderStore();\n    const allow_equals_props = {\n        is_allow_equal: !!is_equal,\n        has_equals_only,\n        onChange,\n    };\n    return <AllowEquals {...allow_equals_props} />;\n});\n","import debounce from 'lodash.debounce';\nimport { isEmptyObject, WS } from '@deriv/shared';\nimport { createProposalRequests } from './proposal';\nimport { PriceProposalRequest, PriceProposalResponse } from '@deriv/api-types';\nimport { TTradeStore } from 'Types';\n\ntype TResponse<Req, Res extends { [key: string]: unknown }, K extends string> = Res & {\n    echo_req: Req;\n    error?: {\n        code: string;\n        message: string;\n        details?: Res[K] & { field: string };\n    };\n};\nexport const requestPreviewProposal = debounce(\n    (store: TTradeStore, override = {}, onProposalResponse: TTradeStore['onProposalResponse']) => {\n        const new_store = { ...store, ...override };\n        const requests = createProposalRequests(new_store);\n        const subscription_map: { [key: string]: boolean } = {};\n\n        const onResponse = (response: TResponse<PriceProposalRequest, PriceProposalResponse, 'proposal'>) => {\n            if (response.error || !response.subscription) return;\n\n            subscription_map[response.subscription.id] = true;\n            onProposalResponse(response);\n        };\n\n        if (!isEmptyObject(requests)) {\n            const proposal_requests = requests;\n\n            Object.keys(proposal_requests).forEach(type => {\n                WS.subscribeProposal(proposal_requests[type], onResponse);\n            });\n        }\n\n        return () => {\n            Object.keys(subscription_map).forEach(id => {\n                WS.forget(id);\n                delete subscription_map[id];\n            });\n        };\n    },\n    700\n);\n","import React from 'react';\nimport classNames from 'classnames';\nimport { observer, useStore } from '@deriv/stores';\nimport { useTraderStore } from 'Stores/useTraderStores';\nimport { Localize, localize } from '@deriv/translations';\nimport { Money, Numpad, Tabs } from '@deriv/components';\nimport { getDecimalPlaces, isEmptyObject } from '@deriv/shared';\nimport MinMaxStakeInfo from './min-max-stake-info';\n\ntype TAmountMobile = Pick<\n    React.ComponentProps<typeof Basis>,\n    'toggleModal' | 'duration_value' | 'duration_unit' | 'has_duration_error' | 'setAmountError' | 'setSelectedAmount'\n> & {\n    amount_tab_idx?: number;\n    setAmountTabIdx?: React.ComponentProps<typeof Tabs>['onTabItemClick'];\n    stake_value: string | number;\n    payout_value?: string | number;\n};\n\ntype TBasis = {\n    basis: string;\n    duration_unit?: string;\n    duration_value?: number;\n    toggleModal: () => void;\n    has_duration_error?: boolean;\n    selected_basis?: string | number;\n    setSelectedAmount: (basis: string, num: string | number) => void;\n    setAmountError?: (has_error: boolean) => void;\n};\n\nconst Basis = observer(\n    ({\n        basis,\n        duration_unit,\n        duration_value,\n        toggleModal,\n        has_duration_error,\n        selected_basis,\n        setSelectedAmount,\n        setAmountError,\n    }: TBasis) => {\n        const { ui, client } = useStore();\n        const { addToast } = ui;\n        const { currency } = client;\n        const {\n            contract_type,\n            is_turbos,\n            is_vanilla,\n            onChangeMultiple,\n            amount: trade_amount,\n            basis: trade_basis,\n            duration_unit: trade_duration_unit,\n            duration: trade_duration,\n            stake_boundary,\n        } = useTraderStore();\n        const { min_stake, max_stake } = stake_boundary[contract_type.toUpperCase()] || {};\n        const user_currency_decimal_places = getDecimalPlaces(currency);\n        const onNumberChange = (num: number | string) => {\n            setSelectedAmount(basis, num);\n            validateAmount(num);\n        };\n        const formatAmount = (value: number | string) =>\n            !isNaN(+value) && value !== '' ? Number(value).toFixed(user_currency_decimal_places) : value;\n        const setBasisAndAmount = (amount: number | string) => {\n            const on_change_obj: Partial<ReturnType<typeof useTraderStore>> = {};\n\n            // Check for any duration changes in Duration trade params Tab before sending onChange object\n            if (duration_unit !== trade_duration_unit && !has_duration_error)\n                on_change_obj.duration_unit = duration_unit;\n            if (duration_value !== trade_duration && !has_duration_error) on_change_obj.duration = duration_value;\n\n            if (amount !== trade_amount || basis !== trade_basis) {\n                on_change_obj.basis = basis;\n                on_change_obj.amount = +amount;\n            }\n\n            if (!isEmptyObject(on_change_obj)) onChangeMultiple(on_change_obj);\n            toggleModal();\n        };\n        const zero_decimals = Number('0').toFixed(getDecimalPlaces(currency));\n        const min_amount = parseFloat(zero_decimals.toString().replace(/.$/, '1'));\n\n        const validateAmount = (value: number | string) => {\n            const localized_message = <Localize i18n_default_text='Should not be 0 or empty' />;\n            const min_max_stake_message = (\n                <Localize\n                    i18n_default_text='Stake must be between {{min_stake}} {{currency}} and {{max_stake}} {{currency}}'\n                    values={{ min_stake, currency, max_stake }}\n                />\n            );\n            const selected_value = parseFloat(value.toString());\n\n            if (value.toString() === '0.' || selected_value === 0) {\n                addToast({ key: 'amount_error', content: localized_message, type: 'error', timeout: 2000 });\n                setAmountError?.(true);\n                return 'error';\n            } else if (isNaN(selected_value) || selected_value < min_amount || value.toString().length < 1) {\n                addToast({ key: 'amount_error', content: localized_message, type: 'error', timeout: 2000 });\n                setAmountError?.(true);\n                return false;\n            } else if (selected_value < Number(min_stake)) {\n                addToast({ key: 'amount_error', content: min_max_stake_message, type: 'error', timeout: 2000 });\n                setAmountError?.(true);\n                return 'error';\n            }\n            setAmountError?.(false);\n            return true;\n        };\n\n        return (\n            <React.Fragment>\n                <div className='trade-params__stake-container'>\n                    {(is_turbos || is_vanilla) && (\n                        <MinMaxStakeInfo currency={currency} max_stake={max_stake} min_stake={min_stake} />\n                    )}\n                    <div\n                        className={classNames('trade-params__amount-keypad', {\n                            strike__pos: is_vanilla,\n                        })}\n                    >\n                        <Numpad\n                            value={selected_basis || ''}\n                            format={formatAmount}\n                            onSubmit={setBasisAndAmount}\n                            currency={currency}\n                            min={min_amount}\n                            max={max_stake}\n                            is_currency\n                            render={({ value, className }) => {\n                                return (\n                                    <div className={className}>\n                                        {parseFloat(value) > 0 ? (\n                                            <Money currency={currency} amount={value} should_format={false} />\n                                        ) : (\n                                            value\n                                        )}\n                                    </div>\n                                );\n                            }}\n                            reset_press_interval={450}\n                            reset_value=''\n                            pip_size={user_currency_decimal_places}\n                            onValidate={validateAmount}\n                            submit_label={localize('OK')}\n                            onValueChange={onNumberChange}\n                        />\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n);\n\nconst Amount = observer(\n    ({\n        toggleModal,\n        duration_value,\n        duration_unit,\n        has_duration_error,\n        amount_tab_idx,\n        setAmountError,\n        setAmountTabIdx,\n        setSelectedAmount,\n        stake_value,\n        payout_value,\n    }: TAmountMobile) => {\n        const { basis, basis_list } = useTraderStore();\n        const has_selected_tab_idx = typeof amount_tab_idx !== 'undefined';\n        const active_index = has_selected_tab_idx ? amount_tab_idx : basis_list.findIndex(b => b.value === basis);\n\n        if (basis_list.length === 1) {\n            return (\n                <Basis\n                    toggleModal={toggleModal}\n                    duration_value={duration_value}\n                    duration_unit={duration_unit}\n                    has_duration_error={has_duration_error}\n                    basis={basis_list[0].value}\n                    setAmountError={setAmountError}\n                    selected_basis={basis_list[0].value === 'stake' ? stake_value : payout_value}\n                    setSelectedAmount={setSelectedAmount}\n                />\n            );\n        }\n\n        return (\n            <div>\n                <Tabs active_index={active_index} onTabItemClick={setAmountTabIdx} top>\n                    {basis_list.map(basis_option => {\n                        switch (basis_option.value) {\n                            case 'stake':\n                                return (\n                                    <div label={basis_option.text} key={basis_option.value}>\n                                        <Basis\n                                            toggleModal={toggleModal}\n                                            duration_value={duration_value}\n                                            duration_unit={duration_unit}\n                                            has_duration_error={has_duration_error}\n                                            basis={basis_option.value}\n                                            setAmountError={setAmountError}\n                                            selected_basis={stake_value}\n                                            setSelectedAmount={setSelectedAmount}\n                                        />\n                                    </div>\n                                );\n                            case 'payout':\n                                return (\n                                    <div label={basis_option.text} key={basis_option.value}>\n                                        <Basis\n                                            toggleModal={toggleModal}\n                                            duration_value={duration_value}\n                                            duration_unit={duration_unit}\n                                            has_duration_error={has_duration_error}\n                                            basis={basis_option.value}\n                                            setAmountError={setAmountError}\n                                            selected_basis={payout_value}\n                                            setSelectedAmount={setSelectedAmount}\n                                        />\n                                    </div>\n                                );\n                            default:\n                                return null;\n                        }\n                    })}\n                </Tabs>\n            </div>\n        );\n    }\n);\n\nexport default Amount;\n","import React from 'react';\nimport { Div100vhContainer, Modal, usePreventIOSZoom } from '@deriv/components';\nimport { useIsMounted, WS } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\nimport { requestPreviewProposal } from 'Stores/Modules/Trading/Helpers/preview-proposal';\nimport AmountMobile from 'Modules/Trading/Components/Form/TradeParams/amount-mobile';\nimport MultipliersInfo from 'Modules/Trading/Components/Form/TradeParams/Multiplier/info';\nimport { observer } from '@deriv/stores';\nimport { useTraderStore } from 'Stores/useTraderStores';\nimport { TTradeStore } from 'Types';\n\ntype TToggleModal = () => void;\ntype TMultiplierAmountModal = {\n    is_open: boolean;\n    toggleModal: TToggleModal;\n};\n\nconst MultiplierAmountModal = ({ is_open, toggleModal }: TMultiplierAmountModal) => {\n    // Fix to prevent iOS from zooming in erratically on quick taps\n    usePreventIOSZoom();\n\n    return (\n        <React.Fragment>\n            <Modal\n                id='dt_trade_parameters_mobile'\n                className='trade-params dc-modal-header--title-bar'\n                is_open={is_open}\n                is_title_centered\n                should_header_stick_body={false}\n                toggleModal={toggleModal}\n                height='auto'\n                width='calc(100vw - 32px)'\n                title={localize('Stake')}\n            >\n                <Div100vhContainer className='mobile-widget-dialog__wrapper' max_autoheight_offset='48px'>\n                    <TradeParamsMobile toggleModal={toggleModal} />\n                </Div100vhContainer>\n            </Modal>\n        </React.Fragment>\n    );\n};\n\nexport default MultiplierAmountModal;\n\nconst TradeParamsMobile = observer(({ toggleModal }: { toggleModal: TToggleModal }) => {\n    const trade_store = useTraderStore();\n    const { amount } = trade_store;\n\n    const [stake_value, setStakeValue] = React.useState<string | number>(amount);\n    const [commission, setCommission] = React.useState<number | null>();\n    const [stop_out, setStopOut] = React.useState<number | null>();\n    const stake_ref = React.useRef<string | number>(amount);\n    const isMounted = useIsMounted();\n\n    React.useEffect(() => {\n        if (stake_value === amount) return undefined;\n\n        const onProposalResponse: TTradeStore['onProposalResponse'] = response => {\n            const { proposal, echo_req, subscription } = response;\n            if (\n                isMounted() &&\n                proposal &&\n                echo_req.contract_type === 'MULTUP' &&\n                Number(echo_req.amount) === Number(stake_ref.current)\n            ) {\n                setCommission(proposal.commission);\n                proposal.limit_order?.stop_out && setStopOut(proposal.limit_order.stop_out?.order_amount);\n            } else if (subscription?.id) {\n                WS.forget(subscription.id);\n            }\n        };\n        const dispose = requestPreviewProposal(trade_store, { amount: stake_value }, onProposalResponse);\n\n        return () => {\n            dispose?.();\n        };\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [stake_value]);\n\n    const setSelectedAmount = (basis: string | undefined, stake: number | string) => {\n        setStakeValue(stake);\n        stake_ref.current = stake;\n    };\n\n    return (\n        <React.Fragment>\n            <AmountMobile\n                toggleModal={toggleModal}\n                amount_tab_idx={0}\n                setSelectedAmount={setSelectedAmount}\n                stake_value={stake_value}\n            />\n            <MultipliersInfo\n                className='trade-params__multiplier-trade-info'\n                should_show_tooltip\n                commission={commission}\n                stop_out={stop_out}\n                amount={stake_value}\n            />\n        </React.Fragment>\n    );\n});\n","import React, { ChangeEvent } from 'react';\nimport { RadioGroup, Popover } from '@deriv/components';\n\ntype TItemsList = {\n    text: string;\n    value: number;\n};\n\ntype TRadioGroupWithInfoMobile = {\n    items_list?: TItemsList[];\n    contract_name: string;\n    current_value_object: {\n        name: string;\n        value: number;\n    };\n    onChange: (event: {\n        target: {\n            name: string;\n            value: number;\n        };\n    }) => void;\n    info?: React.ComponentProps<typeof Popover>['message'];\n    is_tooltip_disabled?: boolean;\n    popover_alignment?: React.ComponentProps<typeof Popover>['alignment'];\n    toggleModal: () => void;\n    should_show_tooltip?: boolean;\n};\n\nconst RadioGroupWithInfoMobile = ({\n    items_list,\n    contract_name,\n    current_value_object,\n    onChange,\n    info,\n    is_tooltip_disabled = false,\n    popover_alignment = 'right',\n    toggleModal,\n    should_show_tooltip = true,\n}: TRadioGroupWithInfoMobile) => {\n    const onValueChange = (e: ChangeEvent<HTMLInputElement>) => {\n        onChange({\n            target: {\n                name: current_value_object.name,\n                value: Number(e.target.value),\n            },\n        });\n        toggleModal();\n    };\n\n    return (\n        <>\n            {should_show_tooltip && (\n                <div className={`trade-params__${contract_name}-ic-info-wrapper`}>\n                    <Popover\n                        alignment={popover_alignment}\n                        classNameBubble='dc-popover__trade-params'\n                        disable_target_icon={is_tooltip_disabled}\n                        icon='info'\n                        id={`dt_${contract_name}-stake__tooltip`}\n                        is_bubble_hover_enabled\n                        zIndex='9999'\n                        message={info}\n                    />\n                </div>\n            )}\n            <RadioGroup\n                className={`trade-params__${contract_name}-radio-group`}\n                name={`trade-params__${contract_name}-radio`}\n                selected={!Number.isNaN(current_value_object.value) ? current_value_object.value?.toString() : ''}\n                onToggle={onValueChange}\n            >\n                {items_list?.map(({ text, value }) => (\n                    <RadioGroup.Item key={value} id={text} label={text} value={value?.toString()} disabled={false} />\n                ))}\n            </RadioGroup>\n        </>\n    );\n};\n\nexport default RadioGroupWithInfoMobile;\n","import RadioGroupWithInfoMobile from './radio-group-with-info-mobile';\n\nexport default RadioGroupWithInfoMobile;\n","import React from 'react';\nimport MultipliersInfo from 'Modules/Trading/Components/Form/TradeParams/Multiplier/info';\nimport RadioGroupWithInfoMobile from 'Modules/Trading/Components/Form/RadioGroupWithInfoMobile';\nimport { requestPreviewProposal } from 'Stores/Modules/Trading/Helpers/preview-proposal';\nimport { observer } from '@deriv/stores';\nimport { useTraderStore } from 'Stores/useTraderStores';\nimport { useIsMounted, WS } from '@deriv/shared';\nimport { TTradeStore } from 'Types';\n\ntype TMultiplierOptions = {\n    toggleModal: () => void;\n};\n\nconst MultiplierOptions = observer(({ toggleModal }: TMultiplierOptions) => {\n    const trade_store = useTraderStore();\n    const { amount, multiplier, multiplier_range_list, onChange } = trade_store;\n    const [commission, setCommission] = React.useState<number | null>();\n    const [stop_out, setStopOut] = React.useState<number>();\n    const isMounted = useIsMounted();\n\n    React.useEffect(() => {\n        if (!amount) return undefined;\n\n        const onProposalResponse: TTradeStore['onProposalResponse'] = ({ echo_req, proposal, subscription }) => {\n            if (isMounted() && proposal && echo_req.contract_type === 'MULTUP' && Number(echo_req.amount) === amount) {\n                setCommission(proposal.commission);\n                proposal.limit_order?.stop_out && setStopOut(proposal.limit_order.stop_out?.order_amount);\n            } else if (subscription?.id) {\n                WS.forget(subscription.id);\n            }\n        };\n        const dispose = requestPreviewProposal(trade_store, { amount }, onProposalResponse);\n\n        return () => {\n            dispose?.();\n        };\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [amount]);\n\n    return (\n        <React.Fragment>\n            <RadioGroupWithInfoMobile\n                contract_name='multiplier'\n                current_value_object={{ name: 'multiplier', value: multiplier }}\n                items_list={multiplier_range_list}\n                onChange={onChange}\n                toggleModal={toggleModal}\n                should_show_tooltip={false}\n            />\n            <MultipliersInfo\n                className='trade-params__multiplier-trade-info'\n                should_show_tooltip\n                commission={commission}\n                stop_out={stop_out}\n                amount={amount}\n            />\n        </React.Fragment>\n    );\n});\n\nexport default MultiplierOptions;\n","import React from 'react';\nimport { Div100vhContainer, Modal, usePreventIOSZoom } from '@deriv/components';\nimport { localize } from '@deriv/translations';\nimport { useTraderStore } from 'Stores/useTraderStores';\nimport { getGrowthRatePercentage, getTickSizeBarrierPercentage, isEmptyObject } from '@deriv/shared';\nimport MultiplierOptions from 'Modules/Trading/Containers/Multiplier/multiplier-options';\nimport RadioGroupWithInfoMobile from 'Modules/Trading/Components/Form/RadioGroupWithInfoMobile';\nimport { observer } from '@deriv/stores';\n\ntype TRadioGroupOptionsModal = {\n    is_open: boolean;\n    modal_title: string;\n    toggleModal: () => void;\n};\n\nconst RadioGroupOptionsModal = observer(({ is_open, modal_title, toggleModal }: TRadioGroupOptionsModal) => {\n    const { accumulator_range_list, growth_rate, onChange, tick_size_barrier, proposal_info } = useTraderStore();\n\n    // Fix to prevent iOS from zooming in erratically on quick taps\n    usePreventIOSZoom();\n    const has_error_or_not_loaded =\n        proposal_info?.ACCU?.has_error || !proposal_info?.ACCU?.id || isEmptyObject(proposal_info);\n\n    return (\n        <React.Fragment>\n            <Modal\n                id='dt_trade_parameters_mobile'\n                className='trade-params dc-modal-header--title-bar'\n                is_open={is_open}\n                is_title_centered\n                should_header_stick_body={false}\n                toggleModal={toggleModal}\n                height='auto'\n                width='calc(100vw - 32px)'\n                title={modal_title}\n            >\n                <Div100vhContainer className='mobile-widget-dialog__wrapper' max_autoheight_offset='48px'>\n                    {modal_title === localize('Multiplier') ? (\n                        <MultiplierOptions toggleModal={toggleModal} />\n                    ) : (\n                        <RadioGroupWithInfoMobile\n                            contract_name='accumulator'\n                            current_value_object={{ name: 'growth_rate', value: growth_rate }}\n                            info={localize(\n                                'Your stake will grow at {{growth_rate}}% per tick as long as the current spot price remains within ±{{tick_size_barrier}} from the previous spot price.',\n                                {\n                                    growth_rate: getGrowthRatePercentage(growth_rate),\n                                    tick_size_barrier: getTickSizeBarrierPercentage(tick_size_barrier),\n                                }\n                            )}\n                            is_tooltip_disabled={has_error_or_not_loaded}\n                            items_list={accumulator_range_list?.map(value => ({\n                                text: `${getGrowthRatePercentage(value)}%`,\n                                value,\n                            }))}\n                            onChange={onChange}\n                            popover_alignment='bottom'\n                            toggleModal={toggleModal}\n                        />\n                    )}\n                </Div100vhContainer>\n            </Modal>\n        </React.Fragment>\n    );\n});\n\nexport default RadioGroupOptionsModal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Div100vhContainer, Modal, Text } from '@deriv/components';\nimport { localize, Localize } from '@deriv/translations';\nimport Expiration from './expiration.jsx';\nimport { observer, useStore } from '@deriv/stores';\n\nconst MultipliersExpirationModal = observer(({ is_open, toggleModal }) => {\n    const { ui } = useStore();\n    const { enableApp, disableApp } = ui;\n    return (\n        <React.Fragment>\n            <Modal\n                enableApp={enableApp}\n                is_open={is_open}\n                disableApp={disableApp}\n                toggleModal={toggleModal}\n                has_close_icon={false}\n                should_header_stick_body={false}\n                height='auto'\n                width='calc(100vw - 3.2rem)'\n                title={localize('Expiration')}\n            >\n                <Div100vhContainer className='mobile-widget-dialog__wrapper' max_autoheight_offset='48px'>\n                    <div style={{ minHeight: '120px', padding: '1.6rem' }}>\n                        <Text size='xs' color='general'>\n                            <Localize\n                                i18n_default_text='Your contract will be closed automatically at the next available asset price on <0></0>.'\n                                components={[<Expiration key={0} is_text_only text_size='xs' />]}\n                            />\n                        </Text>\n                    </div>\n                    <Modal.Footer has_separator>\n                        <Button\n                            style={{ width: '100%', height: '4rem' }}\n                            large\n                            primary\n                            has_effect\n                            text={localize('OK')}\n                            onClick={toggleModal}\n                        />\n                    </Modal.Footer>\n                </Div100vhContainer>\n            </Modal>\n        </React.Fragment>\n    );\n});\n\nMultipliersExpirationModal.propTypes = {\n    is_open: PropTypes.bool,\n    toggleModal: PropTypes.func,\n};\n\nexport default MultipliersExpirationModal;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Money, Text, Popover } from '@deriv/components';\nimport { useTraderStore } from 'Stores/useTraderStores';\nimport { observer } from '@deriv/stores';\nimport MultiplierAmountModal from 'Modules/Trading/Containers/Multiplier/multiplier-amount-modal';\nimport RadioGroupOptionsModal from 'Modules/Trading/Containers/radio-group-options-modal';\nimport MultipliersExpiration from 'Modules/Trading/Components/Form/TradeParams/Multiplier/expiration.jsx';\nimport MultipliersExpirationModal from 'Modules/Trading/Components/Form/TradeParams/Multiplier/expiration-modal.jsx';\nimport MultipliersInfo from 'Modules/Trading/Components/Form/TradeParams/Multiplier/info';\nimport { localize, Localize } from '@deriv/translations';\nimport { getGrowthRatePercentage, getTickSizeBarrierPercentage } from '@deriv/shared';\nimport { showLabelForMultipliers } from '../../../../Helpers/contract-type';\n\nconst AmountWidget = ({ amount, currency, expiration, is_crypto_multiplier }) => {\n    const [is_open, setIsOpen] = React.useState(false);\n    const [is_expiration_modal_open, setIsExpirationModalOpen] = React.useState(false);\n\n    const toggleModal = () => {\n        setIsOpen(!is_open);\n    };\n\n    const toggleExpirationModal = () => {\n        setIsExpirationModalOpen(!is_expiration_modal_open);\n    };\n\n    return (\n        <React.Fragment>\n            <MultiplierAmountModal is_open={is_open} toggleModal={toggleModal} />\n            <div className='mobile-widget mobile-widget__multiplier' onClick={toggleModal}>\n                <div className='mobile-widget__multiplier-amount'>\n                    <div className='mobile-widget__item'>\n                        <Text weight='bold' size='xxs'>\n                            <Money amount={amount} currency={currency} show_currency />\n                        </Text>\n                    </div>\n                </div>\n                <MultipliersInfo\n                    className='mobile-widget__multiplier-trade-info'\n                    commission_text_size='xxxxs'\n                    stop_out_text_size='xxxxs'\n                />\n            </div>\n            {is_crypto_multiplier && (\n                <div className='mobile-widget' onClick={expiration ? toggleExpirationModal : null}>\n                    <div className='mobile-widget__multiplier-expiration'>\n                        <Text size='xxs'>{localize('Expires on')}</Text>\n                        <MultipliersExpiration is_text_only text_size='xxs' />\n                    </div>\n                    <MultipliersExpirationModal\n                        is_open={is_expiration_modal_open}\n                        toggleModal={toggleExpirationModal}\n                    />\n                </div>\n            )}\n        </React.Fragment>\n    );\n};\n\nexport const MultiplierAmountWidget = observer(() => {\n    const { amount, expiration, currency, is_crypto_multiplier, multiplier } = useTraderStore();\n    const amount_widget_props = {\n        amount,\n        expiration,\n        currency,\n        is_crypto_multiplier,\n        multiplier,\n    };\n    return <AmountWidget {...amount_widget_props} />;\n});\n\nconst RadioGroupOptionsWidget = ({\n    displayed_trade_param,\n    tooltip_message,\n    is_disabled,\n    modal_title,\n    should_show_new_label,\n}) => {\n    const [is_open, setIsOpen] = React.useState(false);\n\n    const toggleModal = () => {\n        if (is_disabled) return;\n        setIsOpen(!is_open);\n    };\n\n    return (\n        <React.Fragment>\n            <RadioGroupOptionsModal is_open={is_open} toggleModal={toggleModal} modal_title={modal_title} />\n            <div\n                className={classNames('mobile-widget mobile-widget__multiplier-options', {\n                    'mobile-widget__label': should_show_new_label,\n                })}\n                onClick={toggleModal}\n            >\n                <div\n                    className={classNames('mobile-widget__item', {\n                        'mobile-widget__item-disabled': is_disabled,\n                    })}\n                >\n                    <span className='mobile-widget__item-value'>{displayed_trade_param}</span>\n                </div>\n                {!!tooltip_message && (\n                    <span className='mobile-widget__item-tooltip' onClick={e => e.stopPropagation()}>\n                        <Popover\n                            alignment='left'\n                            classNameBubble='mobile-widget__item-popover'\n                            icon='info'\n                            is_bubble_hover_enabled\n                            zIndex={9999}\n                            message={tooltip_message}\n                        />\n                    </span>\n                )}\n                {should_show_new_label && (\n                    <Text\n                        className='dc-dropdown__label--new'\n                        weight='bold'\n                        size='xxxs'\n                        line_height='s'\n                        color='colored-background'\n                    >\n                        <Localize i18n_default_text='NEW!' />\n                    </Text>\n                )}\n            </div>\n        </React.Fragment>\n    );\n};\n\nexport const MultiplierOptionsWidget = observer(() => {\n    const { multiplier, symbol } = useTraderStore();\n    const displayed_trade_param = `x${multiplier}`;\n    const modal_title = localize('Multiplier');\n    return (\n        <RadioGroupOptionsWidget\n            displayed_trade_param={displayed_trade_param}\n            modal_title={modal_title}\n            should_show_new_label={showLabelForMultipliers(symbol)}\n        />\n    );\n});\n\nexport const AccumulatorOptionsWidget = observer(() => {\n    const { growth_rate, has_open_accu_contract, tick_size_barrier } = useTraderStore();\n    const displayed_trade_param = `${getGrowthRatePercentage(growth_rate)}%`;\n    const modal_title = localize('Growth rate');\n    const tooltip_message = (\n        <Localize\n            i18n_default_text='Your stake will grow at {{growth_rate}}% per tick as long as the current spot price remains within ±{{tick_size_barrier}} from the previous spot price.'\n            values={{\n                growth_rate: getGrowthRatePercentage(growth_rate),\n                tick_size_barrier: getTickSizeBarrierPercentage(tick_size_barrier),\n            }}\n        />\n    );\n    return (\n        <RadioGroupOptionsWidget\n            displayed_trade_param={displayed_trade_param}\n            is_disabled={has_open_accu_contract}\n            modal_title={modal_title}\n            tooltip_message={tooltip_message}\n        />\n    );\n});\n","import React from 'react';\nimport classNames from 'classnames';\nimport { AMOUNT_MAX_LENGTH, getDecimalPlaces } from '@deriv/shared';\nimport { MobileWrapper } from '@deriv/components';\nimport { localize } from '@deriv/translations';\nimport LabeledQuantityInputMobile from '../../LabeledQuantityInputMobile';\nimport { observer, useStore } from '@deriv/stores';\nimport { useTraderStore } from 'Stores/useTraderStores';\n\ntype TAccumulatorsAmountMobile = {\n    is_nativepicker?: boolean;\n};\n\nconst AccumulatorsAmountMobile = observer(({ is_nativepicker }: TAccumulatorsAmountMobile) => {\n    const { ui, client } = useStore();\n    const { current_focus, setCurrentFocus } = ui;\n    const { is_single_currency } = client;\n    const { amount, currency, onChange, has_open_accu_contract } = useTraderStore();\n    return (\n        <>\n            <MobileWrapper>\n                <LabeledQuantityInputMobile\n                    input_label={localize('Stake')}\n                    className={classNames('trade-container__amount', 'trade-container__amount--accumulator')}\n                    classNameInlinePrefix='trade-container__currency'\n                    classNameInput={classNames('trade-container__input', 'trade-container__input--accumulator')}\n                    currency={currency}\n                    current_focus={current_focus}\n                    fractional_digits={getDecimalPlaces(currency)}\n                    id='dt_amount_input'\n                    inline_prefix={is_single_currency ? currency : null}\n                    is_autocomplete_disabled\n                    is_disabled={has_open_accu_contract}\n                    is_float\n                    is_hj_whitelisted\n                    is_incrementable\n                    is_nativepicker={is_nativepicker}\n                    is_negative_disabled\n                    max_length={AMOUNT_MAX_LENGTH}\n                    name='amount'\n                    onChange={onChange}\n                    type='tel'\n                    value={amount}\n                    ariaLabel={localize('Amount')}\n                    setCurrentFocus={setCurrentFocus}\n                />\n            </MobileWrapper>\n        </>\n    );\n});\n\nexport default AccumulatorsAmountMobile;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Tabs, TickPicker, Numpad, RelativeDatepicker } from '@deriv/components';\nimport { isEmptyObject, addComma, getDurationMinMaxValues, getUnitMap } from '@deriv/shared';\nimport { Localize, localize } from '@deriv/translations';\nimport ExpiryText from './expiry-text.jsx';\nimport DurationRangeText from './duration-range-text';\nimport { observer, useStore } from '@deriv/stores';\nimport { useTraderStore } from 'Stores/useTraderStores';\nimport moment from 'moment';\n\nconst submit_label = localize('OK');\n\nconst updateAmountChanges = (obj, stake_value, payout_value, basis, trade_basis, trade_amount) => {\n    // TODO: Move onChangeMultiple outside of duration and amount\n    //  and unify all trade parameter components to use same onMultipleChange func onSubmit\n    // Checks if Amount tab was changed to stake and stake value was updated\n    if (basis === 'stake' && stake_value !== trade_amount) {\n        obj.basis = 'stake';\n        obj.amount = stake_value;\n        // Checks if Amount tab was changed to payout and payout value was updated\n    } else if (basis === 'payout' && payout_value !== trade_amount) {\n        obj.basis = 'payout';\n        obj.amount = payout_value;\n        // Checks if Amount tab was changed but payout or stake value was not updated\n    } else if (trade_basis !== basis) {\n        obj.basis = basis;\n        obj.amount = trade_amount;\n    }\n};\n\nconst Ticks = observer(\n    ({\n        setDurationError,\n        basis_option,\n        toggleModal,\n        has_amount_error,\n        payout_value,\n        stake_value,\n        selected_duration,\n        setSelectedDuration,\n    }) => {\n        const {\n            duration_min_max,\n            duration: trade_duration,\n            duration_unit: trade_duration_unit,\n            basis: trade_basis,\n            amount: trade_amount,\n            onChangeMultiple,\n        } = useTraderStore();\n        React.useEffect(() => {\n            setDurationError(false);\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, []);\n\n        const [min_tick, max_tick] = getDurationMinMaxValues(duration_min_max, 'tick', 't');\n\n        const setTickDuration = value => {\n            const { value: duration } = value.target;\n            const on_change_obj = {};\n\n            // check for any amount changes from Amount trade params tab before submitting onChange object\n            if (!has_amount_error)\n                updateAmountChanges(on_change_obj, stake_value, payout_value, basis_option, trade_basis, trade_amount);\n\n            if (trade_duration !== duration || trade_duration_unit !== 't') {\n                on_change_obj.duration_unit = 't';\n                on_change_obj.duration = duration;\n            }\n\n            if (!isEmptyObject(on_change_obj)) onChangeMultiple(on_change_obj);\n            toggleModal();\n        };\n\n        const onTickChange = tick => setSelectedDuration('t', tick);\n        const tick_duration = trade_duration < min_tick && selected_duration < min_tick ? min_tick : selected_duration;\n        return (\n            <div className='trade-params__duration-tickpicker'>\n                <TickPicker\n                    default_value={tick_duration}\n                    submit_label={submit_label}\n                    max_value={max_tick}\n                    min_value={min_tick}\n                    onSubmit={setTickDuration}\n                    onValueChange={onTickChange}\n                    singular_label={localize('Tick')}\n                    plural_label={localize('Ticks')}\n                />\n            </div>\n        );\n    }\n);\n\nconst Numbers = observer(\n    ({\n        basis_option,\n        contract_expiry = 'intraday',\n        duration_unit_option,\n        duration_values,\n        expiry_epoch,\n        has_amount_error,\n        payout_value,\n        selected_duration,\n        setDurationError,\n        setSelectedDuration,\n        stake_value,\n        show_expiry = false,\n        toggleModal,\n    }) => {\n        const { ui } = useStore();\n        const { addToast } = ui;\n        const {\n            duration_min_max,\n            duration: trade_duration,\n            duration_unit: trade_duration_unit,\n            basis: trade_basis,\n            amount: trade_amount,\n            is_vanilla,\n            onChangeMultiple,\n        } = useTraderStore();\n        const { value: duration_unit } = duration_unit_option;\n        const [min, max] = getDurationMinMaxValues(duration_min_max, contract_expiry, duration_unit);\n        const [has_error, setHasError] = React.useState(false);\n\n        const validateDuration = value => {\n            const localized_message = (\n                <Localize\n                    i18n_default_text='Should be between {{min}} and {{max}}'\n                    values={{\n                        min,\n                        max: addComma(max, 0, false),\n                    }}\n                />\n            );\n            if (parseInt(value) < min || parseInt(selected_duration) > max) {\n                addToast({ key: 'duration_error', content: localized_message, type: 'error', timeout: 2000 });\n                setDurationError(true);\n                setHasError(true);\n                return 'error';\n            } else if (parseInt(value) > max) {\n                addToast({ key: 'duration_error', content: localized_message, type: 'error', timeout: 2000 });\n                setHasError(true);\n                return 'error';\n            } else if (value.toString().length < 1) {\n                addToast({ key: 'duration_error', content: localized_message, type: 'error', timeout: 2000 });\n                setDurationError(true);\n                setHasError(true);\n                return false;\n            }\n\n            setDurationError(false);\n            setHasError(false);\n            return true;\n        };\n\n        const setDuration = duration => {\n            const on_change_obj = {};\n\n            // check for any amount changes from Amount trade params tab before submitting onChange object\n            if (!has_amount_error)\n                updateAmountChanges(on_change_obj, stake_value, payout_value, basis_option, trade_basis, trade_amount);\n\n            if (trade_duration !== duration || trade_duration_unit !== duration_unit) {\n                on_change_obj.duration_unit = duration_unit;\n                on_change_obj.duration = duration;\n                on_change_obj.expiry_type = 'duration';\n            }\n\n            if (!isEmptyObject(on_change_obj)) onChangeMultiple(on_change_obj);\n            toggleModal();\n        };\n\n        const setExpiryDate = (epoch, duration) => {\n            if (trade_duration_unit !== 'd') {\n                return moment.utc().add(Number(duration), 'days').format('D MMM YYYY, [23]:[59]:[59] [GMT +0]');\n            }\n            let expiry_date = new Date((epoch - trade_duration * 24 * 60 * 60) * 1000);\n            if (duration) {\n                expiry_date = new Date(expiry_date.getTime() + duration * 24 * 60 * 60 * 1000);\n            }\n\n            return expiry_date\n                .toUTCString()\n                .replace('GMT', 'GMT +0')\n                .substring(5)\n                .replace(/(\\d{2}) (\\w{3} \\d{4})/, '$1 $2,');\n        };\n\n        const onNumberChange = num => {\n            setSelectedDuration(duration_unit, num);\n            validateDuration(num);\n        };\n\n        const fixed_date = !has_error ? setExpiryDate(expiry_epoch, duration_values?.d_duration) : '';\n\n        const { name_plural, name } = getUnitMap()[duration_unit];\n        const duration_unit_text = name_plural ?? name;\n\n        return (\n            <div className='trade-params__amount-keypad'>\n                <div\n                    className={classNames('text-container', {\n                        'text-container--vanilla': is_vanilla,\n                    })}\n                >\n                    {is_vanilla && <DurationRangeText min={min} max={max} duration_unit_text={duration_unit_text} />}\n                    {show_expiry && <ExpiryText fixed_date={fixed_date} />}\n                </div>\n                <Numpad\n                    value={selected_duration}\n                    onSubmit={setDuration}\n                    render={({ value: v, className }) => {\n                        return <div className={className}>{v}</div>;\n                    }}\n                    pip_size={0}\n                    submit_label={submit_label}\n                    min={min}\n                    max={max}\n                    reset_press_interval={350}\n                    reset_value=''\n                    onValidate={validateDuration}\n                    onValueChange={onNumberChange}\n                />\n            </div>\n        );\n    }\n);\n\nconst Duration = observer(\n    ({\n        amount_tab_idx,\n        d_duration,\n        duration_tab_idx,\n        expiry_epoch,\n        h_duration,\n        has_amount_error,\n        m_duration,\n        payout_value,\n        s_duration,\n        setDurationError,\n        setDurationTabIdx,\n        setSelectedDuration,\n        stake_value,\n        t_duration,\n        toggleModal,\n    }) => {\n        const { duration_units_list, duration_min_max, duration_unit, basis: trade_basis } = useTraderStore();\n        const duration_values = {\n            t_duration,\n            s_duration,\n            m_duration,\n            h_duration,\n            d_duration,\n        };\n        const has_selected_tab_idx = typeof duration_tab_idx !== 'undefined';\n        const active_index = has_selected_tab_idx\n            ? duration_tab_idx\n            : duration_units_list.findIndex(d => d.value === duration_unit);\n        const [min, max] = getDurationMinMaxValues(duration_min_max, 'daily', 'd');\n        const handleRelativeChange = date => {\n            setSelectedDuration('d', date);\n        };\n        const selected_basis_option = () => {\n            if (amount_tab_idx === 0) {\n                return 'stake';\n            } else if (amount_tab_idx === 1) {\n                return 'payout';\n            }\n            return trade_basis;\n        };\n\n        const onTabChange = index => {\n            setDurationTabIdx(index);\n            const { value: unit } = duration_units_list[index];\n            setSelectedDuration(unit, duration_values[`${unit}_duration`]);\n        };\n\n        return (\n            <div>\n                <Tabs active_index={active_index} onTabItemClick={num => onTabChange(num)} single_tab_has_no_label top>\n                    {duration_units_list.map(duration_unit_option => {\n                        switch (duration_unit_option.value) {\n                            case 't':\n                                return (\n                                    <div label={duration_unit_option.text} key={duration_unit_option.value}>\n                                        <Ticks\n                                            basis_option={selected_basis_option()}\n                                            has_amount_error={has_amount_error}\n                                            toggleModal={toggleModal}\n                                            selected_duration={t_duration}\n                                            setDurationError={setDurationError}\n                                            setSelectedDuration={setSelectedDuration}\n                                            stake_value={stake_value}\n                                            payout_value={payout_value}\n                                        />\n                                    </div>\n                                );\n                            case 's':\n                                return (\n                                    <div label={duration_unit_option.text} key={duration_unit_option.value}>\n                                        <Numbers\n                                            basis_option={selected_basis_option()}\n                                            has_amount_error={has_amount_error}\n                                            toggleModal={toggleModal}\n                                            duration_unit_option={duration_unit_option}\n                                            selected_duration={s_duration}\n                                            setDurationError={setDurationError}\n                                            setSelectedDuration={setSelectedDuration}\n                                            stake_value={stake_value}\n                                            payout_value={payout_value}\n                                        />\n                                    </div>\n                                );\n                            case 'm':\n                                return (\n                                    <div label={duration_unit_option.text} key={duration_unit_option.value}>\n                                        <Numbers\n                                            basis_option={selected_basis_option()}\n                                            has_amount_error={has_amount_error}\n                                            toggleModal={toggleModal}\n                                            duration_unit_option={duration_unit_option}\n                                            selected_duration={m_duration}\n                                            setDurationError={setDurationError}\n                                            setSelectedDuration={setSelectedDuration}\n                                            stake_value={stake_value}\n                                            payout_value={payout_value}\n                                        />\n                                    </div>\n                                );\n                            case 'h':\n                                return (\n                                    <div label={duration_unit_option.text} key={duration_unit_option.value}>\n                                        <Numbers\n                                            basis_option={selected_basis_option()}\n                                            has_amount_error={has_amount_error}\n                                            toggleModal={toggleModal}\n                                            duration_unit_option={duration_unit_option}\n                                            selected_duration={h_duration}\n                                            setDurationError={setDurationError}\n                                            setSelectedDuration={setSelectedDuration}\n                                            stake_value={stake_value}\n                                            payout_value={payout_value}\n                                        />\n                                    </div>\n                                );\n                            case 'd':\n                                return (\n                                    <div label={duration_unit_option.text} key={duration_unit_option.value}>\n                                        <Numbers\n                                            basis_option={selected_basis_option()}\n                                            has_amount_error={has_amount_error}\n                                            toggleModal={toggleModal}\n                                            duration_unit_option={duration_unit_option}\n                                            contract_expiry='daily'\n                                            selected_duration={d_duration}\n                                            setDurationError={setDurationError}\n                                            setSelectedDuration={setSelectedDuration}\n                                            stake_value={stake_value}\n                                            show_expiry\n                                            payout_value={payout_value}\n                                            expiry_epoch={expiry_epoch}\n                                            duration_values={duration_values}\n                                        />\n                                        <RelativeDatepicker\n                                            onChange={handleRelativeChange}\n                                            min_date={min}\n                                            max_date={max}\n                                            title={localize('Pick an end date')}\n                                        />\n                                    </div>\n                                );\n                            default:\n                                return null;\n                        }\n                    })}\n                </Tabs>\n            </div>\n        );\n    }\n);\n\nexport default Duration;\n","import 'Sass/app/modules/trading-mobile.scss';\nimport { Div100vhContainer, Modal, Money, Tabs, ThemedScrollbars, usePreventIOSZoom } from '@deriv/components';\nimport AmountMobile from 'Modules/Trading/Components/Form/TradeParams/amount-mobile';\nimport Barrier from 'Modules/Trading/Components/Form/TradeParams/barrier';\nimport DurationMobile from 'Modules/Trading/Components/Form/TradeParams/Duration/duration-mobile.jsx';\nimport LastDigit from 'Modules/Trading/Components/Form/TradeParams/last-digit';\nimport { TTextValueStrings } from 'Types';\nimport { observer, useStore } from '@deriv/stores';\nimport { useTraderStore } from 'Stores/useTraderStores';\nimport React from 'react';\nimport classNames from 'classnames';\nimport { localize } from '@deriv/translations';\n\ntype TTradeParamsModal = {\n    is_open: boolean;\n    tab_index: number;\n    toggleModal: () => void;\n};\n\ntype TTradeParamsMobile = {\n    currency: string;\n    toggleModal: () => void;\n    isVisible: (component_key: string) => boolean;\n    setAmountTabIdx: (amount_tab_idx?: number) => void;\n    amount_tab_idx?: number;\n    setTradeParamTabIdx: (trade_param_tab_idx: number) => void;\n    trade_param_tab_idx: number;\n    setDurationTabIdx: (duration_tab_idx?: number) => void;\n    duration_unit: string;\n    duration_units_list: TTextValueStrings[];\n    duration_value: number;\n    duration_tab_idx?: number;\n    has_amount_error: boolean;\n    has_duration_error: boolean;\n    // amount\n    setAmountError: (has_error: boolean) => void;\n    setSelectedAmount: (basis: string, selected_basis_value: string | number) => void;\n    stake_value: number;\n    payout_value: number;\n    // duration\n    setDurationError: (has_error: boolean) => void;\n    setSelectedDuration: (selected_duration_unit: string, selected_duration: number) => void;\n    t_duration: number;\n    s_duration: number;\n    m_duration: number;\n    h_duration: number;\n    d_duration: number;\n};\n\ntype TReducer = Pick<\n    TTradeParamsMobile,\n    | 'trade_param_tab_idx'\n    | 'duration_tab_idx'\n    | 'amount_tab_idx'\n    | 'has_amount_error'\n    | 'has_duration_error'\n    | 't_duration'\n    | 's_duration'\n    | 'm_duration'\n    | 'h_duration'\n    | 'd_duration'\n    | 'stake_value'\n    | 'payout_value'\n> & { curr_duration_unit: string; curr_duration_value: number };\n\nconst DEFAULT_DURATION = Object.freeze({\n    t: 5,\n    s: 15,\n    m: 3,\n    h: 1,\n    d: 1,\n});\n\nconst reducer = (state: TReducer, payload: Partial<TReducer>) => {\n    return {\n        ...state,\n        ...payload,\n    };\n};\n\nconst makeGetDefaultDuration = (trade_duration: number, trade_duration_unit: string) => (duration_unit: string) =>\n    trade_duration_unit === duration_unit\n        ? trade_duration\n        : DEFAULT_DURATION[duration_unit as keyof typeof DEFAULT_DURATION];\n\nconst TradeParamsModal = observer(({ is_open, toggleModal, tab_index }: TTradeParamsModal) => {\n    const { client } = useStore();\n    const { currency } = client;\n    const { amount, form_components, duration, duration_unit, duration_units_list, is_vanilla } = useTraderStore();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const getDefaultDuration = React.useCallback(makeGetDefaultDuration(duration, duration_unit), []);\n\n    const [state, dispatch] = React.useReducer(reducer, {\n        trade_param_tab_idx: tab_index,\n        duration_tab_idx: undefined,\n        amount_tab_idx: undefined,\n        has_amount_error: false,\n        has_duration_error: false,\n        // duration unit values\n        curr_duration_unit: duration_unit,\n        curr_duration_value: duration,\n        t_duration: getDefaultDuration('t'),\n        s_duration: getDefaultDuration('s'),\n        m_duration: getDefaultDuration('m'),\n        h_duration: getDefaultDuration('h'),\n        d_duration: getDefaultDuration('d'),\n        // amount values\n        stake_value: amount,\n        payout_value: amount,\n    });\n\n    usePreventIOSZoom();\n\n    React.useEffect(() => {\n        setSelectedDuration(duration_unit, duration);\n        setDurationTabIdx();\n        // duration and duration_unit can be changed in trade-store when contract type is changed\n    }, [duration, duration_unit]);\n\n    const setTradeParamTabIdx = (trade_param_tab_idx: number) => dispatch({ trade_param_tab_idx });\n\n    const setDurationTabIdx = (duration_tab_idx?: number) => dispatch({ duration_tab_idx });\n\n    const setAmountTabIdx = (amount_tab_idx?: number) => dispatch({ amount_tab_idx });\n\n    const setSelectedAmount = (basis: string, selected_basis_value: string | number) =>\n        dispatch({ [`${basis}_value`]: selected_basis_value });\n\n    const setSelectedDuration = (selected_duration_unit: string, selected_duration: number) => {\n        dispatch({\n            [`${selected_duration_unit}_duration`]: selected_duration,\n            curr_duration_unit: selected_duration_unit,\n            curr_duration_value: selected_duration,\n        });\n    };\n\n    const setAmountError = (has_error: boolean) => {\n        dispatch({ has_amount_error: has_error });\n    };\n    const setDurationError = (has_error: boolean) => {\n        dispatch({ has_duration_error: has_error });\n    };\n\n    const isVisible = (component_key: string): boolean => form_components.includes(component_key);\n    return (\n        <React.Fragment>\n            <Modal\n                id='dt_trade_parameters_mobile'\n                className='trade-params'\n                is_open={is_open}\n                header={<div />}\n                toggleModal={toggleModal}\n                height={is_vanilla ? '53.8rem' : 'auto'}\n                width='calc(100vw - 32px)'\n            >\n                <ThemedScrollbars>\n                    <Div100vhContainer className='mobile-widget-dialog__wrapper' max_autoheight_offset='120px'>\n                        <TradeParamsMobile\n                            currency={currency}\n                            toggleModal={toggleModal}\n                            isVisible={isVisible}\n                            setTradeParamTabIdx={setTradeParamTabIdx}\n                            trade_param_tab_idx={tab_index}\n                            setDurationTabIdx={setDurationTabIdx}\n                            duration_tab_idx={state.duration_tab_idx}\n                            setAmountTabIdx={setAmountTabIdx}\n                            amount_tab_idx={state.amount_tab_idx}\n                            // amount\n                            setSelectedAmount={setSelectedAmount}\n                            stake_value={state.stake_value}\n                            payout_value={state.payout_value}\n                            duration_unit={state.curr_duration_unit}\n                            duration_value={state.curr_duration_value}\n                            duration_units_list={duration_units_list}\n                            has_amount_error={state.has_amount_error}\n                            setAmountError={setAmountError}\n                            // duration\n                            setSelectedDuration={setSelectedDuration}\n                            has_duration_error={state.has_duration_error}\n                            setDurationError={setDurationError}\n                            t_duration={state.t_duration}\n                            s_duration={state.s_duration}\n                            m_duration={state.m_duration}\n                            h_duration={state.h_duration}\n                            d_duration={state.d_duration}\n                        />\n                    </Div100vhContainer>\n                </ThemedScrollbars>\n            </Modal>\n        </React.Fragment>\n    );\n});\n\nexport default TradeParamsModal;\n\nconst TradeParamsMobile = observer(\n    ({\n        currency,\n        toggleModal,\n        isVisible,\n        setAmountTabIdx,\n        amount_tab_idx,\n        setTradeParamTabIdx,\n        trade_param_tab_idx,\n        setDurationTabIdx,\n        duration_unit,\n        duration_units_list,\n        duration_value,\n        duration_tab_idx,\n        has_amount_error,\n        has_duration_error,\n        // amount\n        setAmountError,\n        setSelectedAmount,\n        stake_value,\n        payout_value,\n        // duration\n        setDurationError,\n        setSelectedDuration,\n        t_duration,\n        s_duration,\n        m_duration,\n        h_duration,\n        d_duration,\n    }: TTradeParamsMobile) => {\n        const { basis_list, basis, expiry_epoch, is_turbos, is_vanilla } = useTraderStore();\n        const getDurationText = () => {\n            const duration = duration_units_list.find(d => d.value === duration_unit);\n            return `${duration_value} ${\n                duration && (duration_value > 1 ? localize(duration.text) : localize(duration.text.slice(0, -1)))\n            }`;\n        };\n\n        const getAmountText = () => {\n            const has_selected_tab_idx = typeof amount_tab_idx !== 'undefined';\n            const active_index = has_selected_tab_idx ? amount_tab_idx : basis_list.findIndex(b => b.value === basis);\n\n            return <Money currency={currency} show_currency amount={active_index === 1 ? payout_value : stake_value} />;\n        };\n\n        const getHeaderContent = (tab_key: string) => {\n            switch (tab_key) {\n                case 'duration':\n                    return (\n                        <div className='trade-params__header'>\n                            <div className='trade-params__header-label'>{localize('Duration')}</div>\n                            <div\n                                className={classNames('trade-params__header-value', {\n                                    'trade-params__header-value--has-error': has_duration_error,\n                                })}\n                            >\n                                {has_duration_error ? localize('Error') : getDurationText()}\n                            </div>\n                        </div>\n                    );\n                case 'amount':\n                    return (\n                        <div className='trade-params__header'>\n                            <div className='trade-params__header-label'>\n                                {is_turbos || is_vanilla ? localize('Stake') : localize('Amount')}\n                            </div>\n                            <div\n                                className={classNames('trade-params__header-value', {\n                                    'trade-params__header-value--has-error': has_amount_error,\n                                })}\n                            >\n                                {has_amount_error ? localize('Error') : getAmountText()}\n                            </div>\n                        </div>\n                    );\n                default:\n                    return null;\n            }\n        };\n        return (\n            <Tabs\n                active_index={trade_param_tab_idx}\n                className='trade-params-duration-amount'\n                onTabItemClick={setTradeParamTabIdx}\n                top\n            >\n                {isVisible('duration') ? (\n                    <div data-header-content={getHeaderContent('duration')}>\n                        <DurationMobile\n                            // @ts-expect-error: TODO: check if TS error is gone after <DurationMobile /> is migrated to TS\n                            toggleModal={toggleModal}\n                            amount_tab_idx={amount_tab_idx}\n                            duration_tab_idx={duration_tab_idx}\n                            setDurationTabIdx={setDurationTabIdx}\n                            setSelectedDuration={setSelectedDuration}\n                            setDurationError={setDurationError}\n                            has_amount_error={has_amount_error}\n                            t_duration={t_duration}\n                            s_duration={s_duration}\n                            m_duration={m_duration}\n                            h_duration={h_duration}\n                            d_duration={d_duration}\n                            stake_value={stake_value}\n                            payout_value={payout_value}\n                            expiry_epoch={expiry_epoch}\n                        />\n                    </div>\n                ) : null}\n                {isVisible('amount') ? (\n                    <div data-header-content={getHeaderContent('amount')}>\n                        <AmountMobile\n                            duration_unit={duration_unit}\n                            duration_value={duration_value}\n                            toggleModal={toggleModal}\n                            amount_tab_idx={amount_tab_idx}\n                            setAmountTabIdx={setAmountTabIdx}\n                            has_duration_error={has_duration_error}\n                            setSelectedAmount={setSelectedAmount}\n                            setAmountError={setAmountError}\n                            stake_value={stake_value}\n                            payout_value={payout_value}\n                        />\n                    </div>\n                ) : null}\n            </Tabs>\n        );\n    }\n);\n\nexport const LastDigitMobile = observer(() => {\n    const { form_components } = useTraderStore();\n    return form_components.includes('last_digit') ? <LastDigit /> : null;\n});\n\nexport const BarrierMobile = observer(() => {\n    const { form_components } = useTraderStore();\n    return form_components.includes('barrier') ? <Barrier /> : null;\n});\n","import React from 'react';\nimport { Money } from '@deriv/components';\nimport { localize } from '@deriv/translations';\nimport { getExpiryType, getDurationMinMaxValues, getLocalizedBasis } from '@deriv/shared';\nimport { MultiplierAmountWidget } from 'Modules/Trading/Components/Form/TradeParams/Multiplier/widgets.jsx';\nimport TradeParamsModal from '../../Containers/trade-params-mobile';\nimport { observer, useStore } from '@deriv/stores';\nimport { useTraderStore } from 'Stores/useTraderStores';\n\nconst MobileWidget = observer(() => {\n    const { ui } = useStore();\n    const { onChangeUiStore } = ui;\n    const trade_store = useTraderStore();\n    const { amount, basis, currency, duration, duration_min_max, duration_unit, is_multiplier, onChange } = trade_store;\n\n    const [is_open, setIsOpen] = React.useState(false);\n    const [tab_index, setTabIndex] = React.useState(0);\n\n    React.useEffect(() => {\n        assertDurationIsWithinBoundary();\n    });\n\n    const assertDurationIsWithinBoundary = () => {\n        const contract_expiry_type = getExpiryType(trade_store);\n        const [min_value, max_value] = getDurationMinMaxValues(duration_min_max, contract_expiry_type, duration_unit);\n\n        if (contract_expiry_type === 'tick' && duration < min_value) {\n            onChangeUiStore({ name: `duration_${duration_unit}`, value: min_value });\n            onChange({ target: { name: 'duration', value: min_value } });\n        }\n        if (!(duration < min_value) && duration > max_value) {\n            onChangeUiStore({ name: `duration_${duration_unit}`, value: max_value });\n            onChange({ target: { name: 'duration', value: max_value } });\n        }\n    };\n\n    // tab_index 0 is duration and 1 is amount\n    const toggleWidget = tab_index => {\n        setTabIndex(tab_index);\n        setIsOpen(!is_open);\n    };\n\n    const getHumanReadableDuration = () => {\n        if (!duration_unit) return '';\n        const lookup = {\n            t: [localize('tick'), localize('ticks')],\n            s: [localize('second'), localize('seconds')],\n            m: [localize('min'), localize('mins')],\n            h: [localize('hour'), localize('hours')],\n            d: [localize('day'), localize('days')],\n        };\n\n        try {\n            if (!duration_unit) return '';\n            const formatted_duration_unit = +duration === 1 ? lookup[duration_unit][0] : lookup[duration_unit][1];\n\n            return `${duration} ${formatted_duration_unit}`;\n        } catch (e) {\n            return '';\n        }\n    };\n\n    const localized_basis = getLocalizedBasis();\n\n    const stakeOrPayout = () => {\n        switch (basis) {\n            case 'stake':\n                return localized_basis.stake;\n            case 'payout':\n                return localized_basis.payout;\n            default:\n                return basis;\n        }\n    };\n\n    return (\n        <div className='mobile-widget__wrapper'>\n            {is_multiplier ? (\n                <MultiplierAmountWidget />\n            ) : (\n                <div id='duration_amount_selector' className='mobile-widget duration_amount_selector'>\n                    <div className='mobile-widget__duration' onClick={() => toggleWidget(0)}>\n                        {getHumanReadableDuration()}\n                    </div>\n                    <div className='mobile-widget__amount' onClick={() => toggleWidget(1)}>\n                        <Money amount={amount} currency={currency} show_currency />\n                    </div>\n                    <div className='mobile-widget__type' onClick={() => toggleWidget(1)}>\n                        {stakeOrPayout()}\n                    </div>\n                </div>\n            )}\n            <TradeParamsModal is_open={is_open} toggleModal={() => toggleWidget(tab_index)} tab_index={tab_index} />\n        </div>\n    );\n});\n\nexport default MobileWidget;\n","import React from 'react';\nimport { Checkbox, RadioGroup, Dialog, Popover, Text } from '@deriv/components';\nimport { localize, Localize } from '@deriv/translations';\nimport { onToggleCancellation, onChangeCancellationDuration } from 'Stores/Modules/Trading/Helpers/multiplier';\nimport Fieldset from 'App/Components/Form/fieldset';\nimport { observer, useStore } from '@deriv/stores';\nimport { TTradeStore } from 'Types';\nimport { useTraderStore } from 'Stores/useTraderStores';\n\ntype TDealCancellationWarningDialog = {\n    is_visible: boolean;\n    onConfirm: () => void;\n    onCancel: () => void;\n};\n\ntype TCancelDeal = {\n    has_cancellation: boolean;\n    has_take_profit: boolean;\n    has_stop_loss: boolean;\n    onChangeMultiple: (\n        props: Partial<\n            Pick<\n                TTradeStore,\n                | 'cancellation_duration'\n                | 'has_cancellation'\n                | 'has_stop_loss'\n                | 'has_take_profit'\n                | 'stop_loss'\n                | 'take_profit'\n            >\n        >\n    ) => void;\n    cancellation_duration: string;\n};\n\nconst DealCancellationWarningDialog = observer(\n    ({ is_visible, onConfirm, onCancel }: TDealCancellationWarningDialog) => {\n        const { ui } = useStore();\n        const { disableApp, enableApp, should_show_cancellation_warning, toggleCancellationWarning } = ui;\n        return (\n            <Dialog\n                className='trade-params__multiplier-deal-cancellation-dialog'\n                title={localize('About deal cancellation')}\n                confirm_button_text={localize('Got it')}\n                cancel_button_text={localize('Cancel')}\n                onConfirm={onConfirm}\n                onCancel={onCancel}\n                is_mobile_full_width={false}\n                is_visible={is_visible}\n                disableApp={disableApp}\n                enableApp={enableApp}\n                portal_element_id='modal_root'\n            >\n                <Text size='xxxs' color='general'>\n                    <Localize i18n_default_text='Take profit and/or stop loss are not available while deal cancellation is active.' />\n                </Text>\n                <Checkbox\n                    defaultChecked={!should_show_cancellation_warning}\n                    onChange={() => toggleCancellationWarning()}\n                    name='should_show_cancellation_warning'\n                    label={localize(\"Don't show this again\")}\n                />\n            </Dialog>\n        );\n    }\n);\n\nconst CancelDeal = observer(\n    ({ has_cancellation, has_take_profit, has_stop_loss, onChangeMultiple, cancellation_duration }: TCancelDeal) => {\n        const { ui } = useStore();\n        const { should_show_cancellation_warning } = ui;\n        const { cancellation_range_list } = useTraderStore();\n        const [is_deal_cancel_warning_visible, setDealCancelWarningVisibility] = React.useState(false);\n\n        const canToggleDealCancel = () => {\n            const should_show_popover = (has_take_profit || has_stop_loss) && should_show_cancellation_warning;\n            if (should_show_popover) setDealCancelWarningVisibility(should_show_popover);\n            return !should_show_popover;\n        };\n\n        return (\n            <React.Fragment>\n                <DealCancellationWarningDialog\n                    is_visible={is_deal_cancel_warning_visible}\n                    onCancel={() => setDealCancelWarningVisibility(false)}\n                    onConfirm={() => {\n                        setDealCancelWarningVisibility(false);\n                        onToggleCancellation({ has_cancellation, onChangeMultiple });\n                    }}\n                />\n                <Fieldset className='trade-container__fieldset'>\n                    <div className='dc-input-wrapper--inline'>\n                        <Checkbox\n                            id='dt_cancellation-checkbox_input'\n                            onChange={() => {\n                                if (canToggleDealCancel()) {\n                                    onToggleCancellation({ has_cancellation, onChangeMultiple });\n                                }\n                            }}\n                            name='has_cancellation'\n                            label={localize('Deal cancellation')}\n                            defaultChecked={has_cancellation}\n                        />\n                        <Popover\n                            alignment='left'\n                            icon='info'\n                            id='dt_multiplier-stake__tooltip'\n                            is_bubble_hover_enabled\n                            classNameBubble='trade-container__deal-cancellation-popover'\n                            zIndex='9999'\n                            message={localize(\n                                'When this is active, you can cancel your trade within the chosen time frame. Your stake will be returned without loss.'\n                            )}\n                        />\n                    </div>\n                    {has_cancellation && (\n                        <React.Fragment>\n                            <RadioGroup\n                                className='trade-params__multiplier-radio-group'\n                                name='trade-params__multiplier-radio'\n                                selected={cancellation_duration}\n                                onToggle={event => onChangeCancellationDuration({ event, onChangeMultiple })}\n                            >\n                                {cancellation_range_list.map(({ text, value }) => (\n                                    <RadioGroup.Item key={value} id={text} label={text} value={value.toString()} />\n                                ))}\n                            </RadioGroup>\n                        </React.Fragment>\n                    )}\n                </Fieldset>\n            </React.Fragment>\n        );\n    }\n);\n\nexport default CancelDeal;\n","import classNames from 'classnames';\nimport React from 'react';\nimport { MobileDialog, Button, Div100vhContainer } from '@deriv/components';\nimport { isDeepEqual, pick } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\nimport { observer } from '@deriv/stores';\nimport { useTraderStore } from 'Stores/useTraderStores';\nimport StopLoss from 'Modules/Trading/Components/Form/TradeParams/Multiplier/stop-loss.jsx';\nimport TakeProfit from 'Modules/Trading/Components/Form/TradeParams/Multiplier/take-profit.jsx';\nimport CancelDeal from 'Modules/Trading/Components/Elements/Multiplier/cancel-deal-mobile';\n\ntype TRiskManagementDialog = {\n    is_open: boolean;\n    onClose: () => void;\n    toggleDialog: () => void;\n};\ntype TValidation_errors = {\n    take_profit: string[] | [];\n    stop_loss: string[] | [];\n};\n\nconst RiskManagementDialog = observer(({ is_open, onClose, toggleDialog }: TRiskManagementDialog) => {\n    const {\n        is_turbos,\n        take_profit,\n        has_take_profit,\n        has_stop_loss,\n        stop_loss,\n        has_cancellation,\n        cancellation_range_list,\n        cancellation_duration,\n        onChangeMultiple,\n    } = useTraderStore();\n    const applied_risk_management_state = {\n        take_profit,\n        stop_loss,\n        has_take_profit,\n        has_stop_loss,\n        has_cancellation,\n        cancellation_duration,\n    };\n    const [state, setState] = React.useState(applied_risk_management_state);\n\n    const [validation_errors, setValidationErrors] = React.useState<TValidation_errors | Record<string, never>>({});\n\n    const should_show_deal_cancellation = cancellation_range_list?.length > 0;\n\n    const getStateToCompare = (_state: typeof applied_risk_management_state) => {\n        const props_to_pick = [\n            'has_take_profit',\n            'has_stop_loss',\n            'has_cancellation',\n            _state.has_take_profit && 'take_profit',\n            _state.has_stop_loss && 'stop_loss',\n            _state.has_cancellation && 'cancellation_duration',\n        ];\n\n        return pick(_state, props_to_pick);\n    };\n\n    const isStateUnchanged = () => {\n        return isDeepEqual(getStateToCompare(state), getStateToCompare(applied_risk_management_state));\n    };\n\n    const validate = (new_state: typeof applied_risk_management_state) => {\n        setValidationErrors({\n            take_profit:\n                new_state.has_take_profit && !new_state.take_profit\n                    ? [localize('Please enter a take profit amount.')]\n                    : [],\n            stop_loss:\n                new_state.has_stop_loss && !new_state.stop_loss ? [localize('Please enter a stop loss amount.')] : [],\n        });\n    };\n\n    const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        const new_state = { ...state };\n        new_state[name as 'take_profit' | 'stop_loss' | 'cancellation_duration'] = value;\n        setState(new_state);\n        validate(new_state);\n    };\n\n    const onChangeMultipleLocal = (props: keyof typeof applied_risk_management_state) => {\n        const new_state = { ...state };\n        Object.assign(new_state, props);\n        setState(new_state);\n        validate(new_state);\n    };\n\n    const apply = () => {\n        onChangeMultiple(state);\n        toggleDialog();\n    };\n\n    const resetAndClose = () => {\n        setState(applied_risk_management_state);\n        onClose();\n    };\n\n    return (\n        <React.Fragment>\n            <MobileDialog portal_element_id='modal_root' visible={is_open} has_content_scroll onClose={resetAndClose}>\n                <Div100vhContainer\n                    className={classNames('trade-params__multiplier-risk-management-dialog', {\n                        'trade-params__multiplier-risk-management-dialog--no-cancel': !should_show_deal_cancellation,\n                    })}\n                    height_offset='54px'\n                >\n                    <TakeProfit\n                        // @ts-expect-error TODO: ts migration of <TakeProfit />\n                        take_profit={state.take_profit}\n                        has_take_profit={state.has_take_profit}\n                        onChange={onChange}\n                        onChangeMultiple={onChangeMultipleLocal}\n                        validation_errors={validation_errors}\n                    />\n                    {!is_turbos && (\n                        <StopLoss\n                            // @ts-expect-error TODO: ts migration of <StopLoss />\n                            stop_loss={state.stop_loss}\n                            has_stop_loss={state.has_stop_loss}\n                            onChange={onChange}\n                            onChangeMultiple={onChangeMultipleLocal}\n                            validation_errors={validation_errors}\n                        />\n                    )}\n                    {should_show_deal_cancellation && (\n                        <CancelDeal\n                            has_take_profit={state.has_take_profit}\n                            has_stop_loss={state.has_stop_loss}\n                            has_cancellation={state.has_cancellation}\n                            cancellation_duration={state.cancellation_duration}\n                            onChangeMultiple={\n                                onChangeMultipleLocal as unknown as React.ComponentProps<\n                                    typeof CancelDeal\n                                >['onChangeMultiple']\n                            }\n                        />\n                    )}\n                    <div className='trade-params__multiplier-risk-management-dialog-bottom-separator' />\n                    <div className='trade-params__multiplier-risk-management-dialog-apply-button'>\n                        <Button\n                            text={localize('Apply')}\n                            onClick={apply}\n                            primary\n                            is_disabled={\n                                validation_errors.take_profit?.length > 0 ||\n                                validation_errors.stop_loss?.length > 0 ||\n                                isStateUnchanged()\n                            }\n                        />\n                    </div>\n                </Div100vhContainer>\n            </MobileDialog>\n        </React.Fragment>\n    );\n});\n\nexport default RiskManagementDialog;\n","import React from 'react';\nimport { Money } from '@deriv/components';\nimport { localize } from '@deriv/translations';\nimport RiskManagementDialog from 'Modules/Trading/Containers/Multiplier/risk-management-dialog';\nimport { observer } from '@deriv/stores';\nimport { useTraderStore } from 'Stores/useTraderStores';\n\nconst RiskManagementInfo = observer(() => {\n    const {\n        currency,\n        stop_loss,\n        take_profit,\n        has_take_profit,\n        has_stop_loss,\n        cancellation_duration,\n        cancellation_range_list,\n        has_cancellation,\n    } = useTraderStore();\n    const [is_dialog_open, setDialogOpen] = React.useState(false);\n    const has_risk_management = has_take_profit || has_stop_loss || has_cancellation;\n    const toggleDialog = () => {\n        setDialogOpen(!is_dialog_open);\n    };\n    const cancellation_label = cancellation_range_list.find(r => r.value === cancellation_duration)?.text;\n\n    return (\n        <React.Fragment>\n            <RiskManagementDialog\n                is_open={is_dialog_open}\n                toggleDialog={toggleDialog}\n                onClose={() => setDialogOpen(false)}\n            />\n            <div\n                className='mobile-widget mobile-widget__multiplier-risk-management'\n                onClick={() => setDialogOpen(!is_dialog_open)}\n            >\n                {!has_risk_management && (\n                    <div className='mobile-widget__item'>\n                        <div className='mobile-widget__item-label'>{localize('Risk management')}</div>\n                        <div className='mobile-widget__item-value'>{localize('Not set')}</div>\n                    </div>\n                )}\n                {has_take_profit && (\n                    <div className='mobile-widget__item'>\n                        <div className='mobile-widget__item-label'>{localize('Take profit')}</div>\n                        <div className='mobile-widget__item-value'>\n                            <Money amount={take_profit} currency={currency} show_currency />\n                        </div>\n                    </div>\n                )}\n                {has_stop_loss && (\n                    <div className='mobile-widget__item'>\n                        <div className='mobile-widget__item-label'>{localize('Stop loss')}</div>\n                        <div className='mobile-widget__item-value'>\n                            <Money amount={stop_loss} currency={currency} show_currency />\n                        </div>\n                    </div>\n                )}\n                {has_cancellation && (\n                    <div className='mobile-widget__item'>\n                        <div className='mobile-widget__item-label'>{localize('Deal Cancellation')}</div>\n                        <div className='mobile-widget__item-value'>{cancellation_label}</div>\n                    </div>\n                )}\n            </div>\n        </React.Fragment>\n    );\n});\n\nexport default RiskManagementInfo;\n","import React from 'react';\nimport { Icon, Money, Text, Popover } from '@deriv/components';\nimport { Localize } from '@deriv/translations';\nimport Fieldset from 'App/Components/Form/fieldset';\nimport { observer } from '@deriv/stores';\nimport { getLocalizedBasis } from '@deriv/shared';\nimport { useTraderStore } from 'Stores/useTraderStores';\nimport { TProposalTypeInfo } from 'Types';\n\ntype TProposalInfo = {\n    [key: string]: TProposalTypeInfo;\n};\n\nconst PayoutPerPointMobile = observer(() => {\n    const { currency, proposal_info, contract_type, is_vanilla, is_vanilla_fx } = useTraderStore();\n    const contract_key = contract_type?.toUpperCase();\n    // remove assertion and local TProposalInfo type after TS migration for trade package is complete\n    const { has_error, has_increased, id, message, obj_contract_basis } =\n        (proposal_info as TProposalInfo)?.[contract_key] || {};\n    const { text: label, value: payout_per_point } = obj_contract_basis || {};\n    const has_error_or_not_loaded = has_error || !id;\n    const turbos_payout_message = (\n        <Localize i18n_default_text='This is the amount you’ll receive at expiry for every point of change in the underlying price, if the spot price never touches or breaches the barrier throughout the contract duration.' />\n    );\n    const vanilla_payout_message = is_vanilla_fx ? (\n        <Localize\n            i18n_default_text='The payout at expiry is equal to the payout per pip multiplied by the difference, <0>in pips</0>, between the final price and the strike price.'\n            components={[<strong key={0} />]}\n        />\n    ) : (\n        <Localize i18n_default_text='The payout at expiry is equal to the payout per point multiplied by the difference between the final price and the strike price.' />\n    );\n    const tooltip_text = is_vanilla ? vanilla_payout_message : turbos_payout_message;\n    if (!payout_per_point) return <Fieldset className='payout-per-point' />;\n    return (\n        <Fieldset className='payout-per-point'>\n            <div className='payout-per-point__label-wrapper'>\n                <Text size='xs' color='less-prominent' className='payout-per-point__label'>\n                    {is_vanilla_fx ? getLocalizedBasis().payout_per_pip : label}\n                </Text>\n                <Popover\n                    alignment='top'\n                    icon='info'\n                    is_bubble_hover_enabled\n                    margin={0}\n                    zIndex='9999'\n                    message={message ? tooltip_text : ''}\n                />\n            </div>\n            <Text size='xs' weight='bold' className='payout-per-point__value'>\n                <Money amount={payout_per_point} currency={currency} show_currency should_format={false} />\n                <span className='trade-container__price-info-movement'>\n                    {!has_error_or_not_loaded && has_increased !== null && has_increased ? (\n                        <Icon icon='IcProfit' />\n                    ) : (\n                        <Icon icon='IcLoss' />\n                    )}\n                </span>\n            </Text>\n        </Fieldset>\n    );\n});\n\nexport default PayoutPerPointMobile;\n","import React from 'react';\nimport { Collapsible, Text } from '@deriv/components';\nimport { TradeParamsLoader } from 'App/Components/Elements/ContentLoader';\nimport AllowEqualsMobile from 'Modules/Trading/Containers/allow-equals';\nimport {\n    hasCallPutEqual,\n    hasDurationForCallPutEqual,\n    isRiseFallEqual,\n} from 'Stores/Modules/Trading/Helpers/allow-equals';\nimport {\n    AccumulatorOptionsWidget,\n    MultiplierOptionsWidget,\n} from 'Modules/Trading/Components/Form/TradeParams/Multiplier/widgets.jsx';\nimport AccumulatorsAmountMobile from 'Modules/Trading/Components/Form/TradeParams/Accumulator/accumulators-amount-mobile';\nimport AccumulatorsInfoDisplay from 'Modules/Trading/Components/Form/TradeParams/Accumulator/accumulators-info-display';\nimport { BarrierMobile, LastDigitMobile } from 'Modules/Trading/Containers/trade-params-mobile';\nimport ContractType from 'Modules/Trading/Containers/contract-type';\nimport MobileWidget from 'Modules/Trading/Components/Elements/mobile-widget.jsx';\nimport Purchase from 'Modules/Trading/Containers/purchase';\nimport RiskManagementInfo from 'Modules/Trading/Components/Elements/Multiplier/risk-management-info';\nimport TakeProfit from 'Modules/Trading/Components/Form/TradeParams/Multiplier/take-profit.jsx';\nimport 'Sass/app/_common/mobile-widget.scss';\nimport classNames from 'classnames';\nimport AccumulatorsStats from 'Modules/Contract/Components/AccumulatorsStats';\nimport Strike from 'Modules/Trading/Components/Form/TradeParams/strike.jsx';\nimport BarrierSelector from 'Modules/Trading/Components/Form/TradeParams/Turbos/barrier-selector';\nimport PayoutPerPointMobile from 'Modules/Trading/Components/Elements/payout-per-point-mobile';\nimport TradeTypeTabs from 'Modules/Trading/Components/Form/TradeParams/trade-type-tabs';\nimport { observer } from '@deriv/stores';\nimport { useTraderStore } from 'Stores/useTraderStores';\nimport { Localize } from '@deriv/translations';\n\ntype TCollapsibleTradeParams = Pick<\n    ReturnType<typeof useTraderStore>,\n    | 'form_components'\n    | 'has_take_profit'\n    | 'previous_symbol'\n    | 'is_accumulator'\n    | 'is_trade_params_expanded'\n    | 'is_multiplier'\n    | 'is_vanilla'\n    | 'is_turbos'\n    | 'onChange'\n    | 'take_profit'\n    | 'setIsTradeParamsExpanded'\n    | 'last_digit'\n> & {\n    has_allow_equals: boolean;\n    is_allow_equal: boolean;\n};\n\nconst CollapsibleTradeParams = ({\n    form_components,\n    has_allow_equals,\n    has_take_profit,\n    previous_symbol,\n    is_allow_equal,\n    is_accumulator,\n    is_multiplier,\n    is_trade_params_expanded,\n    is_turbos,\n    is_vanilla,\n    onChange,\n    take_profit,\n    setIsTradeParamsExpanded,\n    last_digit,\n}: TCollapsibleTradeParams) => {\n    React.useEffect(() => {\n        if (previous_symbol && is_allow_equal && has_allow_equals) setIsTradeParamsExpanded(true);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [previous_symbol]);\n\n    const is_collapsed = !is_trade_params_expanded;\n\n    const onClick = (e: boolean) => {\n        setIsTradeParamsExpanded(e);\n    };\n\n    const toggleDigitsWidget = () => {\n        setIsTradeParamsExpanded(true);\n    };\n\n    const isVisible = (component: string) => form_components.includes(component);\n\n    return (\n        <Collapsible position='top' is_collapsed={is_collapsed} onClick={onClick}>\n            {is_accumulator && is_collapsed && <AccumulatorsStats />}\n            <div className='trade-params__contract-type-container'>\n                <ContractType />\n                {is_multiplier && <MultiplierOptionsWidget />}\n                {isVisible('trade_type_tabs') && <TradeTypeTabs />}\n                {is_accumulator && <AccumulatorOptionsWidget />}\n                {isVisible('last_digit') && is_collapsed && (\n                    <Text\n                        as='p'\n                        size='xxs'\n                        color='prominent'\n                        line_height='s'\n                        weight='bold'\n                        className='mobile-widget__digit'\n                        onClick={toggleDigitsWidget}\n                    >\n                        <Localize i18n_default_text='Digit: {{last_digit}} ' values={{ last_digit }} />\n                    </Text>\n                )}\n            </div>\n            {isVisible('last_digit') && (\n                <div data-collapsible='true'>\n                    <LastDigitMobile />\n                </div>\n            )}\n            {isVisible('barrier') && (\n                <div data-collapsible='true'>\n                    <BarrierMobile />\n                </div>\n            )}\n            {isVisible('barrier_selector') && (\n                <div data-collapsible='true'>\n                    <BarrierSelector />\n                </div>\n            )}\n            {isVisible('strike') && (\n                <div data-collapsible='true'>\n                    <Strike />\n                </div>\n            )}\n            {!is_accumulator && <MobileWidget />}\n            {has_allow_equals && (\n                <div data-collapsible='true'>\n                    <AllowEqualsMobile />\n                </div>\n            )}\n            {is_multiplier && (\n                <div data-collapsible='true'>\n                    <RiskManagementInfo />\n                </div>\n            )}\n            {is_accumulator && [\n                <AccumulatorsAmountMobile key='accu_amount' />,\n                <div\n                    data-collapsible='true'\n                    key='accu_take_profit'\n                    className={classNames('take-profit', 'mobile-widget')}\n                >\n                    <TakeProfit\n                        //@ts-expect-error Observer wrapped component needs to be ts migrated before props can be detected\n                        take_profit={take_profit}\n                        has_take_profit={has_take_profit}\n                        onChange={onChange}\n                        has_info={false}\n                    />\n                </div>,\n                <div data-collapsible='true' key='accu_info'>\n                    <AccumulatorsInfoDisplay />\n                </div>,\n            ]}\n            {is_turbos && (\n                <div data-collapsible='true' className={classNames('take-profit', 'mobile-widget')}>\n                    <TakeProfit\n                        //@ts-expect-error Observer wrapped component needs to be ts migrated before props can be detected\n                        take_profit={take_profit}\n                        has_take_profit={has_take_profit}\n                        onChange={onChange}\n                        has_info={false}\n                    />\n                </div>\n            )}\n            {(is_turbos || is_vanilla) && <PayoutPerPointMobile />}\n            <div\n                className={classNames({\n                    'purchase-container': !is_vanilla,\n                    [`purchase-container__${is_accumulator ? 'accumulator' : 'turbos'}`]: is_accumulator || is_turbos,\n                })}\n            >\n                <Purchase />\n            </div>\n        </Collapsible>\n    );\n};\n\nconst ScreenSmall = observer(({ is_trade_enabled }: { is_trade_enabled: boolean }) => {\n    const trade_store = useTraderStore();\n    const {\n        is_accumulator,\n        is_multiplier,\n        is_turbos,\n        is_vanilla,\n        duration_unit,\n        contract_types_list,\n        contract_type,\n        expiry_type,\n        contract_start_type,\n        form_components,\n        has_take_profit,\n        onChange,\n        previous_symbol,\n        is_trade_params_expanded,\n        setIsTradeParamsExpanded,\n        take_profit,\n        last_digit,\n    } = trade_store;\n    const is_allow_equal = !!trade_store.is_equal;\n\n    const collapsible_trade_params_props = {\n        is_accumulator,\n        is_multiplier,\n        is_turbos,\n        is_vanilla,\n        form_components,\n        has_take_profit,\n        onChange,\n        previous_symbol,\n        is_trade_params_expanded,\n        setIsTradeParamsExpanded,\n        take_profit,\n        is_allow_equal,\n        last_digit,\n    };\n\n    const has_callputequal_duration = hasDurationForCallPutEqual(\n        contract_types_list,\n        duration_unit,\n        contract_start_type\n    );\n\n    const has_callputequal = hasCallPutEqual(contract_types_list);\n    const has_allow_equals =\n        isRiseFallEqual(contract_type) && (has_callputequal_duration || expiry_type === 'endtime') && has_callputequal;\n\n    return !is_trade_enabled ? (\n        <div className='mobile-wrapper__content-loader'>\n            <TradeParamsLoader speed={2} />\n        </div>\n    ) : (\n        <CollapsibleTradeParams has_allow_equals={has_allow_equals} {...collapsible_trade_params_props} />\n    );\n});\n\nexport default ScreenSmall;\n"],"names":["AllowEquals","onChange","is_allow_equal","has_equals_only","className","classNames","Checkbox","label","localize","value","name","e","persist","target","checked","Number","disabled","Text","as","size","Localize","i18n_default_text","observer","useTraderStore","allow_equals_props","is_equal","requestPreviewProposal","debounce","store","override","onProposalResponse","new_store","requests","createProposalRequests","subscription_map","onResponse","response","error","subscription","id","isEmptyObject","proposal_requests","Object","keys","forEach","type","WS","Basis","basis","duration_unit","duration_value","toggleModal","has_duration_error","selected_basis","setSelectedAmount","setAmountError","useStore","ui","client","addToast","currency","contract_type","is_turbos","is_vanilla","onChangeMultiple","trade_amount","amount","trade_basis","trade_duration_unit","trade_duration","duration","stake_boundary","toUpperCase","min_stake","max_stake","user_currency_decimal_places","getDecimalPlaces","zero_decimals","toFixed","min_amount","parseFloat","toString","replace","validateAmount","localized_message","min_max_stake_message","values","selected_value","key","content","timeout","isNaN","length","strike__pos","Numpad","format","onSubmit","on_change_obj","min","max","is_currency","render","Money","should_format","reset_press_interval","reset_value","pip_size","onValidate","submit_label","onValueChange","num","amount_tab_idx","setAmountTabIdx","stake_value","payout_value","basis_list","active_index","findIndex","b","Tabs","onTabItemClick","top","map","basis_option","text","is_open","usePreventIOSZoom","Modal","is_title_centered","should_header_stick_body","height","width","title","Div100vhContainer","max_autoheight_offset","TradeParamsMobile","trade_store","React","setStakeValue","commission","setCommission","stop_out","setStopOut","stake_ref","isMounted","useIsMounted","dispose","proposal","echo_req","current","limit_order","order_amount","stake","should_show_tooltip","items_list","contract_name","current_value_object","info","is_tooltip_disabled","popover_alignment","Popover","alignment","classNameBubble","disable_target_icon","icon","is_bubble_hover_enabled","zIndex","message","RadioGroup","selected","onToggle","MultiplierOptions","multiplier","multiplier_range_list","modal_title","accumulator_range_list","growth_rate","tick_size_barrier","proposal_info","has_error_or_not_loaded","ACCU","has_error","getGrowthRatePercentage","getTickSizeBarrierPercentage","MultipliersExpirationModal","enableApp","disableApp","has_close_icon","style","minHeight","padding","color","components","is_text_only","text_size","has_separator","Button","large","primary","has_effect","onClick","propTypes","PropTypes","AmountWidget","expiration","is_crypto_multiplier","setIsOpen","is_expiration_modal_open","setIsExpirationModalOpen","toggleExpirationModal","weight","show_currency","commission_text_size","stop_out_text_size","MultiplierAmountWidget","amount_widget_props","RadioGroupOptionsWidget","displayed_trade_param","tooltip_message","is_disabled","should_show_new_label","stopPropagation","line_height","MultiplierOptionsWidget","symbol","showLabelForMultipliers","AccumulatorOptionsWidget","has_open_accu_contract","is_nativepicker","current_focus","setCurrentFocus","is_single_currency","MobileWrapper","LabeledQuantityInputMobile","input_label","classNameInlinePrefix","classNameInput","fractional_digits","inline_prefix","is_autocomplete_disabled","is_float","is_hj_whitelisted","is_incrementable","is_negative_disabled","max_length","AMOUNT_MAX_LENGTH","ariaLabel","updateAmountChanges","obj","Ticks","setDurationError","has_amount_error","selected_duration","setSelectedDuration","duration_min_max","getDurationMinMaxValues","min_tick","max_tick","tick_duration","TickPicker","default_value","max_value","min_value","tick","singular_label","plural_label","Numbers","contract_expiry","duration_unit_option","duration_values","expiry_epoch","show_expiry","setHasError","validateDuration","addComma","parseInt","fixed_date","epoch","moment","add","expiry_date","Date","getTime","toUTCString","substring","setExpiryDate","d_duration","getUnitMap","name_plural","duration_unit_text","expiry_type","v","duration_tab_idx","h_duration","m_duration","s_duration","setDurationTabIdx","t_duration","duration_units_list","d","handleRelativeChange","date","selected_basis_option","index","unit","onTabChange","single_tab_has_no_label","RelativeDatepicker","min_date","max_date","DEFAULT_DURATION","freeze","t","s","m","h","reducer","state","payload","tab_index","form_components","getDefaultDuration","trade_param_tab_idx","undefined","curr_duration_unit","curr_duration_value","dispatch","selected_duration_unit","header","ThemedScrollbars","isVisible","component_key","includes","setTradeParamTabIdx","selected_basis_value","getHeaderContent","tab_key","find","slice","LastDigitMobile","BarrierMobile","onChangeUiStore","is_multiplier","setTabIndex","assertDurationIsWithinBoundary","contract_expiry_type","getExpiryType","toggleWidget","localized_basis","getLocalizedBasis","lookup","formatted_duration_unit","getHumanReadableDuration","payout","stakeOrPayout","DealCancellationWarningDialog","is_visible","onConfirm","onCancel","should_show_cancellation_warning","toggleCancellationWarning","Dialog","confirm_button_text","cancel_button_text","is_mobile_full_width","portal_element_id","defaultChecked","has_cancellation","has_take_profit","has_stop_loss","cancellation_duration","cancellation_range_list","is_deal_cancel_warning_visible","setDealCancelWarningVisibility","onToggleCancellation","should_show_popover","event","onChangeCancellationDuration","onClose","toggleDialog","take_profit","stop_loss","applied_risk_management_state","setState","validation_errors","setValidationErrors","should_show_deal_cancellation","getStateToCompare","_state","props_to_pick","pick","validate","new_state","onChangeMultipleLocal","props","assign","MobileDialog","visible","has_content_scroll","height_offset","isDeepEqual","is_dialog_open","setDialogOpen","has_risk_management","cancellation_label","r","PayoutPerPointMobile","is_vanilla_fx","contract_key","has_increased","obj_contract_basis","payout_per_point","turbos_payout_message","vanilla_payout_message","tooltip_text","payout_per_pip","margin","Icon","CollapsibleTradeParams","has_allow_equals","previous_symbol","is_accumulator","is_trade_params_expanded","setIsTradeParamsExpanded","last_digit","is_collapsed","component","Collapsible","position","AccumulatorsStats","has_info","ScreenSmall","is_trade_enabled","contract_types_list","contract_start_type","collapsible_trade_params_props","has_callputequal_duration","hasDurationForCallPutEqual","has_callputequal","hasCallPutEqual","isRiseFallEqual","speed"],"sourceRoot":""}