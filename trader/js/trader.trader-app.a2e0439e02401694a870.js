/*! For license information please see trader.trader-app.a2e0439e02401694a870.js.LICENSE.txt */
(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["trader-app"],{"../api/src/index.ts":(t,e,r)=>{"use strict";r.d(e,{un:()=>b,mU:()=>x});var n=r("react"),o=r.n(n);const i=(0,n.createContext)(null);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(){s=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),s=new j(o||[]);return n(a,"_invoke",{value:E(t,r,s)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var d={};function h(){}function m(){}function y(){}var _={};u(_,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(P([])));b&&b!==e&&r.call(b,i)&&(_=b);var g=y.prototype=h.prototype=Object.create(_);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(n,i,s,c){var l=p(t[n],t,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==a(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,c)}),(function(t){o("throw",t,s,c)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return m.prototype=y,n(g,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,l,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),u(g,l,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=P,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const p=function(){var t=(0,n.useContext)(i),e=(0,n.useCallback)(function(){var e,r=(e=s().mark((function e(r,n){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==t?void 0:t.send(l(u({},r,1),n||{}));case 2:if(!(o=e.sent).error){e.next=5;break}throw o.error;case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){f(i,n,o,a,s,"next",t)}function s(t){f(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t,e){return r.apply(this,arguments)}}(),[t]);return{send:e,subscribe:(0,n.useCallback)((function(e,r){var n;return null==t?void 0:t.subscribe(l((u(n={},e,1),u(n,"subscribe",1),n),r||{}))}),[t])}};var d=r("../../node_modules/@deriv/deriv-api/dist/DerivAPIBasic.js"),h=r.n(d),m=r("@deriv/shared"),y=r("../../node_modules/@tanstack/query-core/build/lib/queryClient.mjs"),_=r("../../node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),v=(window.ReactQueryClient||(window.ReactQueryClient=new y.S),window.ReactQueryClient);const b=function(t){var e,r,n,a,s,c=t.children,l=t.standalone,u=void 0!==l&&l,f=(0,m.useWS)(),p=u?(n=(0,m.getSocketURL)(),a=(0,m.getAppId)(),s="wss://".concat(n,"/websockets/v3?app_id=").concat(a,"&l=").concat("EN","&brand=").concat("deriv"),window.DerivAPI||(window.DerivAPI={}),null!==(e=window.DerivAPI)&&void 0!==e&&e[s]||(window.DerivAPI[s]=new(h())({connection:new WebSocket(s)})),null===(r=window.DerivAPI)||void 0===r?void 0:r[s]):f;return o().createElement(i.Provider,{value:p},o().createElement(_.aH,{client:v},c))};r("../utils/src/index.ts");function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const x=function(t){var e=g((0,n.useState)(!1),2),r=e[0],o=e[1],i=g((0,n.useState)(!1),2),a=i[0],s=i[1],c=g((0,n.useState)(),2),l=c[0],u=c[1],f=g((0,n.useState)(),2),d=f[0],h=f[1],m=(0,n.useRef)(),y=p().subscribe,_=(0,n.useCallback)((function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=null==r?void 0:r[0],a=i&&"payload"in i?i.payload:void 0;o(!0),s(!0);try{m.current=y(t,a).subscribe((function(t){h(t),o(!1)}),(function(t){u(t.error),o(!1)}))}catch(t){u(t)}}),[y,t]),v=(0,n.useCallback)((function(){var t,e;null===(t=m.current)||void 0===t||null===(e=t.unsubscribe)||void 0===e||e.call(t),s(!1)}),[]);return(0,n.useEffect)((function(){return function(){v()}}),[v]),{subscribe:_,unsubscribe:v,isLoading:r,isSubscribed:a,error:l,data:d}}},"../stores/src/index.ts":(t,e,r)=>{"use strict";r.d(e,{g3:()=>I,Pi:()=>n.Pi,oR:()=>u});var n=r("../../node_modules/mobx-react-lite/es/index.js"),o=r("../../node_modules/lodash.merge/index.js"),i=r.n(o);var a=r("react"),s=r.n(a);const c=(0,a.createContext)(null);var l=r("../api/src/index.ts");const u=function(){var t=(0,a.useContext)(c);if(!t)throw new Error("useStore must be used within StoreProvider");return t};const f=(0,n.Pi)((function(t){var e=t.children,r=(0,l.mU)("exchange_rates"),n=r.data,o=r.subscribe,c=u().exchange_rates.update;return(0,a.useEffect)((function(){o({payload:{base_currency:"USD"}})}),[o]),(0,a.useEffect)((function(){if(n){var t=n.exchange_rates;t&&c((function(e){return i()(e,t)}))}}),[c,n]),s().createElement(s().Fragment,null,e)}));var p=r("mobx"),d=r("../../node_modules/mobx-persist-store/lib/esm5/index.js");function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==h(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===h(i)?i:String(i)),n)}var o,i}var y=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=void 0,(0,p.makeObservable)(this,{data:p.observable,update:p.action.bound,unmount:p.action.bound}),(0,d.Ko)(this,{name:e,properties:["data"],storage:window.localStorage}).then((function(){return null==r?void 0:r()}))}var e,r,n;return e=t,(r=[{key:"update",value:function(t){this.data=t instanceof Function?t(this.data):t}},{key:"unmount",value:function(){(0,d.Rf)(this)}}])&&m(e.prototype,r),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===_(i)?i:String(i)),n)}var o,i}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=w(t);if(e){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(i,t);var e,r,n,o=g(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,"ExchangeRatesStore")}return e=i,r&&v(e.prototype,r),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(y);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==E(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===E(i)?i:String(i)),n)}var o,i}function k(t,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=j(t);if(e){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}var P={wallet:!1,next_wallet:!1,sharkfin:!1},L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(i,t);var e,r,n,o=O(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"FeatureFlagsStore",(function(){t.data||t.update(P),t.data&&Object.keys(t.data).length!==Object.keys(P).length&&t.update((function(t){var e=P;return Object.keys(P).forEach((function(r){void 0!==t[r]&&(e[r]=t[r])})),e}))}))).data=P,t}return e=i,r&&S(e.prototype,r),n&&S(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(y);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){N(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function N(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==C(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===C(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const I=function(t){var e=t.children,r=t.store,n=(0,a.useMemo)((function(){return"is_mock"in r&&r.is_mock?r:A(A({},r),{},{exchange_rates:new x,feature_flags:new L})}),[r]);return(0,a.useEffect)((function(){return function(){Object.values(n).forEach((function(t){"object"===C(t)&&"unmount"in t&&t.unmount()}))}}),[n]),s().createElement(l.un,null,s().createElement(c.Provider,{value:n},s().createElement(f,null,e)))}},"./src/App/Components/Animations/index.js":(t,e,r)=>{"use strict";r.d(e,{s:()=>l,o:()=>p});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r.n(i),s=r("../../node_modules/framer-motion/dist/es/render/dom/motion.mjs"),c={animate:{y:0,opacity:1},initial:{y:35,opacity:0},transition:{type:"spring",stiffness:500,damping:15,duration:.3}},l=function(t){var e=t.children,r=t.className,n=t.is_visible,o=t.keyname;return n?a().createElement(s.E.div,{initial:c.initial,animate:c.animate,transition:c.transition,className:r,key:o},e):null};l.propTypes={children:o().node,className:o().string,is_visible:o().bool,keyname:o().string};var u={initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2}},f={initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2}},p=function(t){var e=t.children,r=t.className,n=t.keyname,o=t.is_visible;return"bottom"===t.type?a().createElement(a().Fragment,null,o&&a().createElement(s.E.div,{initial:f.initial,animate:f.animate,transition:f.transition,className:r,key:n},e)):a().createElement(a().Fragment,null,o&&a().createElement(s.E.div,{initial:u.initial,animate:u.animate,transition:u.transition,className:r,key:n},e))};p.propTypes={children:o().node,className:o().string,is_visible:o().bool,keyname:o().string,type:o().string}},"./src/App/Components/Elements/ContentLoader/index.js":(t,e,r)=>{"use strict";r.d(e,{r:()=>c,G:()=>u});var n=r("../../node_modules/react-content-loader/dist/react-content-loader.es.js"),o=r("react"),i=r.n(o),a=r("../../node_modules/prop-types/index.js"),s=r.n(a),c=function(t){var e=t.speed;return i().createElement(n.ZP,{height:173,width:218,speed:e,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},i().createElement("rect",{x:"43",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),i().createElement("rect",{x:"147",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),i().createElement("rect",{x:"12",y:"50",rx:"0",ry:"0",width:"44",height:"8"}),i().createElement("rect",{x:"13",y:"68",rx:"0",ry:"0",width:"192",height:"8"}),i().createElement("rect",{x:"5",y:"89",rx:"0",ry:"0",width:"208",height:"1"}),i().createElement("rect",{x:"12",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),i().createElement("rect",{x:"12",y:"9",rx:"0",ry:"0",width:"24",height:"24"}),i().createElement("rect",{x:"116",y:"11",rx:"0",ry:"0",width:"24",height:"24"}),i().createElement("rect",{x:"12",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),i().createElement("rect",{x:"116",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),i().createElement("rect",{x:"116",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),i().createElement("rect",{x:"12",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),i().createElement("rect",{x:"12",y:"153",rx:"0",ry:"0",width:"88",height:"8"}),i().createElement("rect",{x:"116",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),i().createElement("rect",{x:"116",y:"153",rx:"0",ry:"0",width:"88",height:"8"}))};c.propTypes={speed:s().number};var l=r("@deriv/components"),u=function(t){var e=t.speed;return i().createElement(i().Fragment,null,i().createElement(l.MobileWrapper,null,i().createElement(n.ZP,{height:214,width:344,speed:e,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)",viewBox:"0 0 344 176"},i().createElement("rect",{x:"148",y:"24",rx:"3",ry:"3",width:"40",height:"4"}),i().createElement("rect",{x:"8",y:"40",rx:"4",ry:"4",width:"328",height:"40"}),i().createElement("rect",{x:"8",y:"88",rx:"4",ry:"4",width:"328",height:"40"}),i().createElement("rect",{x:"8",y:"136",rx:"4",ry:"4",width:"160",height:"70"}),i().createElement("rect",{x:"176",y:"136",rx:"4",ry:"4",width:"160",height:"70"}))),i().createElement(l.DesktopWrapper,null,i().createElement(n.ZP,{height:548,width:240,speed:e,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},i().createElement("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"240",height:"76"}),i().createElement("rect",{x:"0",y:"84",rx:"4",ry:"4",width:"240",height:"132"}),i().createElement("rect",{x:"0",y:"224",rx:"4",ry:"4",width:"240",height:"120"}),i().createElement("rect",{x:"0",y:"352",rx:"4",ry:"4",width:"240",height:"194"}))))};u.propTypes={speed:s().number}},"./src/App/Components/Elements/PositionsDrawer/helpers/index.ts":(t,e,r)=>{"use strict";r.d(e,{Bs:()=>n.Bs,Ew:()=>n.Ew,_M:()=>n._M,qm:()=>n.qm,rh:()=>n.rh});var n=r("./src/App/Components/Elements/PositionsDrawer/helpers/positions-helper.ts")},"./src/App/Components/Elements/PositionsDrawer/helpers/positions-helper.ts":(t,e,r)=>{"use strict";r.d(e,{Bs:()=>a,Ew:()=>i,_M:()=>u,qm:()=>c,rh:()=>s});var n=r("@deriv/translations"),o=r("@deriv/shared"),i=function(t,e){if(!t||isNaN(t))return t;var r=String(e?(+t).toFixed(e):t),n=r.indexOf(".");return r.replace(/\d(?=(?:\d{3})+(?:\.|$))/g,(function(t,e){return n<=0||e<n?"".concat(t,","):t}))},a=function(t){return c(t.contract_type)?(0,n.localize)("Target"):(0,o.isVanillaContract)(t.contract_type)?(0,n.localize)("Strike"):(0,n.localize)("Barrier")},s=function(t){return c(t.contract_type)?l(t)[t.contract_type]:i(Number(t.barrier))},c=function(t){return t&&/digit/.test(t.toLowerCase())},l=function(t){return{DIGITDIFF:(0,n.localize)("Not {{barrier}}",{barrier:t.barrier}),DIGITEVEN:(0,n.localize)("Even"),DIGITMATCH:(0,n.localize)("Equals {{barrier}}",{barrier:t.barrier}),DIGITODD:(0,n.localize)("Odd"),DIGITOVER:(0,n.localize)("Over {{barrier}}",{barrier:t.barrier}),DIGITUNDER:(0,n.localize)("Under {{barrier}}",{barrier:t.barrier})}},u=function(t,e){var r,n=t.contract_type,i=t.shortcode,a=(0,o.isCallPut)(e),s=(0,o.isHighLow)({shortcode:i}),c=(0,o.isVanillaContract)(n),l=a?["CALL","CALLE","PUT","PUTE"]:null===(r=(0,o.getContractTypesConfig)()[e])||void 0===r?void 0:r.trade_types,u=null==l?void 0:l.includes(null!=n?n:"");return"high_low"===e?s:u&&(c||!s)}},"./src/App/Components/Elements/chart-loader.tsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var n=r("react"),o=r.n(n),i=r("../../node_modules/classnames/index.js"),a=r.n(i);const s=function(t){var e=t.className,r=t.data_testid,n=t.is_invisible,i=t.theme,s=t.id;return o().createElement("div",{id:s,"data-testid":r,className:a()("barspinner","barspinner--".concat(i||"dark"),{invisible:n},e)},Array.from(new Array(5)).map((function(t,e){return o().createElement("div",{key:e,className:"barspinner__rect barspinner__rect--".concat(e+1," rect").concat(e+1)})})))};const c=function(t){var e=t.is_dark;return t.is_visible?o().createElement("div",{className:"chart-container__loader"},o().createElement(s,{theme:e?"dark":"light",data_testid:"dt_barspinner"})):null}},"./src/App/index.tsx":(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>Ao});var n=r("react"),o=r.n(n),i=r("../../node_modules/react-loadable/lib/index.js"),a=r.n(i),s=r("../../node_modules/prop-types/index.js"),c=r.n(s),l=r("react-router"),u=r("@deriv/components"),f=r("@deriv/shared"),p=r("react-router-dom"),d=function t(e,r){var n;return r.some((function(r){var o;try{o=(0,l.matchPath)(e,r)}catch(t){if(/undefined/.test(t.message))return}return o?(n=r,!0):!!r.routes&&(n=t(e,r.routes))})),n},h=r("@deriv/translations"),m=r("../../node_modules/classnames/index.js"),y=r.n(m),_=r("./src/App/Components/Elements/chart-loader.tsx"),v=r("../../node_modules/react-transition-group/esm/CSSTransition.js");const b=function(t){var e=t.error;return o().createElement("div",{className:"portfolio-empty"},o().createElement("div",{className:"portfolio-empty__wrapper"},e?o().createElement(u.Text,{color:"disabled",size:"xs"},e):o().createElement(o().Fragment,null,o().createElement(u.Icon,{icon:"IcPortfolio",className:"portfolio-empty__icon",size:96,color:"disabled"}),o().createElement(u.Text,{align:"center",className:"portfolio-empty__text",color:"disabled",size:"xs"},(0,h.localize)("You have no open positions for this asset. To view other open positions, click Go to Reports")))))};var g=r("./src/App/Components/Elements/PositionsDrawer/helpers/index.ts"),w=r("./src/Stores/useTraderStores.tsx"),x=r("../stores/src/index.ts"),E=["row","measure","onHoverPosition","symbol","is_new_row"];function S(){return S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},S.apply(this,arguments)}function k(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var O=function(t){var e=t.row,r=t.measure,n=t.onHoverPosition,i=t.symbol,a=t.is_new_row,s=k(t,E),c=(0,f.useNewRowTransition)(a).in_prop;return o().useEffect((function(){null==r||r()}),[null==e?void 0:e.contract_info.is_sold,r]),o().createElement(v.Z,{in:c,timeout:150,classNames:{appear:"dc-contract-card__wrapper--enter",enter:"dc-contract-card__wrapper--enter",enterDone:"dc-contract-card__wrapper--enter-done",exit:"dc-contract-card__wrapper--exit"},onEntered:r,unmountOnExit:!0},o().createElement("div",{className:"dc-contract-card__wrapper"},o().createElement(u.PositionsDrawerCard,S({},e,s,{onMouseEnter:function(){n(!0,e,i)},onMouseLeave:function(){n(!1,e,i)},onFooterEntered:r,should_show_transition:a}))))},j=(0,x.Pi)((function(t){var e=S({},(function(t){if(null==t)throw new TypeError("Cannot destructure "+t)}(t),t)),r=(0,w.b)(),n=r.symbol,i=r.contract_type,a=(0,x.oR)(),s=a.client,c=a.common,l=a.contract_trade,d=a.portfolio,m=a.ui,_=s.currency,v=c.server_time,E=l.getContractById,k=d.all_positions,j=d.error,P=d.onHoverPosition,L=d.onMount,C=d.onClickCancel,T=d.onClickSell,A=d.removePositionById,N=m.is_mobile,I=m.is_positions_drawer_on,M=m.togglePositionsDrawer,D=m.addToast,R=m.current_focus,z=m.removeToast,G=m.setCurrentFocus,F=m.should_show_cancellation_warning,B=m.toggleCancellationWarning,U=m.toggleUnsupportedContractModal,V=o().useRef(null),H=o().useRef(null),q=o().useRef(null);o().useEffect((function(){L()}),[L]),o().useEffect((function(){var t;null==H||null===(t=H.current)||void 0===t||t.scrollTo({top:0}),q.current&&(q.current.scrollTop=0)}),[n,i]);var W=k.filter((function(t){return t.contract_info&&n===t.contract_info.underlying&&((0,f.isTurbosContract)(i)||(0,f.isVanillaContract)(i)?(0,g._M)(t.contract_info,(0,f.isTurbosContract)(i)?f.TURBOS.SHORT:f.VANILLALONG.CALL)||(0,g._M)(t.contract_info,(0,f.isTurbosContract)(i)?f.TURBOS.LONG:f.VANILLALONG.PUT):(0,g._M)(t.contract_info,i))})),Y=o().createElement(u.DataList,{data_source:W,rowRenderer:function(t){return o().createElement(O,S({onHoverPosition:P,symbol:n,currency:_,addToast:D,onClickCancel:C,onClickSell:T,onClickRemove:A,server_time:v,getContractById:E,is_mobile:N,current_focus:R,removeToast:z,setCurrentFocus:G,should_show_cancellation_warning:F,toggleCancellationWarning:B,toggleUnsupportedContractModal:U},t,e))},keyMapper:function(t){return t.id},row_gap:8});return o().createElement(o().Fragment,null,o().createElement("div",{className:y()("positions-drawer__bg",{"positions-drawer__bg--open":I})}),o().createElement("div",{id:"dt_positions_drawer",className:y()("positions-drawer",{"positions-drawer--open":I})},o().createElement("div",{className:"positions-drawer__header"},o().createElement(u.Text,{color:"prominent",weight:"bold",size:"xs"},(0,h.localize)("Recent positions")),o().createElement("div",{id:"dt_positions_drawer_close_icon",className:"positions-drawer__icon-close",onClick:M},o().createElement(u.Icon,{icon:"IcMinusBold"}))),o().createElement("div",{className:"positions-drawer__body",ref:V},0===W.length||j?o().createElement(b,{error:j}):Y),o().createElement("div",{className:"positions-drawer__footer"},o().createElement(p.NavLink,{id:"dt_positions_drawer_report_button",className:"dc-btn dc-btn--secondary dc-btn__large",to:f.routes.reports},o().createElement(u.Text,{size:"xs",weight:"bold"},(0,h.localize)("Go to Reports"))))))}));const P=j;var L=r("../../node_modules/moment/moment.js"),C=r.n(L);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I(){I=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(O([])));_&&_!==e&&r.call(_,i)&&(m=_);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==T(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function M(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function D(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){M(i,n,o,a,s,"next",t)}function s(t){M(i,n,o,a,s,"throw",t)}a(void 0)}))}}var R=function(){var t=D(I().mark((function t(e){var r;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.WS.tradingTimes(e);case 2:if(!(r=t.sent).error){t.next=5;break}return t.abrupt("return",{api_initial_load_error:r.error.message});case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z=function(t,e){for(var r,n=e.markets,o=0;o<n.length;o++){var i=n[o].submarkets;if(i)for(var a=0;a<i.length;a++){var s=i[a].symbols;if(void 0!==(r=null==s?void 0:s.find((function(e){return e.symbol===t}))))return r}}},G=function(t){var e=t-Date.now();return e>0?{days:Math.floor(e/864e5),hours:Math.floor(e/36e5%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}:{}};const F=(0,x.Pi)((function(t){var e=t.is_main_page,r=t.setIsTimerLoading,n=t.onMarketOpen,i=t.symbol,a=(0,w.b)().active_symbols,s=(0,f.useIsMounted)(),c=A(o().useState({}),2),l=c[0],p=c[1],d=A(o().useState(G(null==l?void 0:l.remaining_time_to_open)),2),m=d[0],_=d[1],v=A(o().useState(!0),2),b=v[0],g=v[1];o().useEffect((function(){if(!e||e&&(0,f.isMarketClosed)(a,i)){g(!0);var t=function(){var e=D(I().mark((function e(r,n){var o,a,c,l,u,f,d,h,m;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r>7)){e.next=2;break}return e.abrupt("return",{});case 2:return a=C()(new Date).add(r,"days"),e.next=5,R(a.format("YYYY-MM-DD"));case 5:if((c=e.sent).api_initial_load_error){e.next=26;break}if(l=z(n,c.trading_times),u=null==l?void 0:l.times.open,f=null==l?void 0:l.times.close,!(1===(null==u?void 0:u.length)&&"--"===u[0]&&"--"===f[0])){e.next=13;break}return e.abrupt("return",t(r+1,n));case 13:d=a.toISOString().substring(0,11),h=function(t){return new Date("".concat(d).concat(t,"Z"))},m=0;case 16:if(!(m<(null==u?void 0:u.length))){e.next=25;break}if(!(+h(u[m])-Date.now()>0)){e.next=22;break}if(o=+h(u[m]),!s()||n!==i){e.next=22;break}return e.abrupt("return",p({days_offset:r,opening_time:u[m],remaining_time_to_open:o}));case 22:m++,e.next=16;break;case 25:t(r+1,n);case 26:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t(0,i)}}),[i]),o().useEffect((function(){var t;return null!=l&&l.remaining_time_to_open&&(t=setTimeout((function(){_(G(l.remaining_time_to_open)),+new Date(l.remaining_time_to_open)-+new Date<1e3&&(g(!0),e&&n(!1))}),1e3)),function(){t&&clearTimeout(t)}}),[m,l,n,e]),o().useEffect((function(){b||r(!1)}),[b,r]);var x="";if(Object.keys(m).length){var E=(24*Number(m.days)+Number(m.hours)).toString().padStart(2,"0"),S=Number(m.minutes).toString().padStart(2,"0"),k=Number(m.seconds).toString().padStart(2,"0");x="".concat(E,":").concat(S,":").concat(k)}if(!l||!x)return null;var O=l.opening_time,j=l.days_offset,P=null;if(O){var L=(0,f.convertTimeFormat)(O),T=C()(new Date).add(j,"days"),N=T.format("DD MMM YYYY"),M=T.format("dddd");P=o().createElement(u.Text,{align:"center",as:"p",className:"market-is-closed-overlay__open-date",line_height:"m",color:"prominent",size:e?"s":"xs",weight:"bold"},o().createElement(h.Localize,{i18n_default_text:"{{formatted_opening_time}} (GMT) on {{opening_day}},<0></0> {{opening_date}}.",components:[o().createElement("div",{key:0})],values:{formatted_opening_time:L,opening_day:M,opening_date:N}}))}return b&&g(!1),o().createElement(o().Fragment,null,o().createElement(u.Text,{as:"p",className:y()("market-is-closed-overlay__open-at",{"market-is-closed-overlay__open-at--main-page":e}),line_height:"x",size:e?"xs":"xxs"},o().createElement(h.Localize,{i18n_default_text:"It will reopen at"})),P,o().createElement(u.Text,{align:"center",as:"p",className:y()("market-is-closed-overlay__come-back",{"market-is-closed-overlay__come-back--main-page":e}),line_height:"x",size:e?"xs":"xxs"},o().createElement(h.Localize,{i18n_default_text:"Please come back in"})),o().createElement(u.Text,{as:"p",className:y()("market-is-closed-overlay__timer",{"market-is-closed-overlay__timer--main-page":e}),line_height:"m",color:"prominent",size:e?"s":"xs",weight:"bold"},x),o().createElement("div",{className:"market-is-closed-overlay__separator"}))}));function B(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const V=function(t){var e=t.is_eu,r=t.is_synthetics_trading_market_available,n=t.onClick,i=t.onMarketOpen,a=t.symbol,s=B(o().useState(!0),2),c=s[0],l=s[1],f=o().createElement(h.Localize,{i18n_default_text:"In the meantime, try our synthetic indices. They simulate real-market volatility and are open 24/7."}),p=(0,h.localize)("Try Synthetic Indices");return r||(f=null,p=(0,h.localize)("See open markets")),o().createElement("div",{className:y()("market-is-closed-overlay",{"market-is-closed-overlay--loading":c})},o().createElement(u.Text,{as:"p",className:"market-is-closed-overlay__main-heading",color:"prominent",weight:"bold"},o().createElement(h.Localize,{i18n_default_text:"This market is closed"})),o().createElement(F,{is_main_page:!0,setIsTimerLoading:l,onMarketOpen:i,symbol:a}),f&&o().createElement(u.Text,{align:"center",as:"p",className:"market-is-closed-overlay__main-message",size:"xs"},f),(!e||e&&r)&&o().createElement(u.Button,{className:"market-is-closed-overlay__button",onClick:n,text:p,primary:!0}))};var H=r("mobx");function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function W(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){Y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Y(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Z(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Z(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function $(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return J(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var K={container:{fontSize:"10px",lineHeight:"15px",position:"absolute",zIndex:1,background:"rgba(0, 0, 0, 0.8)",color:"#ccc",padding:"10px",marginTop:"-10px",display:"none",overflowY:"auto",height:"100%",width:"100%"},prop_name:{color:"yellowgreen"},tabs:{display:"flex",textAlign:"center",marginBottom:"10px"},tab:{fontSize:"18px",border:"1px solid grey",width:"100%",padding:"10px"}},Q=(0,x.Pi)((function(){var t=(0,x.oR)(),e=(0,w.b)(),r={trade:Object.entries(e),client:Object.entries(t.client),ui:Object.entries(t.ui),portfolio:Object.entries(t.portfolio)},n=$(o().useState(!1),2),i=n[0],a=n[1],s=$(o().useState("trade"),2),c=s[0],l=s[1];o().useEffect((function(){return document.addEventListener("keyup",u,!1),function(){document.removeEventListener("keyup",u)}}));var u=function(t){t.ctrlKey&&83===t.keyCode&&a(!i)},f=K.container,p=K.tab,d=K.tabs;return o().createElement("code",{id:"state_info",style:W(W({},f),{},{display:i?"block":"none"})},o().createElement("div",{style:d},Object.keys(r).map((function(t){return o().createElement("p",{key:t,onClick:function(){return l(t)},style:W(W({},p),{},{fontWeight:t===c&&"bold"})},t)}))),r[c].sort().map((function(t){var e=$(t,2),r=e[0],n=e[1];return"root_store"!==r&&"function"!=typeof n&&o().createElement("div",{key:r},o().createElement("span",{style:K.prop_name},r,":")," ",n&&"object"===Z(n)?JSON.stringify((0,H.toJS)(n),null,1):n)})))}));Q.propTypes={entries:c().array};const X=Q;var tt=r("./src/Modules/Contract/Components/Digits/index.ts"),et=r("./src/Modules/Contract/Components/AccumulatorsStats/index.js"),rt=r("./src/Modules/SmartChart/Components/bottom-widgets.jsx"),nt=r("./src/Modules/SmartChart/Components/top-widgets.jsx"),ot=function(t){return t&&function(e){t({target:{name:"symbol",value:e}})}},it=(0,x.Pi)((function(t){var e=t.digits,r=t.tick,n=(0,x.oR)().contract_trade,i=(0,w.b)(),a=i.onChange,s=i.symbol,c=i.contract_type,l=i.last_digit,u=n.last_contract,f=u.contract_info,p=void 0===f?{}:f,d=u.digits_info,h=void 0===d?{}:d,m=u.display_status,y=u.is_digit_contract,_=u.is_ended;return o().createElement(tt.Z,{contract_info:p,digits_array:e,digits_info:h,display_status:m,is_digit_contract:y,is_ended:_,onDigitChange:a,is_trade_page:!0,tick:r,trade_type:c,selected_digit:l,underlying:s})})),at=(0,x.Pi)((function(t){var e,r=t.charts_ref,n=t.open_market,i=t.open,a=(0,x.oR)(),s=a.client,c=a.ui,l=(0,w.b)(),u=l.is_digits_widget_active,p=l.onChange,d=s.is_beta_chart,h=c.is_dark_mode_on?"dark":"light";return r&&r.chart&&(e=r.chart.yAxiswidth),o().createElement(nt.Z,{open_market:n,open:i,is_mobile:(0,f.isMobile)(),is_digits_widget_active:u,onSymbolChange:ot(p),theme:h,y_axis_width:e,is_beta_chart:d})})),st=function(t){var e=t.digits,r=t.tick,n=t.show_accumulators_stats;return o().createElement(rt.Z,{Widget:n?o().createElement(et.Z,null):o().createElement(it,{digits:e,tick:r})})},ct=a()({loader:function(){return(0,f.isMobile)()?Promise.all([r.e("src_Modules_Trading_Components_Form_TradeParams_Accumulator_accumulators-info-display_tsx-src-9fe6fd"),r.e("screen-small")]).then(r.bind(r,"./src/Modules/Trading/Components/Form/screen-small.tsx")):Promise.all([r.e("src_Modules_Trading_Components_Form_TradeParams_Accumulator_accumulators-info-display_tsx-src-9fe6fd"),r.e("screen-large")]).then(r.bind(r,"./src/Modules/Trading/Components/Form/screen-large.tsx"))},loading:function(){return null},render:function(t,e){var r=t.default;return o().createElement(r,e)}}),lt=(0,x.Pi)((function(t){var e=t.is_market_closed,r=t.is_trade_enabled,n=(0,x.oR)().common.current_language;return o().createElement(o().Fragment,{key:n},o().createElement(ct,{is_trade_enabled:r,is_market_closed:(0,f.isMobile)()?void 0:e}))}));const ut=o().memo(lt);var ft=r("./src/Modules/SmartChart/Components/all-markers.jsx"),pt=r("./src/App/Components/Elements/PositionsDrawer/helpers/positions-helper.ts"),dt=r("./src/Modules/SmartChart/index.js"),ht=r("./src/Modules/SmartChartBeta/index.js");function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function yt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==mt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===mt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return vt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var bt="increment",gt="decrement",wt="add10",xt=function(t){var e,r=t.current_spot,n=t.current_spot_time,i=t.currency,a=t.className,s=void 0===a?"sc-accumulators-profit-loss-text":a,c=t.profit,l=t.is_beta_chart,p=_t(o().useState(!1),2),d=p[0],h=p[1],m=_t(o().useState(!1),2),_=m[0],v=m[1],b=(0,f.formatMoney)(null!=i?i:"",c,!0,0,0),g=+(null===(e=o().useRef(b).current)||void 0===e?void 0:e.split(".")[1][0]),w=_t(o().useState(g),2),x=w[0],E=w[1],S=o().useRef(0),k=o().useRef(),O=o().useRef(),j=o().useRef(),P=b.split("."),L=P[0],C=+P[1][0],T=+P[1].slice(1),A=c>=0,N=c>0?"+":"",I=function(t,e,r,n){clearInterval(k.current);var o=setInterval((function(){t===bt&&S.current<n?S.current=(S.current+1)%10:t===gt&&S.current>n?S.current=Math.abs(S.current-1)%10:t===wt&&S.current<r+10?S.current+=1:(t===wt?S.current===r+10:S.current===n)&&clearInterval(o),E(S.current%10)}),e);k.current=o};o().useEffect((function(){if(c&&(h(!0),v(!0),O.current=setTimeout((function(){h(!1)}),600),j.current=setTimeout((function(){v(!1)}),300)),0!==c){t=g,e=C,r=Math.abs(e-t),S.current=t,t<e?I(bt,300/r,t,e):t>e?I(gt,300/r,t,e):I(wt,30,t,e)}var t,e,r;return function(){clearTimeout(O.current),clearTimeout(j.current),clearInterval(k.current)}}),[c,g,C]);var M=l?ht.rq:dt.KW;return o().createElement(M,{markerRef:function(t){t&&(r||t.setPosition({epoch:null,price:null}),r&&n&&t.setPosition({epoch:+n,price:+r}))},className:y()(s,A?"won":"lost"),overlap_y_axis:!1},o().createElement(u.Text,{weight:"bold",size:(0,f.isMobile)()?"s":"sm",color:A?"profit-success":"loss-danger",className:y()("".concat(s,"__profit"),yt({},"".concat(s,"__profit--fading-in"),d)),"data-testid":"dt_accumulator_profit_text"},"".concat(N).concat(L,"."),o().createElement("div",{className:_?"".concat(s,"__sliding-tenth"):""},x),"".concat(T)),o().createElement(u.Text,{size:(0,f.isMobile)()?"xxxs":"xxs",as:"div",className:"".concat(s,"__currency")},(0,f.getCurrencyDisplayCode)(i)))};const Et=o().memo(xt);function St(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return kt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ot=function(t){var e=t.alignment,r=void 0===e?"right":e,n=t.className,i=void 0===n?"sc-accumulators-profit-loss-tooltip":n,a=t.current_spot,s=t.current_spot_time,c=t.currency,l=t.exit_tick,p=t.exit_tick_time,d=t.high_barrier,m=t.is_sold,_=t.profit,b=t.should_show_profit_text,g=t.is_beta_chart,w=St(o().useState(!1),2),x=w[0],E=w[1],S=_>=0,k=o().useRef();o().useEffect((function(){return function(){clearTimeout(k.current)}}),[]),o().useEffect((function(){m&&(E(!0),k.current=O(3e3))}),[m]);var O=function(t){return setTimeout((function(){E(!1)}),t)},j=function(){clearTimeout(k.current),k.current=O(1500)},P=o().useMemo((function(){var t=["left","right"];return t.includes(r)?t.find((function(t){return t!==r})):["top","bottom"].find((function(t){return t!==r}))}),[r]);if("number"!=typeof _)return null;if(!m&&s&&d&&b)return o().createElement(Et,{currency:c,current_spot:a,current_spot_time:s,profit:_,is_beta_chart:g});var L=g?ht.rq:dt.KW;return m&&p?o().createElement(L,{markerRef:function(t){t&&(l||t.setPosition({epoch:null,price:null}),p&&l&&t.setPosition({epoch:+p,price:+l}))},className:y()(i,S?"won":"lost")},o().createElement("span",{className:"".concat(i,"__spot-circle"),onMouseEnter:function(){return E(!0)},onMouseLeave:j,onTouchStart:function(){return E(!0)},onTouchEnd:j,"data-testid":"dt_accumulator_tooltip_spot"}),o().createElement(v.Z,{in:x,timeout:{exit:500},unmountOnExit:!0,classNames:"".concat(i,"__content")},o().createElement("div",{className:y()("".concat(i,"__content"),"arrow-".concat(P))},o().createElement(u.Text,{size:(0,f.isMobile)()?"xxxxs":"xxs",className:"".concat(i,"__text")},(0,h.localize)("Total profit/loss:")),o().createElement(u.Text,{size:(0,f.isMobile)()?"xxxs":"xs",className:"".concat(i,"__text"),weight:"bold"},o().createElement(u.Money,{amount:_,currency:c,has_sign:!0,show_currency:!0}))))):null};const jt=o().memo(Ot);var Pt=r("./src/Modules/SmartChartBeta/Components/Markers/marker.jsx"),Lt=r("./src/Modules/SmartChart/Components/Markers/marker.jsx");function Ct(){return Ct=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ct.apply(this,arguments)}var Tt=function(t){var e=t.all_positions,r=t.current_spot,n=t.current_spot_time,i=t.has_crossed_accu_barriers,a=t.should_show_profit_text,s=t.symbol,c=t.is_beta_chart,l=e.filter((function(t){var e=t.contract_info;return e&&s===e.underlying&&(0,pt._M)(e,"accumulator")})),u=c?Pt.Z:Lt.Z;return o().createElement(o().Fragment,null,!!l.length&&l.map((function(t){var e=t.contract_info;return o().createElement(jt,Ct({key:e.contract_id},e,{should_show_profit_text:a,is_beta_chart:c}))})),i&&!!n&&o().createElement(u,{marker_config:{ContentComponent:"div",x:n,y:r},marker_content_props:{className:"sc-current-spot-emphasizer"}}))};const At=o().memo(Tt);var Nt=function(t){var e=t.position,r=t.updateChartType,n=t.updateGranularity;return o().createElement(dt.av,{position:e||(0,f.isMobile)()?"bottom":null},o().createElement(dt.oY,{portalNodeId:"modal_root",onChartType:r,onGranularity:n}),(0,f.isDesktop)()&&o().createElement(dt.as,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),(0,f.isDesktop)()&&o().createElement(dt.kO,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),(0,f.isDesktop)()&&o().createElement(dt.NU,{portalNodeId:"modal_root"}),(0,f.isDesktop)()&&o().createElement(dt.mB,{portalNodeId:"modal_root"}))};Nt.propTypes={position:c().string,updateChartType:c().func,updateGranularity:c().func};const It=o().memo(Nt);var Mt=function(t){var e=t.position,r=t.updateChartType,n=t.updateGranularity;return o().createElement(ht.Xt,{position:e||(0,f.isMobile)()?"bottom":null},o().createElement(ht.E_,{portalNodeId:"modal_root",onChartType:r,onGranularity:n}),(0,f.isDesktop)()&&o().createElement(ht.cY,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),(0,f.isDesktop)()&&o().createElement(ht.qN,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),(0,f.isDesktop)()&&o().createElement(ht.es,{portalNodeId:"modal_root"}),(0,f.isDesktop)()&&o().createElement(ht.ry,{portalNodeId:"modal_root"}))};Mt.propTypes={position:c().string,updateChartType:c().func,updateGranularity:c().func};const Dt=o().memo(Mt);var Rt=r("./src/Modules/Trading/Containers/smart-chart-switcher.jsx");function zt(t){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(t)}function Gt(t){return function(t){if(Array.isArray(t))return $t(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Zt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(r),!0).forEach((function(e){Ut(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ut(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==zt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===zt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vt(){return Vt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vt.apply(this,arguments)}function Ht(){Ht=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(O([])));_&&_!==e&&r.call(_,i)&&(m=_);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==zt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function qt(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Wt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){qt(i,n,o,a,s,"next",t)}function s(t){qt(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Yt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||Zt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(t,e){if(t){if("string"==typeof t)return $t(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$t(t,e):void 0}}function $t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Jt=function(t){var e=t.tick,r=t.digits,n=t.setTick,i=t.setDigits;return o().useEffect((function(){n(e)}),[e]),o().useEffect((function(){i(r)}),[r]),null},Kt=(0,x.Pi)((function(){var t=(0,x.oR)(),e=t.client,r=t.common,n=t.ui,i=(0,w.b)(),a=i.form_components,s=i.getFirstOpenMarket,c=i.has_barrier,l=i.is_accumulator,p=i.is_chart_loading,d=i.is_market_closed,h=i.is_synthetics_available,m=i.is_synthetics_trading_market_available,v=i.is_trade_enabled,b=i.is_turbos,g=i.is_vanilla,E=i.onChange,S=i.onMount,k=i.onUnmount,O=i.prepareTradeStore,j=i.setContractTypes,L=i.setIsDigitsWidgetActive,C=i.setMobileDigitView,T=i.should_show_active_symbols_loading,A=i.show_digits_stats,N=i.symbol,I=n.notification_messages_ui,M=n.has_only_forward_starting_contracts,D=n.should_show_multipliers_onboarding,R=n.is_dark_mode_on,z=e.is_eu,G=r.network_status,F=Yt(o().useState([]),2),B=F[0],U=F[1],H=Yt(o().useState({}),2),q=H[0],W=H[1],Y=Yt(o().useState(!1),2),Z=Y[0],$=Y[1],J=Yt(o().useState(!1),2),K=J[0],Q=J[1],tt=Yt(o().useState(null),2),et=tt[0],rt=tt[1],nt=Yt(o().useState(null),2),ot=nt[0],st=nt[1],ct=Yt(o().useState(0),2),lt=ct[0],ft=ct[1],pt=o().useRef(),dt=o().useMemo((function(){return Z?{category:"synthetics"}:K&&et?{category:et,subcategory:ot}:null}),[Z,K,et,ot]);o().useEffect((function(){if(S(),!h){var t=function(){var t=Wt(Ht().mark((function t(){var e,r,n,o,i;return Ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=["forex","indices","commodities"],t.next=3,s(r);case 3:if(t.t1=e=t.sent,t.t0=null!==t.t1,!t.t0){t.next=7;break}t.t0=void 0!==e;case 7:if(!t.t0){t.next=11;break}t.t2=e,t.next=12;break;case 11:t.t2={};case 12:n=t.t2,o=n.category,i=n.subcategory,o&&(rt(o),st(i));case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}return function(){return k()}}),[S,k,s,h]),o().useEffect((function(){(0,f.isMobile)()&&U([]),$(!1),Q(!1)}),[N,U,$,h]),o().useEffect((function(){var t=function(){var t=Wt(Ht().mark((function t(){return Ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j();case 2:E({target:{name:"contract_type",value:"multiplier"}});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();!D||p||!h&&d||t()}),[D,p]);var ht=o().useCallback((function(t){var e=t.digits,r=t.tick;return o().createElement(Jt,{digits:e,tick:r,setTick:W,setDigits:U})}),[]),mt=function(){var t=Wt(Ht().mark((function t(){return Ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h?($(!0),setTimeout((function(){return $(!1)}))):(Q(!0),setTimeout((function(){return Q(!1)})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),yt=o().useCallback((function(t){var e=Vt({},(function(t){if(null==t)throw new TypeError("Cannot destructure "+t)}(t),t));return o().createElement(at,Vt({open_market:dt,open:Z||K,charts_ref:pt},e))}),[dt,Z,K]),_t=(0,f.isMobile)()?"mobile-wrapper":"sidebar__container desktop-only",vt=o().useMemo((function(){return l?"295px":b?"300px":"259px"}),[b,l]);return o().createElement("div",{id:"trade_container",className:y()("trade-container",Ut({},"trade-container--".concat(l?"accumulators":"turbos"),l||b))},o().createElement(u.DesktopWrapper,null,o().createElement(P,null)),o().createElement(u.Div100vhContainer,{id:"chart_container",className:"chart-container",is_disabled:(0,f.isDesktop)(),height_offset:vt},o().createElement(I,null),o().createElement(o().Suspense,{fallback:o().createElement(_.Z,{is_dark:R,is_visible:!N||p})},o().createElement(u.DesktopWrapper,null,o().createElement("div",{className:y()("chart-container__wrapper",{"vanilla-trade-chart":g})},o().createElement(_.Z,{is_visible:p||T}),o().createElement(ee,{topWidgets:yt,charts_ref:pt,is_accumulator:l}))),o().createElement(u.MobileWrapper,null,o().createElement(_.Z,{is_visible:p||T}),o().createElement(u.SwipeableWrapper,{onChange:function(t){C(0===t),L(0===t),ft(t)},is_disabled:!A||!v||0===a.length||p||T,is_swipe_disabled:1===lt,className:y()({"vanilla-trade-chart":g})},A&&o().createElement(it,{digits:B,tick:q}),o().createElement(ee,{topWidgets:yt,charts_ref:pt,bottomWidgets:A?ht:void 0,is_accumulator:l,has_barrier:c})))),o().createElement(X,null)),o().createElement("div",{className:_t},d&&!M&&o().createElement(V,Vt({is_eu:z,is_synthetics_trading_market_available:m},z&&et,{onClick:mt,onMarketOpen:O,symbol:N})),o().createElement(ut,{is_market_closed:d,is_trade_enabled:v&&a.length>0&&"online"===G.class})))}));const Qt=Kt;var Xt=o().forwardRef((function(t,e){return o().createElement(Rt.Z,Vt({innerRef:e},t))})),te=(0,x.Pi)((function(t){var e=(0,x.oR)(),r=e.ui,n=e.client,i=e.contract_trade,a=i.markers_array,s=i.granularity,c=r.is_dark_mode_on,l=n.currency;return a.map((function(e){var r=ft.Z[e.type];return o().createElement(r,Vt({key:e.key,is_dark_theme:c,granularity:s,currency:l,config:t},e))}))})),ee=(0,x.Pi)((function(t){var e=t.is_accumulator,r=t.has_barrier,n=t.end_epoch,i=t.topWidgets,a=t.charts_ref,s=(0,x.oR)(),c=s.client,l=s.ui,u=s.common,p=s.contract_trade,d=s.portfolio,h=p.accumulator_barriers_data,m=p.accumulator_contract_barriers_data,y=p.chart_type,_=p.granularity,v=p.markers_array,b=p.has_crossed_accu_barriers,g=p.updateGranularity,E=p.updateChartType,S=d.all_positions,k=l.is_chart_layout_default,O=l.is_chart_countdown_visible,j=l.is_dark_mode_on,P=l.is_positions_drawer_on,L=u.is_socket_opened,C=u.current_language,T=c.currency,A=c.is_beta_chart,N=c.should_show_eu_content,I=(0,w.b)(),M=I.chartStateChange,D=I.is_trade_enabled,R=I.main_barrier_flattened,z=I.barriers_flattened,G=I.show_digits_stats,F=I.symbol,B=I.exportLayout,U=I.setChartStatus,V=I.chart_layout,H=I.wsForget,q=I.wsForgetStream,W=I.wsSendRequest,Y=I.wsSubscribe,Z=I.active_symbols,$=I.has_alternative_source,J=Bt(Bt({assetInformation:!1,countdown:O,isHighestLowestMarkerEnabled:!1,language:C.toLowerCase(),position:k?"bottom":"left",theme:j?"dark":"light"},e?{whitespace:190,minimumLeftBars:(0,f.isMobile)()?3:void 0}:{}),r?{whitespace:110}:{}),K=h||{},Q=K.current_spot,X=K.current_spot_time,tt=o().useCallback((function(t){var r=t.digits,n=t.tick;return o().createElement(st,{digits:r,tick:n,show_accumulators_stats:e,is_trade_page:!0})}),[e]),et=R?[R].concat(Gt(z)):z,rt=0===_?8:24;return F&&0!==Z.length?o().createElement(Xt,{ref:a,barriers:et,contracts_array:v,bottomWidgets:(e||G)&&(0,f.isDesktop)()?tt:t.bottomWidgets,crosshair:(0,f.isMobile)()?0:void 0,crosshairTooltipLeftAllow:560,showLastDigitStats:!!(0,f.isDesktop)()&&G,chartControlsWidgets:null,chartStatusListener:function(t){return U(!t)},chartType:y,initialData:{activeSymbols:JSON.parse(JSON.stringify(Z))},chartData:{activeSymbols:JSON.parse(JSON.stringify(Z))},feedCall:{activeSymbols:!1},enabledNavigationWidget:(0,f.isDesktop)(),enabledChartFooter:!1,id:"trade",isMobile:(0,f.isMobile)(),maxTick:(0,f.isMobile)()?rt:void 0,granularity:G||e?0:_,requestAPI:W,requestForget:H,requestForgetStream:q,requestSubscribe:Y,settings:J,should_show_eu_content:N,allowTickChartTypeOnly:G||e,stateChangeListener:M,symbol:F,topWidgets:D?i:null,isConnectionOpened:L,clearChart:!1,toolbarWidget:function(){return A?o().createElement(Dt,{updateChartType:E,updateGranularity:g}):o().createElement(It,{updateChartType:E,updateGranularity:g})},importedLayout:V,onExportLayout:B,shouldFetchTradingTimes:!n,hasAlternativeSource:$,getMarketsOrder:function(t){var e="synthetic_index",r=!!t.find((function(t){return t.market===e}));return t.slice().sort((function(t,e){return t.display_name<e.display_name?-1:1})).map((function(t){return t.market})).reduce((function(t,e){return-1===t.indexOf(e)&&t.push(e),t}),r?[e]:[])},should_zoom_out_on_yaxis:e,yAxisMargin:{top:(0,f.isMobile)()?76:106},isLive:!0,leftMargin:(0,f.isDesktop)()&&P?328:80,is_beta:A},!A&&o().createElement(te,null),e&&o().createElement(At,{all_positions:S,current_spot:Q,current_spot_time:X,has_crossed_accu_barriers:b,should_show_profit_text:!!m.accumulators_high_barrier&&(0,f.getDecimalPlaces)(T)<=2,symbol:F,is_beta_chart:A})):null}));const re=Qt;var ne,oe=o().lazy((function(){return(0,f.moduleLoader)((function(){return Promise.all([r.e("vendors-node_modules_binary-com_binary-document-uploader_DocumentUploader_js"),r.e("contract")]).then(r.bind(r,"./src/Modules/Contract/index.js"))}))})),ie={component:o().lazy((function(){return(0,f.moduleLoader)((function(){return Promise.resolve().then(r.bind(r,"./src/Modules/Page404/index.ts"))}))})),getTitle:function(){return(0,h.localize)("Error 404")}};const ae=function(){return ne||(ne=[{path:f.routes.contract,component:oe,getTitle:function(){return(0,h.localize)("Contract Details")},is_authenticated:!0},{path:f.routes.trade,component:re,getTitle:function(){return(0,h.localize)("Trader")},exact:!0}]).push(ie),ne};var se=["active_class","to","children"];function ce(){return ce=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ce.apply(this,arguments)}function le(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var ue=function(t){var e=t.active_class,r=void 0===e?"":e,n=t.to,i=t.children,a=le(t,se),s=function(t){return/^\//.test(t)?t:"/".concat(t||"")}(n),c=d(s,ae());if(!c)throw new Error("Route not found: ".concat(n));return n?o().createElement(p.NavLink,ce({"data-testid":"dt_binary_link",to:s,activeClassName:r||"active",exact:c.exact},a),i):o().createElement("a",ce({"data-testid":"dt_binary_link"},a),i)};ue.propTypes={active_class:c().string,children:c().oneOfType([c().object,c().array,c().string]),to:c().string};const fe=ue;var pe=r("./src/Modules/Page404/index.ts");function de(){return de=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},de.apply(this,arguments)}const he=function(t){return o().createElement(p.Route,{exact:t.exact,path:t.path,render:function(e){var r,n=null,i=(0,f.removeBranchName)(location.pathname).replace(/\/$/,""),a=function(e){var r;return""===e||(null!==(r=t.path)&&void 0!==r&&r.includes(":")?e.substring(0,e.lastIndexOf("/")+1)===t.path.substring(0,t.path.indexOf(":")):t.path===e||!(!t.routes||!t.routes.find((function(t){return e===t.path}))))}(i);if(t.component===p.Redirect){var s=t.to;if(t.path===f.routes.index)s=e.location.pathname.toLowerCase().replace(t.path,"");n=o().createElement(p.Redirect,{to:s})}else if(a&&t.is_authenticated&&!t.is_logging_in&&!t.is_logged_in)(0,f.redirectToLogin)(t.is_logged_in,(0,h.getLanguage)());else{var c=t.routes?t.routes.find((function(t){return t.default})):{},l=!(0,f.isEmptyObject)(c);n=o().createElement(o().Fragment,null,l&&i===t.path&&o().createElement(p.Redirect,{to:c.path}),a?o().createElement(t.component,de({},e,{routes:t.routes})):o().createElement(pe.default,null))}var u=(null===(r=t.getTitle)||void 0===r?void 0:r.call(t))||"";return document.title="".concat(u," | ").concat(f.default_title),(0,f.alternateLinkTagChange)(),(0,f.canonicalLinkTagChange)(),n}})};function me(){return me=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},me.apply(this,arguments)}const ye=function(t){return o().createElement(o().Suspense,{fallback:o().createElement("div",null)},o().createElement(p.Switch,null,ae().map((function(e,r){return o().createElement(he,me({key:r},e,t))}))))};var _e=function(t,e){return t.some((function(t){return!!(0,l.matchPath)(e,{path:t,exact:!0})}))},ve=function(t){var e=t.path_from,r=t.path_to,n=t.action,o=t.match_patterns,i=t.callback;"PUSH"!==n&&"POP"!==n||i(o.some((function(t){return _e(t.from,e)&&_e(t.to,r)})));return!0},be=a()({loader:function(){return r.e("error-component").then(r.bind(r,"./src/App/Components/Elements/Errors/index.ts"))},loading:u.UILoader,render:function(t,e){var r=t.default;return o().createElement(r,e)}}),ge=(0,x.Pi)((function(t){var e=t.history,r=t.passthrough,n=(0,x.oR)(),i=n.client,a=n.common,s=n.ui,c=n.portfolio,l=(0,w.b)().setSkipPrePostLifecycle,u=a.error,p=a.has_error,d=c.onUnmount,h=i.is_logged_in,m=i.is_logging_in,y=s.setPromptHandler;return o().useEffect((function(){return y&&y(!0,(function(t,r){return ve({path_from:e.location.pathname,path_to:t.pathname,match_patterns:[{from:ae().flatMap((function(t){return t.routes?t.routes.map((function(t){return t.path})):[t.path]})).filter((function(t){return t&&t!==f.routes.mt5&&t!==f.routes.dxtrade})),to:[f.routes.mt5,f.routes.dxtrade]}],action:r,callback:function(t){t&&d()}}),ve({path_from:e.location.pathname,path_to:t.pathname,match_patterns:[{from:[f.routes.contract],to:[f.routes.trade]},{from:[f.routes.trade],to:[f.routes.contract]}],action:r,callback:l})})),function(){null==y||y(!1)}}),[]),o().useEffect((function(){return function(){return d()}}),[d]),p?o().createElement(be,u):o().createElement(ye,{is_logged_in:h,is_logging_in:m,passthrough:r})}));ge.propTypes={history:c().object,passthrough:c().object};const we=(0,l.withRouter)(ge);var xe=r("../../node_modules/react-transition-group/esm/TransitionGroup.js"),Ee=r("./src/App/Components/Elements/ContentLoader/index.js"),Se=r("./src/Utils/Helpers/market-underlying.ts");const ke=function(t){var e=t.is_visible,r="won"===t.result;return o().createElement(o().Fragment,null,o().createElement(v.Z,{in:e,timeout:250,classNames:{enter:"positions-modal-card__result--enter",enterDone:"positions-modal-card__result--enter-done",exit:"positions-modal-card__result--exit"},unmountOnExit:!0},o().createElement("div",{className:"positions-modal-card__caption-wrapper","data-testid":"result_mobile"},o().createElement("span",{className:y()("positions-modal-card__caption",{"positions-modal-card__caption--won":r,"positions-modal-card__caption--lost":!r})},o().createElement(u.Icon,{icon:"IcPositionClosed",className:"positions-modal-card__icon",color:r?"green":"red"}),o().createElement("span",null,(0,f.getCardLabels)().CLOSED)))))};var Oe=(0,x.Pi)((function(t){var e,r,n=t.className,i=t.contract_info,a=t.contract_update,s=t.currency,c=t.current_tick,l=t.id,d=t.indicative,m=t.is_loading,_=t.is_sell_requested,b=t.is_unsupported,g=t.onClickSell,E=t.profit_loss,S=t.onClickCancel,k=t.result,O=t.sell_price,j=t.status,P=t.togglePositions,L=t.toggleUnsupportedContractModal,C=t.type,T=(0,x.oR)(),A=T.ui,N=T.common,I=T.contract_trade,M=(0,w.b)().active_symbols,D=N.server_time,R=I.getContractById,z=A.addToast,G=A.current_focus,F=A.is_mobile,B=A.removeToast,U=A.setCurrentFocus,V=A.should_show_cancellation_warning,H=A.toggleCancellationWarning,q=o().createElement("div",{className:"positions-modal-card__content-loader"},o().createElement(Ee.r,{speed:2})),W=(0,f.isMultiplierContract)(i.contract_type),Y=(0,f.isAccumulatorContract)(i.contract_type),Z=(0,f.isTurbosContract)(i.contract_type),$=(0,f.isVanillaContract)(i.contract_type),J=(0,f.isCryptoContract)(i.underlying),K=!W||J&&W,Q=!!(0,f.getEndTime)(i),X=E>=0?"won":"lost",tt=(0,f.getTotalProfit)(i),et=(0,f.hasContractEntered)(i)&&(0,f.isOpen)(i),rt=(0,f.getSymbolDisplayName)(M,(0,Se.cS)(i.shortcode||"").underlying),nt=o().createElement(o().Fragment,null,o().createElement("div",{className:y()("positions-modal-card__grid","positions-modal-card__grid-header")},o().createElement("div",{className:"positions-modal-card__underlying-name"},o().createElement(u.Icon,{icon:i.underlying?"IcUnderlying".concat(i.underlying):"IcUnknown",size:34}),o().createElement(u.Text,{size:"xxs",className:"positions-modal-card__symbol",weight:"bold"},i.display_name)),o().createElement("div",{className:"positions-modal-card__type"},o().createElement(u.ContractCard.ContractTypeCell,{getContractTypeDisplay:f.getContractTypeDisplay,is_high_low:(0,f.isHighLow)({shortcode:i.shortcode}),multiplier:i.multiplier,type:C})),o().createElement(v.Z,{in:et,timeout:250,classNames:{enter:"positions-modal-card__sell-button--enter",enterDone:"positions-modal-card__sell-button--enter-done",exit:"positions-modal-card__sell-button--exit"},unmountOnExit:!0},o().createElement("div",{className:"positions-modal-card__sell-button"},o().createElement(u.ContractCard.Sell,{contract_info:i,is_sell_requested:_,getCardLabels:f.getCardLabels,onClickSell:g})))),o().createElement(u.CurrencyBadge,{currency:null!==(e=null==i?void 0:i.currency)&&void 0!==e?e:""}),o().createElement("div",{className:y()("positions-modal-card__grid","positions-modal-card__grid-body")},o().createElement("div",{className:y()("positions-modal-card__grid-profit-payout")},o().createElement("div",{className:y()("positions-modal-card__profit-loss","positions-modal-card__profit-loss-label")},k?(0,h.localize)("Profit/Loss:"):(0,h.localize)("Potential profit/loss:")),o().createElement("div",{className:y()("positions-modal-card__indicative","positions-modal-card__indicative-label")},k?(0,h.localize)("Payout:"):(0,h.localize)("Indicative price:")),o().createElement("div",{className:y()("positions-modal-card__profit-loss",{"positions-modal-card__profit-loss--is-crypto":(0,f.isCryptocurrency)(s),"positions-modal-card__profit-loss--negative":E<0,"positions-modal-card__profit-loss--positive":E>0})},o().createElement(u.Money,{amount:Math.abs(E),currency:s}),o().createElement("div",{className:y()("positions-modal-card__indicative--movement",{"positions-modal-card__indicative--movement-complete":!!k})},"profit"===j&&o().createElement(u.Icon,{icon:"IcProfit"}),"loss"===j&&o().createElement(u.Icon,{icon:"IcLoss"}))),o().createElement("div",{className:"positions-modal-card__indicative"},o().createElement(u.Money,{amount:O||d,currency:s}),o().createElement("div",{className:y()("positions-modal-card__indicative--movement",{"positions-modal-card__indicative--movement-complete":!!k})},"profit"===j&&o().createElement(u.Icon,{icon:"IcProfit"}),"loss"===j&&o().createElement(u.Icon,{icon:"IcLoss"})))),o().createElement("div",{className:y()("positions-modal-card__grid-price-payout")},o().createElement("div",{className:"positions-modal-card__purchase-price"},o().createElement(u.Text,{size:"xxxs",className:"positions-modal-card__purchase-label"},(0,h.localize)("Purchase price:")),o().createElement(u.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__purchase-value"},o().createElement(u.Money,{amount:i.buy_price,currency:s}))),o().createElement("div",{className:"positions-modal-card__payout-price"},o().createElement(u.Text,{size:"xxxs",className:"positions-modal-card__payout-label"},(0,h.localize)("Potential payout:")),o().createElement(u.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__payout-value"},i.payout?o().createElement(u.Money,{amount:i.payout,currency:s}):o().createElement("strong",null,"-i")))),k||i.is_sold?o().createElement(ke,{is_visible:!!i.is_sold,result:k||X}):o().createElement(u.ProgressSliderMobile,{className:"positions-modal-card__progress",current_tick:c,getCardLabels:f.getCardLabels,is_loading:m,start_time:i.date_start,expiry_time:i.date_expiry,server_time:D,ticks_count:i.tick_count}))),ot=o().createElement(o().Fragment,null,o().createElement(p.NavLink,{className:y()("dc-contract-card",{"dc-contract-card--green":E>0&&!k,"dc-contract-card--red":E<0&&!k}),to:{pathname:"/contract/".concat(i.contract_id)}},o().createElement(u.ContractCard.Header,{contract_info:i,display_name:rt,getCardLabels:f.getCardLabels,getContractTypeDisplay:f.getContractTypeDisplay,has_progress_slider:!F&&K,is_mobile:F,is_sell_requested:_,onClickSell:g,server_time:D})),o().createElement(u.CurrencyBadge,{currency:null!==(r=null==i?void 0:i.currency)&&void 0!==r?r:""}),o().createElement("div",{className:y()("positions-modal-card__grid","positions-modal-card__grid-body")},o().createElement("div",{className:y()("positions-modal-card__grid-profit-payout")},o().createElement("div",{className:"positions-modal-card__purchase-price"},o().createElement(u.Text,{size:"xxxs",className:"positions-modal-card__purchase-label"},(0,h.localize)("Buy price:")),o().createElement(u.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__purchase-value"},o().createElement(u.Money,{amount:i.buy_price,currency:s}))),o().createElement("div",{className:"positions-modal-card__payout-price"},o().createElement(u.Text,{size:"xxxs",className:"positions-modal-card__payout-label"},(0,h.localize)("Contract value:")),o().createElement(u.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__payout-value"},o().createElement(u.Money,{amount:i.bid_price,currency:s})))),o().createElement("div",{className:y()("positions-modal-card__grid-price-payout")},o().createElement("div",{className:"positions-modal-card__purchase-price"},o().createElement(u.Text,{size:"xxxs",className:"positions-modal-card__purchase-label"},(0,h.localize)("Entry spot:")),o().createElement(u.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__purchase-value"},o().createElement(u.Money,{amount:Number(i.entry_spot),currency:s}))),o().createElement("div",{className:"positions-modal-card__payout-price"},o().createElement(u.Text,{size:"xxxs",className:"positions-modal-card__payout-label"},(0,h.localize)("Strike:")),o().createElement(u.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__payout-value"},o().createElement(u.Money,{amount:Number(i.barrier),currency:s})))),k||i.is_sold?o().createElement(ke,{is_visible:!!i.is_sold,result:k||X}):o().createElement(u.ProgressSliderMobile,{className:"positions-modal-card__progress",current_tick:c,getCardLabels:f.getCardLabels,is_loading:m,start_time:i.date_start,expiry_time:i.date_expiry,server_time:D,ticks_count:i.tick_count})),o().createElement("div",{className:y()("positions-modal-card__item",n)},o().createElement("div",{className:"dc-contract-card-item__header"},(0,f.getCardLabels)().TOTAL_PROFIT_LOSS),o().createElement("div",{className:y()("dc-contract-card-item__body",{"dc-contract-card-item__body--crypto":(0,f.isCryptocurrency)(s),"dc-contract-card-item__body--loss":+tt<0,"dc-contract-card-item__body--profit":+tt>0})},o().createElement(u.Money,{amount:tt,currency:s}),o().createElement("div",{className:y()("dc-contract-card__indicative--movement",{"dc-contract-card__indicative--movement-complete":!!i.is_sold})},"profit"===j&&o().createElement(u.Icon,{icon:"IcProfit"}),"loss"===j&&o().createElement(u.Icon,{icon:"IcLoss"})))),o().createElement(u.ContractCard.Footer,{contract_info:i,getCardLabels:f.getCardLabels,is_multiplier:W,is_sell_requested:_,onClickCancel:S,onClickSell:g,server_time:D})),it=o().createElement(u.ContractCard.Header,{contract_info:i,display_name:rt,getCardLabels:f.getCardLabels,getContractTypeDisplay:f.getContractTypeDisplay,has_progress_slider:!F&&K||Y,is_mobile:F,is_sell_requested:_,onClickSell:g,server_time:D}),at=o().createElement(u.ContractCard.Body,{addToast:z,contract_info:i,contract_update:a,currency:s,current_focus:G,getCardLabels:f.getCardLabels,getContractById:R,is_accumulator:Y,is_mobile:F,is_multiplier:W,is_positions:!0,is_sold:!!i.is_sold,is_turbos:Z,has_progress_slider:F&&K&&!Q,removeToast:B,server_time:D,setCurrentFocus:U,should_show_cancellation_warning:V,status:j,toggleCancellationWarning:H}),st=o().createElement(u.ContractCard.Footer,{contract_info:i,getCardLabels:f.getCardLabels,is_multiplier:W,is_sell_requested:_,onClickCancel:S,onClickSell:g,server_time:D}),ct=o().createElement(o().Fragment,null,o().createElement(u.ContractCard,{contract_info:i,getCardLabels:f.getCardLabels,is_multiplier:W,profit_loss:E,should_show_result_overlay:!1},it,at,st)),lt=W||Y||Z?ct:$?ot:nt;return o().createElement("div",{id:"dt_drawer_card_".concat(l),className:y()("positions-modal-card__wrapper",n)},b?o().createElement("div",{className:y()("positions-modal-card"),onClick:function(){return L(!0)}},i.underlying?lt:q):o().createElement(o().Fragment,null,o().createElement(fe,{onClick:P,className:y()("positions-modal-card",{"positions-modal-card--multiplier":W}),to:(0,f.getContractPath)(l)},i.underlying?lt:q)))}));const je=Oe;const Pe=function(t){var e=t.positions_count,r=t.is_open,n=t.togglePositions,i=y()("positions-toggle",{"positions-toggle--active":r,"positions-toggle--has-count":e>0});return o().createElement("a",{id:"dt_positions_toggle","data-testid":"dt_positions_toggle",className:i,onClick:n,"data-count":e},o().createElement(u.Icon,{data_testid:"dt_icon",icon:"IcPortfolio",className:"positions-toggle__icon"}))};function Le(){return Le=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Le.apply(this,arguments)}function Ce(t){return function(t){if(Array.isArray(t))return Ne(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ae(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||Ae(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(t,e){if(t){if("string"==typeof t)return Ne(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(t,e):void 0}}function Ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const Ie=(0,x.Pi)((function(t){var e=t.active_positions_count,r=t.currency,n=t.error,i=t.filtered_positions,a=t.is_empty,s=t.onClickSell,c=t.onClickCancel,l=(0,x.oR)().ui,d=l.togglePositionsDrawer,m=l.toggleUnsupportedContractModal,y=l.is_positions_drawer_on,_=Te(o().useState([]),2),g=_[0],w=_[1],E=i.filter((function(t){return g.every((function(e){return e!==t.contract_info.contract_id}))})).slice(0,5),S=E.filter((function(t){var e;return null===(e=t.contract_info)||void 0===e?void 0:e.is_sold})).map((function(t){return t.contract_info.contract_id})),k=function(){w(Ce(new Set([].concat(Ce(g),Ce(S))))),d()},O=o().createElement(o().Fragment,null,o().createElement(xe.Z,{component:"div"},E.map((function(t){return o().createElement(v.Z,{appear:!0,key:t.id,in:!0,timeout:150,classNames:{appear:"dc-contract-card__wrapper--enter",enter:"dc-contract-card__wrapper--enter",enterDone:"dc-contract-card__wrapper--enter-done",exit:"dc-contract-card__wrapper--exit"},unmountOnExit:!0},o().createElement(je,Le({onClickSell:s,onClickCancel:c,key:t.id,currency:r,toggleUnsupportedContractModal:m,togglePositions:d},t)))}))));return o().createElement(o().Fragment,null,o().createElement(Pe,{is_open:y,togglePositions:d,positions_count:e}),o().createElement(u.Modal,{is_open:y,toggleModal:k,id:"dt_mobile_positions",is_vertical_top:!0,has_close_icon:!0,width:"calc(100vw - 32px)"},o().createElement(u.Div100vhContainer,{className:"positions-modal",height_offset:"48px"},o().createElement("div",{className:"positions-modal__header"},o().createElement(u.Text,{size:"xxxs",className:"positions-modal__title"},o().createElement(u.Icon,{icon:"IcPortfolio",className:"positions-modal__title-icon"}),(0,h.localize)("Recent positions")),o().createElement("div",{className:"positions-modal__close-btn",onClick:k},o().createElement(u.Icon,{data_testid:"dt_modal_header_close",icon:"IcMinusBold"}))),o().createElement("div",{className:"positions-modal__body"},a||!E.length||n?o().createElement(b,{error:n}):O),o().createElement("div",{className:"positions-modal__footer"},o().createElement(p.NavLink,{onClick:k,className:"dc-btn dc-btn--secondary dc-btn__large positions-modal__footer-btn",to:f.routes.positions},o().createElement(u.Text,{size:"xs",weight:"bold"},(0,h.localize)("Go to Reports")))))))}));const Me=(0,x.Pi)((function(){var t=(0,x.oR)(),e=t.portfolio,r=t.client,n=(0,w.b)(),i=n.symbol,a=n.contract_type,s=r.currency,c=e.active_positions_count,l=e.all_positions,u=e.error,p=e.onClickSell,d=e.onClickCancel,h=l.filter((function(t){return t.contract_info&&i===t.contract_info.underlying&&((0,f.isTurbosContract)(a)||(0,f.isVanillaContract)(a)?(0,g._M)(t.contract_info,(0,f.isTurbosContract)(a)?f.TURBOS.SHORT:f.VANILLALONG.CALL)||(0,g._M)(t.contract_info,(0,f.isTurbosContract)(a)?f.TURBOS.LONG:f.VANILLALONG.PUT):(0,g._M)(t.contract_info,a))}));return o().createElement(Ie,{active_positions_count:c,currency:s,error:u,filtered_positions:h,is_empty:!h.length,onClickSell:p,onClickCancel:d})}));const De=function(t){var e=t.children,r=t.store;return o().createElement(x.g3,{store:r},o().createElement(w.z,null,e))};function Re(t){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Re(t)}function ze(){ze=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(O([])));_&&_!==e&&r.call(_,i)&&(m=_);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Re(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ge(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const Fe=(0,x.Pi)((function(t){var e=t.store,r=(0,x.oR)(),n=r.client,i=r.modules,a=r.ui,s=r.portfolio,c=a.populateHeaderExtensions,l=s.onMount,p=n.is_logged_in,d=n.is_populating_account_list,h=i.cashier.general_store,m=h.onMountCommon,y=h.setAccountSwitchListener,_=location.pathname!==f.routes.mt5,v=p&&_,b=o().useCallback((function(){var t=v?o().createElement(u.MobileWrapper,null,o().createElement(De,{store:e},o().createElement(Me,null))):null;c(t)}),[c,e,_,d]);return o().useEffect((function(){var t=function(){var t,e=(t=ze().mark((function t(){return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,f.isMobile)()||!_){t.next=9;break}return t.next=3,(0,H.when)((function(){return!d}));case 3:if(!p){t.next=9;break}return t.next=6,f.WS.wait("authorize");case 6:l(),m(!0),y();case 9:b();case 10:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ge(i,n,o,a,s,"next",t)}function s(t){Ge(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return t().catch((function(){})),function(){return c(null)}}),[m,l,b,c,y,e,_]),o().useEffect((function(){b()})),null}));var Be=(0,x.Pi)((function(t){var e=t.location,r=(0,x.oR)(),n=r.client,i=r.portfolio,a=r.ui,s=n.is_logged_in,c=i.active_positions_count,l=a.is_positions_drawer_on,u=a.populateFooterExtensions,p=a.togglePositionsDrawer;o().useEffect((function(){return h()})),o().useEffect((function(){return function(){return u([])}}),[]);var d=function(){return o().createElement(Pe,{is_open:l,togglePositions:p,positions_count:c})},h=function(){var t=e.pathname===f.routes.trade;u(s&&t?[{position:"left",Component:d}]:[])};return null}));const Ue=(0,p.withRouter)(Be);var Ve=a()({loader:function(){return r.e("settings-chart").then(r.bind(r,"./src/App/Containers/SettingsModal/settings-chart.jsx"))},loading:function(){return o().createElement(u.UILoader,null)}});const He=(0,x.Pi)((function(t){var e=t.store,r=(0,x.oR)().ui.populateSettingsExtensions,n=function(){var t=[{icon:"IcChart",label:(0,h.localize)("Charts"),value:function(t){return function(t,e){return o().createElement(De,{store:e},o().createElement(Ve,t))}(t,e)}}];r(t)};return o().useEffect((function(){return function(){return r(null)}}),[r]),o().useEffect((function(){return n()})),null}));var qe=r("./src/Modules/Trading/Containers/toast-popup.tsx"),We=r("./src/Stores/Modules/Trading/Helpers/contract-type.ts");function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function Ze(){Ze=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(O([])));_&&_!==e&&r.call(_,i)&&(m=_);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Ye(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function $e(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var Je=function(){var t,e=(t=Ze().mark((function t(e){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,We.R.buildContractTypesConfig(e);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){$e(i,n,o,a,s,"next",t)}function s(t){$e(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),Ke=r("../../node_modules/@deriv/analytics/lib/index.js"),Qe=r("./src/Stores/Modules/Trading/Helpers/start-date.ts");function Xe(t){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xe(t)}function tr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return er(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Xe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Xe(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var or=function(){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(r),!0).forEach((function(e){nr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({amount:{rules:[["req",{message:(0,h.localize)("Amount is a required field.")}],["number",{min:0,type:"float"}]]},barrier_1:{rules:[["req",{condition:function(t){return!!t.barrier_count&&t.form_components.indexOf("barrier")>-1},message:(0,h.localize)("Barrier is a required field.")}],["barrier",{condition:function(t){return!!t.barrier_count}}],["custom",{func:function(t,e,r,n){return!(Number(null==r?void 0:r.barrier_count)>1)||+t>Number(null==n?void 0:n.barrier_2)},message:(0,h.localize)("Higher barrier must be higher than lower barrier.")}],["custom",{func:function(t,e,r,n){var o,i,a;return!/^[+-]/.test(null!==(o=null==n?void 0:n.barrier_1)&&void 0!==o?o:"")||(i=!(null==r||!r.is_vanilla),a=Number(null==n?void 0:n.barrier_1),i||0!==a)},message:(0,h.localize)("Barrier cannot be zero.")}]],trigger:"barrier_2"},barrier_2:{rules:[["req",{condition:function(t){return t.barrier_count>1&&t.form_components.indexOf("barrier")>-1},message:(0,h.localize)("Barrier is a required field.")}],["barrier",{condition:function(t){return!!t.barrier_count}}],["custom",{func:function(t,e,r,n){var o,i;return/^[+-]/g.test(null!==(o=null==n?void 0:n.barrier_1)&&void 0!==o?o:"")&&/^[+-]/g.test(t)||/^(?![+-])/g.test(null!==(i=null==n?void 0:n.barrier_1)&&void 0!==i?i:"")&&/^(?![+-])/g.test(t)},message:(0,h.localize)("Both barriers should be relative or absolute")}],["custom",{func:function(t,e,r,n){return Number(null==n?void 0:n.barrier_1)>+t},message:(0,h.localize)("Lower barrier must be lower than higher barrier.")}]],trigger:"barrier_1"},duration:{rules:[["req",{message:(0,h.localize)("Duration is a required field.")}]]},start_date:{trigger:"start_time"},expiry_date:{trigger:"expiry_time"},start_time:{rules:[["custom",{func:function(t,e,r){return"spot"===(null==r?void 0:r.contract_start_type)||(0,f.isTimeValid)(null!=t?t:"")},message:(0,h.localize)('Please enter the start time in the format "HH:MM".')}],["custom",{func:function(t,e,r){return"spot"===(null==r?void 0:r.contract_start_type)||(0,f.isHourValid)(null!=t?t:"")},message:(0,h.localize)("Hour must be between 0 and 23.")}],["custom",{func:function(t,e,r){return"spot"===(null==r?void 0:r.contract_start_type)||(0,f.isMinuteValid)(null!=t?t:"")},message:(0,h.localize)("Minute must be between 0 and 59.")}],["custom",{func:function(t,e,r){var n;if("spot"===(null==r?void 0:r.contract_start_type))return!0;if(!(0,f.isTimeValid)(null!=t?t:""))return!1;var o=(0,f.toMoment)(null==r?void 0:r.start_date),i=o.clone(),a=tr(null!==(n=null==t?void 0:t.split(":"))&&void 0!==n?n:[],2),s=a[0],c=a[1];return(0,Qe.Y)(null==r?void 0:r.sessions,i.hour(+s).minute(+c),o)},message:(0,h.localize)("Start time cannot be in the past.")}]]},expiry_time:{rules:[["custom",{func:function(t,e,r){return"spot"===(null==r?void 0:r.contract_start_type)||(0,f.isTimeValid)(null!=t?t:"")},message:(0,h.localize)('Please enter the start time in the format "HH:MM".')}],["custom",{func:function(t,e,r){return"spot"===(null==r?void 0:r.contract_start_type)||(0,f.isHourValid)(null!=t?t:"")},message:(0,h.localize)("Hour must be between 0 and 23.")}],["custom",{func:function(t,e,r){return"spot"===(null==r?void 0:r.contract_start_type)||(0,f.isMinuteValid)(null!=t?t:"")},message:(0,h.localize)("Minute must be between 0 and 59.")}],["custom",{func:function(t,e,r){var n;if("spot"===(null==r?void 0:r.contract_start_type))return!0;if(!(0,f.isTimeValid)(null!=t?t:""))return!1;var o=(0,f.toMoment)(null==r?void 0:r.start_date),i=o.clone(),a=tr(null!==(n=null==t?void 0:t.split(":"))&&void 0!==n?n:[],2),s=a[0],c=a[1];return(0,Qe.Y)(null==r?void 0:r.sessions,i.hour(+s).minute(+c),o)},message:(0,h.localize)("Expiry time cannot be in the past.")}]]}},ir())},ir=function(){return{stop_loss:{rules:[["req",{condition:function(t){return t.has_stop_loss&&!t.stop_loss},message:(0,h.localize)("Please enter a stop loss amount.")}]]},take_profit:{rules:[["req",{condition:function(t){return t.has_take_profit&&!t.take_profit},message:(0,h.localize)("Please enter a take profit amount.")}]]}}},ar=r("./src/Modules/Trading/Helpers/digits.ts"),sr=r("./src/_common/base/server_time.js"),cr=r.n(sr);function lr(t){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr(t)}function ur(){ur=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(O([])));_&&_!==e&&r.call(_,i)&&(m=_);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==lr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function fr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fr(Object(r),!0).forEach((function(e){dr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function dr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==lr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===lr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hr(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var mr=function(){var t,e=(t=ur().mark((function t(e,r,n){return ur().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.WS.buy(pr({proposal_id:e,price:r},n&&{passthrough:n})));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){hr(i,n,o,a,s,"next",t)}function s(t){hr(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}(),yr=r("./src/Modules/Trading/Helpers/contract-type.tsx");function _r(t){return function(t){if(Array.isArray(t))return vr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return vr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var br=function(t){var e=t.contract_types_list,r=t.contract_type;return We.R.getContractType(e,r)},gr=function(t){return We.R.getContractValues(t)};function wr(t){return wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wr(t)}function xr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Er(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Er(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Er(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Sr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function kr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sr(Object(r),!0).forEach((function(e){Or(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Or(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==wr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==wr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===wr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var jr=function(t){var e=(0,f.getExpiryType)(t);return kr({contract_expiry_type:e},t.contract_expiry_type!==e&&We.R.getBarriers(t.contract_type,e))},Pr=function(t){var e=(0,f.getExpiryType)(t),r=t.duration,n=t.duration_min_max,o=t.duration_unit;return kr({},Lr({contract_expiry_type:e,duration:r,duration_min_max:n,duration_unit:o}))},Lr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.contract_expiry_type,r=t.duration,n=t.duration_min_max,o=t.duration_unit,i=xr((0,f.getDurationMinMaxValues)(null!=n?n:{},null!=e?e:"",null!=o?o:""),2),a=i[0],s=i[1];return r&&a&&r<a?{duration:a}:r&&s&&r>s?{duration:s}:{}};function Cr(t){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cr(t)}function Tr(){Tr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(O([])));_&&_!==e&&r.call(_,i)&&(m=_);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Cr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ar(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Nr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ar(Object(r),!0).forEach((function(e){Ir(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ir(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Cr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Cr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Cr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mr(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Dr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Mr(i,n,o,a,s,"next",t)}function s(t){Mr(i,n,o,a,s,"throw",t)}a(void 0)}))}}var Rr=function(){var t=Dr(Tr().mark((function t(e){var r,n,o,i,a,s,c,l,u,f,p,d,h,m,y,_,v,b;return Tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.contract_type,o=e.duration_unit,i=e.start_date,a=null===(r=e.root_store)||void 0===r?void 0:r.common.server_time,s=e.start_time,c=e.expiry_type,s=s||(null==a?void 0:a.clone().add(6,"minute").format("HH:mm")),l=We.R.getStartType(i),u=l.contract_start_type,f=We.R.getSessions(n,i),p=f.sessions,d=We.R.getStartTime(p,i,s),h=We.R.getDurationUnitsList(n,u),m=h.duration_units_list,y=We.R.getDurationUnit(o,n,u),_=We.R.getExpiryType(m,c),c=_.expiry_type,v=We.R.getExpiryDate(m,e.expiry_date,c,i),b=We.R.getDurationMinMax(n,u),t.abrupt("return",Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr({},l),h),b),y),f),d),v),_));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),zr=function(){var t=Dr(Tr().mark((function t(e){var r,n,o,i,a,s,c,l,u,f,p,d;return Tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.start_time,n=e.expiry_date,o=e.expiry_type,i=e.expiry_time,a=e.start_date,s=e.symbol,c=e.sessions,t.next=3,We.R.getTradingTimes(n,s);case 3:return l=t.sent,u={market_open_times:l.open},f={market_close_times:l.close},p=f.market_close_times,d=We.R.getExpiryTime(n,i,o,p,c,a,r),t.abrupt("return",Nr(Nr(Nr({},d),u),f));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function Gr(t){return Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gr(t)}function Fr(t){return function(t){if(Array.isArray(t))return Br(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Br(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Br(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ur(){Ur=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(O([])));_&&_!==e&&r.call(_,i)&&(m=_);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Gr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Vr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Hr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vr(Object(r),!0).forEach((function(e){qr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Gr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Gr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wr(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Yr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Wr(i,n,o,a,s,"next",t)}function s(t){Wr(i,n,o,a,s,"throw",t)}a(void 0)}))}}var Zr=function(){var t=Yr(Ur().mark((function t(e,r){var n,o;return Ur().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getSnapshot(),o=0;case 2:if(!(o<r.length)){t.next=12;break}return t.t0=Object,t.t1=n,t.next=7,r[o](n);case 7:t.t2=t.sent,t.t0.assign.call(t.t0,t.t1,t.t2);case 9:o++,t.next=2;break;case 12:e.updateStore(Hr({},n));case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),$r=function(){var t=Yr(Ur().mark((function t(e,r){var n,o;return Ur().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Jr(e,r),t.next=3,Zr(e,n);case 3:return o=Kr(),t.next=6,Zr(e,o);case 6:e.updateStore({is_trade_enabled:!0});case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Jr=function(t,e){var r=Object.keys(e).filter((function(t){return/\b(symbol|contract_type|is_equal)\b/.test(t)}));return[We.R.getContractCategories,br].concat(Fr(r.length>0||!t.contract_type?[gr]:[]),[Rr,jr],Fr(r.length||!t.contract_type?[Pr]:[]))},Kr=function(){return[zr]},Qr=r("./src/Stores/Modules/Trading/Helpers/proposal.ts"),Xr=function(t){switch(t){case"TURBOSSHORT":return f.BARRIER_COLORS.RED;case"TURBOSLONG":return f.BARRIER_COLORS.GREEN;default:return f.BARRIER_COLORS.BLUE}};function tn(t){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tn(t)}function en(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==tn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===tn(i)?i:String(i)),n)}var o,i}const rn=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.input=void 0,this.rules=void 0,this.store=void 0,this.errors=void 0,this.error_count=void 0,this.input=e,this.rules=r,this.store=n,this.errors=new f.Errors,this.error_count=0}var e,r,n;return e=t,n=[{key:"getRuleObject",value:function(t){var e="string"==typeof t,r=e?t:t[0],n=e?{}:t[1]||{};return{name:r,options:n,validator:"custom"===r?n.func:(0,f.getPreBuildDVRs)()[r].func}}}],(r=[{key:"addFailure",value:function(t,e,r){var n,o=r||e.options.message||(0,f.getPreBuildDVRs)()[e.name].message();if("length"===e.name)o=(0,f.template)(o,[e.options.min===e.options.max?(null===(n=e.options.min)||void 0===n?void 0:n.toString())||"":"".concat(e.options.min,"-").concat(e.options.max)]);else if("min"===e.name){var i;o=(0,f.template)(o,[(null===(i=e.options.min)||void 0===i?void 0:i.toString())||""])}else"not_equal"===e.name&&(o=(0,f.template)(o,[e.options.name1||"",e.options.name2||""]));this.errors.add(t,o),this.error_count++}},{key:"check",value:function(){var e=this;return Object.keys(this.input).forEach((function(r){Object.prototype.hasOwnProperty.call(e.rules,r)&&e.rules[r].forEach((function(n){var o=t.getRuleObject(n);if((o.validator||"function"==typeof o.validator)&&(!o.options.condition||o.options.condition(e.store))&&(""!==e.input[r]||"req"===o.name)){var i,a;if("number"===o.name){var s=o.validator(e.input[r],o.options,e.store,e.input);i=s.is_ok,a=s.message}else i=o.validator(e.input[r],o.options,e.store,e.input);i||e.addFailure(r,o,a)}}))})),!this.error_count}},{key:"isPassed",value:function(){return this.check()}}])&&en(e.prototype,r),n&&en(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nn(t){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nn(t)}function on(){on=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(O([])));_&&_!==e&&r.call(_,i)&&(m=_);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==nn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function an(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function sn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){an(i,n,o,a,s,"next",t)}function s(t){an(i,n,o,a,s,"throw",t)}a(void 0)}))}}function cn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ln(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?cn(Object(r),!0).forEach((function(e){un(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function un(t,e,r){return(e=pn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pn(n.key),n)}}function pn(t){var e=function(t,e){if("object"!==nn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nn(e)?e:String(e)}var dn=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clientInitDisposer=null,this.client_init_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.local_storage_properties=void 0,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.partial_fetch_time=0,this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,this.root_store=void 0,this.session_storage_properties=void 0,this.store_name="",this.switchAccountDisposer=null,this.switch_account_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.validation_errors={},this.validation_rules={},(0,H.makeObservable)(this,{validation_errors:H.observable,validation_rules:H.observable,partial_fetch_time:H.observable,retrieveFromStorage:H.action,setValidationErrorMessages:H.action,setValidationRules:H.action,addRule:H.action,validateProperty:H.action,validateAllProperties:H.action,onSwitchAccount:H.action.bound,onPreSwitchAccount:H.action.bound,onLogout:H.action.bound,onClientInit:H.action.bound,onNetworkStatusChange:H.action.bound,onThemeChange:H.action.bound,onRealAccountSignupEnd:H.action.bound,disposePreSwitchAccount:H.action.bound,disposeSwitchAccount:H.action.bound,disposeLogout:H.action.bound,disposeClientInit:H.action.bound,disposeNetworkStatusChange:H.action.bound,disposeThemeChange:H.action.bound,disposeRealAccountSignupEnd:H.action.bound,onUnmount:H.action.bound,assertHasValidCache:H.action.bound});var n=r.root_store,o=r.local_storage_properties,i=r.session_storage_properties,a=r.validation_rules,s=r.store_name;if(Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0}),(null==o?void 0:o.length)||(null==i?void 0:i.length)){if(!s)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:s,enumerable:!1,writable:!1})}this.root_store=n,this.local_storage_properties=o||[],this.session_storage_properties=i||[],setTimeout((function(){e.setValidationRules(a),e.setupReactionForLocalStorage(),e.setupReactionForSessionStorage(),e.retrieveFromStorage()}),0)}var e,r,n;return e=t,r=[{key:"getSnapshot",value:function(t){var e=(0,H.toJS)(this);return(0,f.isEmptyObject)(this.root_store)||(e.root_store=this.root_store),null!=t&&t.length&&(e=t.reduce((function(t,r){return Object.assign(t,un({},r,e[r]))}),{})),e}},{key:"setupReactionForLocalStorage",value:function(){var e=this;this.local_storage_properties.length&&(0,H.reaction)((function(){return e.local_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.local_storage_properties,t.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var e=this;this.session_storage_properties.length&&(0,H.reaction)((function(){return e.session_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.session_storage_properties,t.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Symbol(""),n=JSON.stringify(this.getSnapshot(e),(function(t,e){if(null!==e)return e}));r===t.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,n):r===t.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,n)}},{key:"retrieveFromStorage",value:function(){var t=this,e=JSON.parse(String(localStorage.getItem(this.store_name))),r=JSON.parse(String(sessionStorage.getItem(this.store_name))),n=ln(ln({},e),r);Object.keys(n).forEach((function(e){return t[e]=n[e]}))}},{key:"setValidationErrorMessages",value:function(t,e){var r=this;this.validation_errors[t]&&!r.validation_errors[t].filter((function(t){return!e.includes(t)})).concat(e.filter((function(e){return!r.validation_errors[t].includes(e)}))).length||(this.validation_errors[t]=e)}},{key:"setValidationRules",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((function(r){t.addRule(r,e[r])}))}},{key:"addRule",value:function(t,e){var r=this;this.validation_rules[t]=e,(0,H.intercept)(this,t,(function(e){return r.validateProperty(t,e.newValue),e}))}},{key:"validateProperty",value:function(t,e){var r,n=this,o=null!==(r=this.validation_rules[t])&&void 0!==r?r:{},i="trigger"in o?o.trigger:void 0,a=un({},t,null!=e?e:this[t]),s=un({},t,"rules"in o?o.rules:[]);if(i&&Object.hasOwnProperty.call(this,i)){var c=this.validation_rules[i];a[i]=this[i],s[i]="rules"in c?c.rules:[]}var l=new rn(a,s,this);l.isPassed(),Object.keys(a).forEach((function(t){n.setValidationErrorMessages(t,l.errors.get(t))}))}},{key:"validateAllProperties",value:function(){var t=this,e=Object.keys(this.validation_rules),r=Object.keys(this.validation_errors);e.forEach((function(e){t.validateProperty(e,t[e])})),r.forEach((function(r){e.includes(r)||delete t.validation_errors[r]}))}},{key:"onSwitchAccount",value:function(t){var e=this;t&&(this.switch_account_listener=t,this.switchAccountDisposer=(0,H.when)((function(){return!!e.root_store.client.switch_broadcast}),(function(){try{var t,r=null===(t=e.switch_account_listener)||void 0===t?void 0:t.call(e);if(null==r||!r.then||"function"!=typeof r.then)throw new Error("Switching account listeners are required to return a promise.");r.then((function(){e.root_store.client.switchEndSignal(),e.onSwitchAccount(e.switch_account_listener)}))}catch(t){(0,f.isProduction)()||console.error(t)}})))}},{key:"onPreSwitchAccount",value:function(t){var e=this;t&&(this.pre_switch_account_listener=t,this.preSwitchAccountDisposer=(0,H.when)((function(){return!!e.root_store.client.pre_switch_broadcast}),(function(){try{var t,r=null===(t=e.pre_switch_account_listener)||void 0===t?void 0:t.call(e);if(null==r||!r.then||"function"!=typeof r.then)throw new Error("Pre-switch account listeners are required to return a promise.");r.then((function(){e.root_store.client.setPreSwitchAccount(!1),e.onPreSwitchAccount(e.pre_switch_account_listener)}))}catch(t){(0,f.isProduction)()||console.error(t)}})))}},{key:"onLogout",value:function(t){var e=this;this.logoutDisposer=(0,H.when)((function(){return!!e.root_store.client.has_logged_out}),sn(on().mark((function t(){var r,n;return on().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null==(n=null===(r=e.logout_listener)||void 0===r?void 0:r.call(e))||!n.then||"function"!=typeof n.then){t.next=6;break}n.then((function(){e.root_store.client.setLogout(!1),e.onLogout(e.logout_listener)})),t.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,f.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.logout_listener=t}},{key:"onClientInit",value:function(t){var e=this;this.clientInitDisposer=(0,H.when)((function(){return!!e.root_store.client.initialized_broadcast}),sn(on().mark((function t(){var r,n;return on().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null==(n=null===(r=e.client_init_listener)||void 0===r?void 0:r.call(e))||!n.then||"function"!=typeof n.then){t.next=6;break}n.then((function(){e.root_store.client.setInitialized(!1),e.onClientInit(e.client_init_listener)})),t.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,f.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.client_init_listener=t}},{key:"onNetworkStatusChange",value:function(t){var e=this;this.networkStatusChangeDisposer=(0,H.reaction)((function(){return e.root_store.common.is_network_online}),(function(t){try{var r;null===(r=e.network_status_change_listener)||void 0===r||r.call(e,t)}catch(t){(0,f.isProduction)()||console.error(t)}})),this.network_status_change_listener=t}},{key:"onThemeChange",value:function(t){var e=this;this.themeChangeDisposer=(0,H.reaction)((function(){return e.root_store.ui.is_dark_mode_on}),(function(t){try{var r;null===(r=e.theme_change_listener)||void 0===r||r.call(e,t)}catch(t){(0,f.isProduction)()||console.error(t)}})),this.theme_change_listener=t}},{key:"onRealAccountSignupEnd",value:function(t){var e=this;this.realAccountSignupEndedDisposer=(0,H.when)((function(){return!!e.root_store.ui.has_real_account_signup_ended}),(function(){try{var t,r=null===(t=e.real_account_signup_ended_listener)||void 0===t?void 0:t.call(e);if(null==r||!r.then||"function"!=typeof r.then)throw new Error("Real account signup listeners are required to return a promise.");r.then((function(){e.root_store.ui.setRealAccountSignupEnd(!1),e.onRealAccountSignupEnd(e.real_account_signup_ended_listener)}))}catch(t){(0,f.isProduction)()||console.error(t)}})),this.real_account_signup_ended_listener=t}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(t){if(this.root_store.client.loginid!==t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach((function(t){return t()})),this.partial_fetch_time=0}}}],r&&fn(e.prototype,r),n&&fn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();dn.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")});var hn=function(t,e){var r=t.findIndex((function(t){return t.key===e}));r>-1&&t.splice(r,1)};function mn(t){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(t)}function yn(t){return function(t){if(Array.isArray(t))return _n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==mn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===mn(i)?i:String(i)),n)}var o,i}var bn=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.color,a=o.line_style,s=o.not_draggable;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color=void 0,this.lineStyle=void 0,this.shade=void 0,this.shadeColor=void 0,this.high=void 0,this.low=void 0,this.onChange=void 0,this.relative=void 0,this.draggable=void 0,this.hidePriceLines=void 0,this.hideBarrierLine=void 0,this.hideOffscreenLine=void 0,this.title=void 0,this.onChartBarrierChange=void 0,(0,H.makeObservable)(this,{color:H.observable,lineStyle:H.observable,shade:H.observable,shadeColor:H.observable,high:H.observable,low:H.observable,relative:H.observable,draggable:H.observable,hidePriceLines:H.observable,hideBarrierLine:H.observable,hideOffscreenLine:H.observable,title:H.observable,updateBarriers:H.action.bound,updateBarrierShade:H.action.bound,onBarrierChange:H.action.bound,barrier_count:H.computed,default_shade:H.computed}),this.color=i,this.lineStyle=a||f.BARRIER_LINE_STYLES.SOLID,this.onChange=this.onBarrierChange,this.onChartBarrierChange="function"==typeof n?n.bind(this):function(){},this.high=e||0,r&&(this.low=r),this.shade=this.default_shade;var c=!!e;this.relative=!c||/^[+-]/.test(e.toString()),this.draggable=!s&&c,this.hidePriceLines=!c}var e,r,n;return e=t,r=[{key:"updateBarriers",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this.relative=/^[+-]/.test(t.toString())),this.high=t||void 0,this.low=e||void 0}},{key:"updateBarrierShade",value:function(t,e){this.shade=t&&f.CONTRACT_SHADES[e]||this.default_shade}},{key:"onBarrierChange",value:function(t){var e,r=t.high,n=t.low;this.updateBarriers(r,n,!0),null===(e=this.onChartBarrierChange)||void 0===e||e.call.apply(e,[this].concat(yn(function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.filter((function(t){return null!=t})).map((function(e){var r;return"".concat(t&&!/^[+-]/.test(null!==(r=null==e?void 0:e.toString())&&void 0!==r?r:"")?"+":"").concat(e)}))}(this.relative,r,n))))}},{key:"barrier_count",get:function(){return+(void 0!==this.high)+ +(void 0!==this.low)}},{key:"default_shade",get:function(){return f.DEFAULT_SHADES[this.barrier_count]}}],r&&vn(e.prototype,r),n&&vn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),gn=r("../../node_modules/lodash.debounce/index.js"),wn=r.n(gn),xn={STOP_OUT:"stop_out",TAKE_PROFIT:"take_profit",STOP_LOSS:"stop_loss"},En=function(t){var e=t.barriers,r=t.contract_type,n=void 0===r?"":r,o=t.contract_info,i=void 0===o?{}:o;if(t.is_over&&function(t,e){return(0,f.isMultiplierContract)(t)&&e.limit_order}(n,i)){var a=Object.values(xn),s=void 0!==i.limit_order&&Object.keys(i.limit_order).some((function(t){var e,r;return t===xn.STOP_LOSS&&(null==i||null===(e=i.limit_order)||void 0===e||null===(r=e[t])||void 0===r?void 0:r.value)}));a.forEach((function(t){var r,n=null===(r=i.limit_order)||void 0===r?void 0:r[t];if(n&&n.value){var o=e.find((function(e){return e.key===t}));if(o){if(o.high===+n.value)return;o.onChange({high:n.value})}else{var a={key:t,title:"".concat(n.display_name),color:t===xn.TAKE_PROFIT?f.BARRIER_COLORS.GREEN:f.BARRIER_COLORS.ORANGE,draggable:!1,lineStyle:t===xn.STOP_OUT?f.BARRIER_LINE_STYLES.DOTTED:f.BARRIER_LINE_STYLES.SOLID,hidePriceLines:s&&t===xn.STOP_OUT,hideOffscreenLine:!0,showOffscreenArrows:!0,isSingleBarrier:!0,opacityOnOverlap:t===xn.STOP_OUT&&.15};o=new bn(n.value),Object.assign(o,a),e.push(o)}}else hn(e,t)}))}else{Object.values(xn).forEach((function(t){return hn(e,t)}))}},Sn="add_active",kn="add_to_favorites",On="choose_chart_type",jn="choose_market_type",Pn="choose_time_interval",Ln="clean_all_active",Cn="close",Tn="delete_active",An="delete_from_favorites",Nn="edit_active",In="info_open",Mn="info_close",Dn="info_redirect",Rn="open",zn="search",Gn="CHART_INTERVAL_CHANGE",Fn="CHART_MODE_TOGGLE",Bn="CHART_TYPE_CHANGE",Un="FAVORITE_MARKETS_TOGGLE",Vn="INDICATOR_ADDED",Hn="INDICATOR_DELETED",qn="INDICATOR_INFO_TOGGLE",Wn="INDICATOR_SEARCH",Yn="INDICATOR_SETTINGS_OPEN",Zn="INDICATORS_CLEAR_ALL",$n="INDICATORS_MODAL_TOGGLE",Jn="MARKET_INFO_REDIRECT",Kn="MARKET_SEARCH",Qn="MARKET_STATE_CHANGE",Xn="MARKETS_LIST_TOGGLE",to="SYMBOL_CHANGE",eo="indicators_info",ro="indicators_type",no=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[Vn,Hn,qn,Wn,Yn,Zn,$n],n=[Un,Jn,Xn,Kn,to];return[Gn,Fn,Bn].includes(t)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.chart_type_name,n=void 0===r?"":r,o=e.is_open,i={data:{action:"",chart_type_name:n,time_interval_name:e.time_interval_name},event_type:"ce_chart_types_form"},a=o?Rn:Cn;if(!n)return{};switch(t){case Gn:i.data.action=Pn;break;case Fn:i.data.action=a;break;case Bn:i.data.action=On;break;default:return{}}return i}(t,e):r.includes(t)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.indicator_type_name,n=void 0===r?"":r,o=e.indicators_category_name,i=void 0===o?"":o,a=e.is_info_open,s=e.is_open,c=e.search_string,l=a?eo:ro,u=a?In:Mn,f=s?Rn:Cn,p={event_type:"ce_indicators_types_form"};if(t===Wn&&!e.search_string||(t===Vn||t===Hn||t===qn||t===Yn)&&!n)return{};switch(t){case Vn:p.data={action:Sn,indicator_type_name:n,indicators_category_name:i,subform_name:l};break;case Hn:p.data={action:Tn,indicator_type_name:n,indicators_category_name:i};break;case qn:p.data={action:u,indicator_type_name:n,indicators_category_name:i};break;case Wn:p.data={action:zn,search_string:c};break;case Yn:p.data={action:Nn,indicator_type_name:n,indicators_category_name:i};break;case $n:p.data={action:f};break;case Zn:p.data={action:Ln};break;default:return{}}return p}(t,e):n.includes(t)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.is_favorite,n=e.is_open,o=e.symbol_category,i=void 0===o?"":o,a=e.search_string,s=e.symbol,c=void 0===s?"":s,l=r?kn:An,u=n?Rn:Cn,f={event_type:"ce_market_types_form"};if(t===Kn&&!e.search_string||t===Un&&!c)return{};switch(t){case Un:f.data={action:l,market_type_name:c};break;case Jn:f.data={action:Dn,tab_market_name:i};break;case Kn:f.data={action:zn,search_string:a};break;case Xn:f.data={action:u,market_type_name:c};break;case to:f.data={action:jn,market_type_name:c,tab_market_name:i};break;default:return{}}return f}(t,e):{}};function oo(t){return oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oo(t)}function io(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ao(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?io(Object(r),!0).forEach((function(e){so(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):io(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function so(t,e,r){return(e=po(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function co(){co=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(O([])));_&&_!==e&&r.call(_,i)&&(m=_);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==oo(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function lo(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function uo(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){lo(i,n,o,a,s,"next",t)}function s(t){lo(i,n,o,a,s,"throw",t)}a(void 0)}))}}function fo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,po(n.key),n)}}function po(t){var e=function(t,e){if("object"!==oo(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===oo(e)?e:String(e)}function ho(t,e){return ho=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ho(t,e)}function mo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=_o(t);if(e){var o=_o(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yo(t)}(this,r)}}function yo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _o(t){return _o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_o(t)}var vo={},bo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ho(t,e)}(g,t);var e,r,n,o,i,a,s,c,l,u,p,d,m,y,_,v,b=mo(g);function g(t){var e,r=t.root_store;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);return(e=b.call(this,{root_store:r,local_storage_properties:["amount","currency","barrier_1","barrier_2","basis","contract_start_type","duration","duration_unit","expiry_date","expiry_type","growth_rate","has_take_profit","has_stop_loss","has_cancellation","hovered_barrier","short_barriers","long_barriers","strike_price_choices","is_equal","last_digit","multiplier","start_date","start_time","stop_loss","take_profit","is_trade_params_expanded"],session_storage_properties:["contract_type","symbol"],store_name:"trade_store",validation_rules:or()})).is_trade_component_mounted=!1,e.is_purchase_enabled=!1,e.is_trade_enabled=!1,e.is_equal=0,e.has_equals_only=!1,e.symbol="",e.is_market_closed=!1,e.previous_symbol="",e.active_symbols=[],e.form_components=[],e.contract_expiry_type="",e.contract_start_type="",e.contract_type="",e.contract_types_list={},e.non_available_contract_types_list={},e.trade_types={},e.amount=10,e.basis="",e.basis_list=[],e.currency="",e.stake_boundary={},e.duration=5,e.duration_min_max={},e.duration_unit="",e.duration_units_list=[],e.expiry_date="",e.expiry_epoch="",e.expiry_time="",e.expiry_type="duration",e.barrier_1="",e.barrier_2="",e.barrier_count=0,e.main_barrier=null,e.barriers=[],e.hovered_barrier="",e.barrier_choices=[],e.start_date=0,e.start_dates_list=[],e.start_time=null,e.sessions=[],e.market_open_times=[],e.market_close_times=[],e.last_digit=5,e.is_mobile_digit_view_selected=!1,e.proposal_info={},e.purchase_info={},e.is_chart_loading=void 0,e.should_show_active_symbols_loading=!1,e.accumulator_range_list=[],e.growth_rate=.03,e.maximum_payout=0,e.maximum_ticks=0,e.ticks_history_stats={},e.tick_size_barrier=0,e.multiplier=0,e.multiplier_range_list=[],e.stop_loss=void 0,e.take_profit=void 0,e.has_stop_loss=!1,e.has_take_profit=!1,e.has_cancellation=!1,e.commission=void 0,e.cancellation_price=void 0,e.stop_out=void 0,e.expiration=void 0,e.hovered_contract_type=void 0,e.cancellation_duration="60m",e.cancellation_range_list=[],e.cached_multiplier_cancellation_list=[],e.long_barriers={},e.short_barriers={},e.strike_price_choices={},e.is_trade_params_expanded=!0,e.contract_purchase_toast_box=void 0,e.debouncedProposal=wn()(e.requestProposal,500),e.proposal_requests={},e.is_purchasing_contract=!1,e.initial_barriers=void 0,e.is_initial_barrier_applied=!1,e.is_digits_widget_active=!1,e.should_skip_prepost_lifecycle=!1,e.clearContracts=function(){e.root_store.contract_trade.contracts=[]},e.setMainBarrier=function(t){if(t){var r=t.contract_type,n=t.barrier,o=t.barrier2;(0,f.isBarrierSupported)(r)?e.main_barrier=new bn(e.hovered_barrier||n,o,e.onChartBarrierChange,{color:e.hovered_barrier?Xr(r):f.BARRIER_COLORS.BLUE,line_style:e.hovered_barrier&&f.BARRIER_LINE_STYLES.DASHED,not_draggable:e.is_turbos||e.is_vanilla}):e.main_barrier=null}},e.onPurchase=wn()(e.processPurchase,300),e.disablePurchaseButtons=function(){var t=document.getElementsByClassName("trade-container__price-info"),e=document.getElementsByClassName("btn-purchase");[].forEach.bind(e,(function(t){t.classList.add("btn-purchase--disabled")}))(),[].forEach.bind(t,(function(t){t.classList.add("trade-container__price-info--fade")}))()},e.prev_chart_layout=null,e.wsSubscribe=function(t,r){if(1===t.subscribe){var n=JSON.stringify(t),o=f.WS.subscribeTicksHistory(t,(function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(r.apply(void 0,n),e.is_accumulator){var i={};if("tick"in n[0]){var a=n[0].tick,s=a.epoch,c=a.quote,l=a.symbol;if(e.symbol!==l)return;i={current_spot:c,current_spot_time:s}}else{if(!("history"in n[0]))return;var u=n[0].history,f=u.prices,p=u.times,d=n[0].echo_req.ticks_history;if(e.symbol!==d)return;i={current_spot:null==f?void 0:f[(null==f?void 0:f.length)-1],current_spot_time:null==p?void 0:p[(null==p?void 0:p.length)-1],prev_spot_time:null==p?void 0:p[(null==p?void 0:p.length)-2]}}e.root_store.contract_trade.updateAccumulatorBarriersData(i)}}));vo[n]=o}},e.wsForget=function(t){var e,r=JSON.stringify(t);vo[r]&&(null===(e=vo[r])||void 0===e||e.unsubscribe(),delete vo[r])},e.wsForgetStream=function(t){f.WS.forgetStream(t)},e.wsSendRequest=function(t){return"time"in t?cr().timePromise().then((function(t){return t?{msg_type:"time",time:t.unix()}:f.WS.time()})):"active_symbols"in t?e.root_store.client.is_logged_in?f.WS.authorized.activeSymbols("brief"):f.WS.activeSymbols("brief"):"trading_times"in t?f.WS.tradingTimes(t.trading_times):f.WS.storage.send(t)},(0,H.makeObservable)(yo(e),{accumulator_range_list:H.observable,active_symbols:H.observable,amount:H.observable,barrier_1:H.observable,barrier_2:H.observable,barrier_count:H.observable,barrier_choices:H.observable,barriers:H.observable,basis_list:H.observable,basis:H.observable,cancellation_duration:H.observable,cancellation_price:H.observable,cancellation_range_list:H.observable,cached_multiplier_cancellation_list:H.observable,commission:H.observable,contract_expiry_type:H.observable,contract_start_type:H.observable,contract_type:H.observable,contract_types_list:H.observable,currency:H.observable,duration_min_max:H.observable,duration_unit:H.observable,duration_units_list:H.observable,duration:H.observable,expiration:H.observable,expiry_date:H.observable,expiry_epoch:H.observable,expiry_time:H.observable,expiry_type:H.observable,form_components:H.observable,growth_rate:H.observable,has_cancellation:H.observable,has_equals_only:H.observable,has_open_accu_contract:H.computed,has_stop_loss:H.observable,has_take_profit:H.observable,hovered_barrier:H.observable,hovered_contract_type:H.observable,is_accumulator:H.computed,is_chart_loading:H.observable,is_digits_widget_active:H.observable,is_equal:H.observable,is_market_closed:H.observable,is_mobile_digit_view_selected:H.observable,is_purchase_enabled:H.observable,is_trade_component_mounted:H.observable,is_trade_enabled:H.observable,is_trade_params_expanded:H.observable,is_turbos:H.computed,last_digit:H.observable,long_barriers:H.observable,main_barrier:H.observable,market_close_times:H.observable,market_open_times:H.observable,maximum_payout:H.observable,maximum_ticks:H.observable,multiplier_range_list:H.observable,multiplier:H.observable,non_available_contract_types_list:H.observable,previous_symbol:H.observable,proposal_info:H.observable.ref,purchase_info:H.observable.ref,setHoveredBarrier:H.action.bound,sessions:H.observable,setDefaultGrowthRate:H.action.bound,short_barriers:H.observable,should_show_active_symbols_loading:H.observable,should_skip_prepost_lifecycle:H.observable,stake_boundary:H.observable,start_date:H.observable,start_dates_list:H.observable,start_time:H.observable,strike_price_choices:H.observable,stop_loss:H.observable,stop_out:H.observable,symbol:H.observable,take_profit:H.observable,tick_size_barrier:H.observable,ticks_history_stats:H.observable,trade_types:H.observable,accountSwitcherListener:H.action.bound,barrier_pipsize:H.computed,barriers_flattened:H.computed,changeDurationValidationRules:H.action.bound,chartStateChange:H.action.bound,clearContractPurchaseToastBox:H.action.bound,clearContracts:H.action.bound,clearLimitOrderBarriers:H.action.bound,clearPurchaseInfo:H.action.bound,clientInitListener:H.action.bound,contract_purchase_toast_box:H.observable,enablePurchase:H.action.bound,exportLayout:H.action.bound,forgetAllProposal:H.action.bound,getFirstOpenMarket:H.action.bound,has_alternative_source:H.computed,initAccountCurrency:H.action.bound,is_multiplier:H.computed,is_symbol_in_active_symbols:H.computed,is_synthetics_available:H.computed,is_vanilla:H.computed,is_vanilla_fx:H.computed,loadActiveSymbols:H.action.bound,logoutListener:H.action.bound,main_barrier_flattened:H.computed,networkStatusChangeListener:H.action.bound,onAllowEqualsChange:H.action.bound,onChange:H.action.bound,onChangeMultiple:H.action.bound,onChartBarrierChange:H.action.bound,onHoverPurchase:H.action.bound,onMount:H.action.bound,onProposalResponse:H.action.bound,onPurchase:H.action.bound,onUnmount:H.override,prepareTradeStore:H.action.bound,preSwitchAccountListener:H.action.bound,processPurchase:H.action.bound,pushPurchaseDataToGtm:H.action.bound,refresh:H.action.bound,requestProposal:H.action.bound,resetAccumulatorData:H.action.bound,resetErrorServices:H.action.bound,resetPreviousSymbol:H.action.bound,setActiveSymbols:H.action.bound,setBarrierChoices:H.action.bound,setChartStatus:H.action.bound,setContractPurchaseToastbox:H.action.bound,setContractTypes:H.action.bound,setDefaultSymbol:H.action.bound,setIsTradeParamsExpanded:H.action.bound,setIsDigitsWidgetActive:H.action.bound,setMarketStatus:H.action.bound,setMobileDigitView:H.action.bound,setPreviousSymbol:H.action.bound,setSkipPrePostLifecycle:H.action.bound,setStakeBoundary:H.action.bound,setTradeStatus:H.action.bound,show_digits_stats:H.computed,updateStore:H.action.bound,updateSymbol:H.action.bound}),(0,H.reaction)((function(){return[e.contract_expiry_type,e.duration_min_max,e.duration_unit,e.expiry_type]}),(function(){e.changeDurationValidationRules()})),(0,H.reaction)((function(){return e.is_equal}),(function(){e.onAllowEqualsChange()})),(0,H.reaction)((function(){return e.symbol}),(function(){var t=(0,f.resetEndTimeOnVolatilityIndices)(e.symbol,e.expiry_type);t&&(e.expiry_date=t),e.setDefaultGrowthRate(),e.resetAccumulatorData()})),(0,H.reaction)((function(){return e.duration_unit}),(function(){e.contract_expiry_type="t"===e.duration_unit?"tick":"intraday"})),(0,H.reaction)((function(){return[e.has_stop_loss,e.has_take_profit]}),(function(){e.has_stop_loss||(e.validation_errors.stop_loss=[]),e.has_take_profit||(e.validation_errors.take_profit=[])})),(0,H.reaction)((function(){return[e.contract_type]}),(function(){e.root_store.portfolio.setContractType(e.contract_type),e.is_accumulator||e.is_multiplier||e.is_turbos?Object.assign(e.validation_rules,ir()):(delete e.validation_rules.stop_loss,delete e.validation_rules.take_profit),e.resetAccumulatorData()})),(0,H.reaction)((function(){return e.root_store.common.current_language}),(function(){e.setValidationRules(or()),e.changeDurationValidationRules(),e.amount||e.validateAllProperties()})),(0,H.when)((function(){return!!e.accumulator_range_list.length}),(function(){return e.setDefaultGrowthRate()})),e}return e=g,r=[{key:"is_symbol_in_active_symbols",get:function(){var t=this;return this.active_symbols.some((function(e){return e.symbol===t.symbol&&1===e.exchange_is_open}))}},{key:"has_open_accu_contract",get:function(){var t=this;return this.is_accumulator&&!!this.root_store.portfolio.open_accu_contract&&!!this.root_store.portfolio.active_positions.find((function(e){var r=e.contract_info,n=e.type;return(0,f.isAccumulatorContract)(n)&&r.underlying===t.symbol}))}},{key:"resetAccumulatorData",value:function(){(0,f.isEmptyObject)(this.root_store.contract_trade.accumulator_barriers_data)||this.root_store.contract_trade.clearAccumulatorBarriersData()}},{key:"setDefaultGrowthRate",value:function(){this.is_accumulator&&!this.accumulator_range_list.includes(this.growth_rate)&&this.accumulator_range_list.length&&(this.growth_rate=this.accumulator_range_list[0])}},{key:"setSkipPrePostLifecycle",value:function(t){!!t!=!!this.should_skip_prepost_lifecycle&&(this.should_skip_prepost_lifecycle=t)}},{key:"setTradeStatus",value:function(t){this.is_trade_enabled=t}},{key:"refresh",value:function(){this.forgetAllProposal(),this.proposal_info={},this.purchase_info={},this.proposal_requests={}}},{key:"loadActiveSymbols",value:(v=uo(co().mark((function t(){var e,r,n,o,i,a=this,s=arguments;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=!(s.length>0&&void 0!==s[0])||s[0],n=!(s.length>1&&void 0!==s[1])||s[1],this.should_show_active_symbols_loading=n,t.next=5,this.setActiveSymbols();case 5:return t.next=7,this.root_store.active_symbols.setActiveSymbols();case 7:if(!r){t.next=10;break}return t.next=10,this.setDefaultSymbol();case 10:return t.next=12,f.WS.storage.contractsFor(this.symbol);case 12:if(o=t.sent,!["InvalidSymbol","InputValidationFailed"].includes(null===(e=o.error)||void 0===e?void 0:e.code)){t.next=19;break}return t.next=16,(0,f.pickDefaultSymbol)(this.active_symbols);case 16:return i=t.sent,t.next=19,this.processNewValuesAsync({symbol:i});case 19:(0,H.runInAction)((function(){a.should_show_active_symbols_loading=!1}));case 20:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"setDefaultSymbol",value:(_=uo(co().mark((function t(){var e;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.is_symbol_in_active_symbols){t.next=7;break}return this.is_trade_enabled=!1,t.next=4,(0,f.pickDefaultSymbol)(this.active_symbols);case 4:return e=t.sent,t.next=7,this.processNewValuesAsync({symbol:e});case 7:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"setActiveSymbols",value:(y=uo(co().mark((function t(){var e,r,n,o,i,a;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="maltainvest"===this.root_store.client.landing_company_shortcode,r=this.root_store.client.is_logged_in,n=this.root_store.client.clients_country,o=this.root_store.common.showError,["be","im"].includes(n)&&!r&&(0,f.showUnavailableLocationError)(o,r),t.next=7,f.WS.authorized.activeSymbols();case 7:if(i=t.sent,a=i.active_symbols,!i.error){t.next=13;break}return o({message:(0,h.localize)("Trading is unavailable at this time.")}),t.abrupt("return");case 13:if(null!=a&&a.length){t.next=23;break}return t.next=16,f.WS.wait("get_settings");case 16:if(!e){t.next=21;break}return(0,f.showDigitalOptionsUnavailableError)(o,{text:(0,h.localize)("We’re working to have this available for you soon. If you have another account, switch to that account to continue trading. You may add a Deriv MT5 Financial."),title:(0,h.localize)("{{platform_name_trader}} is not available for this account",{platform_name_trader:(0,f.getPlatformSettings)("trader").name}),link:(0,h.localize)("Go to {{platform_name_mt5}} dashboard",{platform_name_mt5:(0,f.getPlatformSettings)("mt5").name})}),t.abrupt("return");case 21:e||(0,f.showUnavailableLocationError)(o,r);case 22:(0,f.showUnavailableLocationError)(o,r);case 23:return t.next=25,this.processNewValuesAsync({active_symbols:a});case 25:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"setContractTypes",value:(m=uo(co().mark((function t(){var e=this;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.symbol||!this.is_symbol_in_active_symbols){t.next=4;break}return t.next=3,Je(this.symbol);case 3:(0,H.runInAction)((function(){var t=We.R.getContractCategories();e.processNewValuesAsync(ao(ao({},t),We.R.getContractType(t.contract_types_list,e.contract_type))),e.processNewValuesAsync(We.R.getContractValues(e))}));case 4:this.root_store.common.setSelectedContractType(this.contract_type),this.root_store.portfolio.setContractType(this.contract_type);case 6:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"prepareTradeStore",value:(d=uo(co().mark((function t(){var e,r=this,n=arguments;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(n.length>0&&void 0!==n[0])||n[0],this.initial_barriers={barrier_1:this.barrier_1,barrier_2:this.barrier_2},t.next=4,(0,H.when)((function(){return!r.root_store.client.is_populating_account_list}));case 4:return t.next=6,f.WS.wait("website_status");case 6:return t.next=8,(0,H.runInAction)(uo(co().mark((function t(){return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.processNewValuesAsync({currency:r.root_store.client.currency||r.root_store.client.default_currency},!0,null,!1);case 2:case"end":return t.stop()}}),t)}))));case 8:return t.next=10,this.loadActiveSymbols(e);case 10:return t.next=12,this.setContractTypes();case 12:return t.next=14,this.processNewValuesAsync({is_market_closed:(0,f.isMarketClosed)(this.active_symbols,this.symbol)},!0,null,!1);case 14:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"onChangeMultiple",value:(p=uo(co().mark((function t(e){var r=this;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object.keys(e).forEach((function(t){if(!(t in r))throw new Error("Invalid Argument: ".concat(t))})),t.next=3,this.processNewValuesAsync(ao({},e),!0);case 3:this.validateAllProperties();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"onChange",value:(u=uo(co().mark((function t(e){var r,n,o;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.target,n=r.name,o=r.value,"symbol"!==n||!o){t.next=7;break}this.setChartStatus(!0),this.setMarketStatus(!1),this.is_trade_enabled=!1,t.next=17;break;case 7:if("currency"!==n){t.next=11;break}this.root_store.client.is_logged_in||this.root_store.client.selectCurrency(o),t.next=17;break;case 11:if("expiry_date"!==n){t.next=15;break}this.expiry_time=null,t.next=17;break;case 15:if(n in this){t.next=17;break}throw new Error("Invalid Argument: ".concat(n));case 17:return t.next=19,this.processNewValuesAsync(so({},n,o),!0,"contract_type"===n?{contract_type:this.contract_type}:{},!0);case 19:this.validateAllProperties(),this.root_store.common.setSelectedContractType(this.contract_type);case 21:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"setHoveredBarrier",value:function(t){this.hovered_barrier=t}},{key:"setPreviousSymbol",value:function(t){this.previous_symbol!==t&&(this.previous_symbol=t)}},{key:"setIsTradeParamsExpanded",value:function(t){this.is_trade_params_expanded=t}},{key:"resetPreviousSymbol",value:(l=uo(co().mark((function t(){var e=this;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setMarketStatus((0,f.isMarketClosed)(this.active_symbols,this.previous_symbol)),t.next=3,Je(this.previous_symbol);case 3:this.updateSymbol(this.symbol),this.setChartStatus(!1),(0,H.runInAction)((function(){e.previous_symbol=""}));case 6:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"onHoverPurchase",value:function(t,e){this.is_accumulator||(this.is_purchase_enabled&&this.main_barrier&&!this.is_multiplier?this.main_barrier.updateBarrierShade(t,null!=e?e:""):t||!this.main_barrier||this.is_multiplier||this.main_barrier.updateBarrierShade(!1,null!=e?e:""),this.hovered_contract_type=t?e:null,En({barriers:this.root_store.portfolio.barriers,is_over:t,contract_type:e,contract_info:this.proposal_info[null!=e?e:""]}))}},{key:"clearLimitOrderBarriers",value:function(){this.hovered_contract_type=null;var t=this.barriers;En({barriers:t,is_over:!1})}},{key:"barrier_pipsize",get:function(){return(0,f.getBarrierPipSize)(this.barrier_1)}},{key:"main_barrier_flattened",get:function(){return(0,ar.A)(this.contract_type)?null:(0,H.toJS)(this.main_barrier)}},{key:"barriers_flattened",get:function(){return this.root_store.portfolio.barriers&&(0,H.toJS)(this.root_store.portfolio.barriers)}},{key:"processPurchase",value:function(t,e,r){var n=this;if(this.is_purchase_enabled&&t){this.is_purchase_enabled=!1,this.is_purchasing_contract=!0;var o="t"===this.duration_unit;mr(t,e).then((0,H.action)((function(e){if(!n.is_trade_component_mounted)return n.enablePurchase(),void(n.is_purchasing_contract=!1);var i,a,s=+n.last_digit;if(e.error)n.disablePurchaseButtons(),"InvalidToken"!==e.error.code&&(n.root_store.common.setServicesError(ao({type:e.msg_type},e.error)),(0,f.isMobile)()&&"buy"===(null===(i=n.root_store.common)||void 0===i||null===(a=i.services_error)||void 0===a?void 0:a.type)&&setTimeout((function(){n.clearPurchaseInfo(),n.requestProposal()}),3500));else if(e.buy){if(n.proposal_info[r]&&n.proposal_info[r].id!==t)throw new Error("Proposal ID does not match.");var c=ao(ao(ao({},n.proposal_requests[r]),n.proposal_info[r]),{},{buy_price:e.buy.buy_price}),l=e.buy,u=l.contract_id,p=l.longcode,d=l.start_time;if(u){var h,m=e.buy.shortcode,y=(0,f.extractInfoFromShortcode)(m),_=y.category,v=y.underlying,b=(0,ar.H)(null!==(h=null==_?void 0:_.toUpperCase())&&void 0!==h?h:""),g=null==_?void 0:_.toUpperCase();return n.root_store.contract_trade.addContract({contract_id:u,start_time:d,longcode:p,underlying:v,barrier:b?s:null,contract_type:g,is_tick_contract:o}),n.root_store.portfolio.onBuyResponse({contract_id:u,longcode:p,contract_type:g}),(0,f.isDesktop)()&&n.root_store.ui.openPositionsDrawer(),n.proposal_info={},n.forgetAllProposal(),n.purchase_info=e,n.proposal_requests={},n.debouncedProposal(),n.clearLimitOrderBarriers(),n.pushPurchaseDataToGtm(c),n.setContractPurchaseToastbox(e.buy),void(n.is_purchasing_contract=!1)}}n.forgetAllProposal(),n.purchase_info=e,n.enablePurchase(),n.is_purchasing_contract=!1})))}}},{key:"enablePurchase",value:function(){this.root_store.client.is_unwelcome||(this.is_purchase_enabled=!0)}},{key:"updateStore",value:function(t){var e=this;return Object.keys((0,f.cloneObject)(t)||{}).forEach((function(r){"root_store"===r||["validation_rules","validation_errors","currency"].indexOf(r)>-1||(JSON.stringify(e[r])===JSON.stringify(t[r])?delete t[r]:("symbol"===r&&(e.is_purchase_enabled=!1,e.is_trade_enabled=!1),t.start_date&&"string"==typeof t.start_date&&(t.start_date=parseInt(t.start_date)),e[r]=t[r],"barrier_2"===r&&t.barrier_1&&(e.barrier_1=t.barrier_1)))})),t}},{key:"processNewValuesAsync",value:(c=uo(co().mark((function t(){var e,r,n,o,i,a,s,c,l,u,p,d,h,m,y,_,v,b,g,w,x,E,S,k=arguments;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=k.length>1&&void 0!==k[1]&&k[1],n=k.length>2&&void 0!==k[2]?k[2]:{},o=!(k.length>3&&void 0!==k[3])||k[3],(e=k.length>0&&void 0!==k[0]?k[0]:{}).contract_type&&"rise_fall"===e.contract_type&&this.is_equal&&(e.contract_type="rise_fall_equal"),i=this.root_store.contract_trade||{},a=i.prev_chart_type,s=i.prev_granularity,c=i.chart_type,l=i.granularity,u=i.savePreviousChartMode,p=i.updateChartType,d=i.updateGranularity,"accumulator"===e.contract_type?(u(c,l),d(0),p(this.root_store.client.is_beta_chart?"line":"mountain")):(e.contract_type||e.symbol)&&a&&s&&(a!==c||s!==l)&&(d(s),p(a),u("",null)),/\bduration\b/.test(Object.keys(e))&&"string"==typeof e.duration&&(e.duration=+e.duration),o&&(this.forgetAllProposal(),this.proposal_requests={}),r&&/\bcurrency\b/.test(Object.keys(e))&&(_=(null==n?void 0:n.currency)||this.currency,v=e.currency!==_,b=(0,f.isCryptocurrency)(null!==(h=e.currency)&&void 0!==h?h:"")||(0,f.isCryptocurrency)(null!==(m=e.currency)&&void 0!==m?m:"")!==(0,f.isCryptocurrency)(_),v&&b&&(e.amount=e.amount||(0,f.getMinPayout)(null!==(g=e.currency)&&void 0!==g?g:"")),this.currency=null!==(y=e.currency)&&void 0!==y?y:""),!Object.keys(e).includes("symbol")){t.next=16;break}return this.setPreviousSymbol(this.symbol),t.next=14,Je(null!==(x=e.symbol)&&void 0!==x?x:"");case 14:this.setMarketStatus((0,f.isMarketClosed)(this.active_symbols,null!==(E=e.symbol)&&void 0!==E?E:"")),w=We.R.getContractCategories().has_only_forward_starting_contracts;case 16:if(this.root_store.ui.setHasOnlyForwardingContracts(w),!w){t.next=19;break}return t.abrupt("return");case 19:if(S=this.updateStore((0,f.cloneObject)(e)),!r&&!/\b(symbol|contract_types_list)\b/.test(Object.keys(S))){t.next=29;break}return this.updateStore({is_purchase_enabled:!1,proposal_info:{}}),e.contract_type&&this.root_store.ui.is_advanced_duration&&(0,ar.A)(e.contract_type)&&(this.barrier_1="",this.barrier_2="",this.expiry_type="duration",this.root_store.ui.is_advanced_duration=!1),t.next=25,$r(this,S);case 25:this.updateStore(ao({},this.is_initial_barrier_applied?{}:this.initial_barriers)),this.is_initial_barrier_applied=!0,/\b(contract_type|currency)\b/.test(Object.keys(S))&&this.validateAllProperties(),this.debouncedProposal();case 29:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"is_synthetics_available",get:function(){var t;return!(null===(t=this.active_symbols)||void 0===t||!t.find((function(t){return"synthetic_index"===t.market})))}},{key:"is_synthetics_trading_market_available",get:function(){var t,e=this;return!(null===(t=this.active_symbols)||void 0===t||!t.find((function(t){return"synthetic_index"===t.market&&!(0,f.isMarketClosed)(e.active_symbols,t.symbol)})))}},{key:"show_digits_stats",get:function(){return(0,ar.A)(this.contract_type)}},{key:"setMobileDigitView",value:function(t){this.is_mobile_digit_view_selected=t}},{key:"pushPurchaseDataToGtm",value:function(t){var e={event:"buy_contract",bom_ui:"new",contract:{amount:t.amount,barrier1:t.barrier,barrier2:t.barrier2,basis:t.basis,buy_price:t.buy_price,contract_type:t.contract_type,currency:t.currency,date_expiry:t.date_expiry,date_start:t.date_start,duration:t.duration,duration_unit:t.duration_unit,payout:t.payout,symbol:t.symbol},settings:{theme:this.root_store.ui.is_dark_mode_on?"dark":"light",positions_drawer:this.root_store.ui.is_positions_drawer_on?"open":"closed",chart:{toolbar_position:this.root_store.ui.is_chart_layout_default?"bottom":"left",chart_asset_info:this.root_store.ui.is_chart_asset_info_visible?"visible":"hidden",chart_type:this.root_store.contract_trade.chart_type,granularity:this.root_store.contract_trade.granularity}}};this.root_store.gtm.pushDataLayer(e)}},{key:"clearPurchaseInfo",value:function(){this.purchase_info={},this.proposal_requests={},this.proposal_info={}}},{key:"requestProposal",value:function(){var t=this,e=(0,Qr.RX)(this);if(Object.values(this.validation_errors).some((function(t){return t.length})))return this.proposal_info={},this.purchase_info={},this.forgetAllProposal(),void(this.is_accumulator&&this.resetAccumulatorData());(0,f.isEmptyObject)(e)||(this.proposal_requests=e,this.purchase_info={},Object.keys(this.proposal_requests).forEach((function(e){f.WS.subscribeProposal(t.proposal_requests[e],t.onProposalResponse)}))),this.root_store.ui.resetPurchaseStates()}},{key:"forgetAllProposal",value:function(){Object.keys(this.proposal_requests).length>0&&f.WS.forgetAll("proposal")}},{key:"setMarketStatus",value:function(t){this.is_market_closed=t}},{key:"onProposalResponse",value:function(t){var e,r,n,o,i=t.echo_req.contract_type,a=(0,f.getPropertyValue)(this.proposal_info,i)||{},s=(0,f.getPropertyValue)(a,"obj_contract_basis")||{},c=null===(e=t.proposal)||void 0===e?void 0:e.date_expiry;if(this.expiry_epoch=c||this.expiry_epoch,!t.error&&c&&this.is_crypto_multiplier&&(this.expiration=c),this.proposal_info=ao(ao({},this.proposal_info),{},so({},i,(0,Qr._N)(this,t,s))),this.is_multiplier&&this.proposal_info&&this.proposal_info.MULTUP){var l,u=this.proposal_info.MULTUP,p=u.commission,d=u.cancellation,h=u.limit_order;p&&(this.commission=p),d&&(this.cancellation_price=d.ask_price),this.stop_out=null==h||null===(l=h.stop_out)||void 0===l?void 0:l.order_amount}if(this.is_accumulator&&null!==(r=this.proposal_info)&&void 0!==r&&r.ACCU){var m=this.proposal_info.ACCU,y=m.barrier_spot_distance,_=m.maximum_ticks,v=void 0===_?0:_,b=m.ticks_stayed_in,g=m.tick_size_barrier,w=void 0===g?0:g,x=m.last_tick_epoch,E=m.maximum_payout,S=void 0===E?0:E,k=m.high_barrier,O=m.low_barrier,j=m.spot_time;this.ticks_history_stats=function(t){var e,r=t.previous_ticks_history_stats,n=void 0===r?{}:r,o=t.new_ticks_history_stats,i=void 0===o?[]:o,a=t.last_tick_epoch,s=n.ticks_stayed_in||[],c=null!==(e=n.last_tick_epoch)&&void 0!==e?e:0;return i.length&&a?{ticks_stayed_in:i.length>1?_r(i).reverse():i[0]<=s[0]&&a>c?[i[0]].concat(_r(s.slice(0,s.length-1))):a===c?s:[i[0]].concat(_r(s.slice(1))),last_tick_epoch:a}:n}({previous_ticks_history_stats:this.ticks_history_stats,new_ticks_history_stats:b,last_tick_epoch:x}),this.maximum_ticks=v,this.maximum_payout=S,this.tick_size_barrier=w;var P=(this.root_store.contract_trade||{}).updateAccumulatorBarriersData;P&&P({accumulators_high_barrier:k,accumulators_low_barrier:O,barrier_spot_distance:y,current_spot_time:j,underlying:this.symbol})}if((!this.main_barrier||null!==(n=this.main_barrier)&&void 0!==n&&n.shade)&&this.setMainBarrier(t.echo_req),this.hovered_contract_type===i&&En({barriers:this.root_store.portfolio.barriers,contract_info:this.proposal_info[null!==(o=this.hovered_contract_type)&&void 0!==o?o:""],contract_type:i,is_over:!0}),t.error){var L,C=(0,Qr.yr)(t);if(C&&this.setValidationErrorMessages(C,[t.error.message]),this.is_multiplier){var T=t.error,A=T.message,N=T.details,I=(A||"").match(/\((\d+\.*\d*)\)/);"stop_loss"===(null==N?void 0:N.field)&&null!=I&&I[1]&&(this.commission=I[1])}if(this.is_accumulator&&this.resetAccumulatorData(),"AlreadySubscribed"===t.error.code)return this.refresh(),void(this.is_trade_component_mounted&&this.debouncedProposal());if((this.is_turbos||this.is_vanilla)&&null!==(L=t.error.details)&&void 0!==L&&L.barrier_choices){var M=t.error.details,D=M.barrier_choices,R=M.max_stake,z=M.min_stake;if(this.setStakeBoundary(i,z,R),this.setBarrierChoices(D),!this.barrier_choices.includes(this.barrier_1)){var G=Math.floor(this.barrier_choices.length/2);this.barrier_1=this.is_vanilla?this.barrier_choices[G]:this.barrier_choices[0],this.onChange({target:{name:"barrier_1",value:this.barrier_1}})}}}else if(this.validateAllProperties(),this.is_turbos||this.is_vanilla){var F,B=null!==(F=t.proposal)&&void 0!==F?F:{},U=B.max_stake,V=B.min_stake,H=B.barrier_choices;this.setBarrierChoices(H),this.setStakeBoundary(i,V,U)}this.is_purchasing_contract||this.enablePurchase()}},{key:"onChartBarrierChange",value:function(t,e){this.processNewValuesAsync({barrier_1:t,barrier_2:e},!0)}},{key:"onAllowEqualsChange",value:function(){this.processNewValuesAsync({contract_type:this.is_equal?"rise_fall_equal":"rise_fall"},!0)}},{key:"updateSymbol",value:function(t){t&&this.onChange({target:{name:"symbol",value:t}})}},{key:"changeDurationValidationRules",value:function(){var t;if("endtime"!==this.expiry_type){if(this.validation_rules.duration){var e=null===(t=this.validation_rules.duration.rules)||void 0===t?void 0:t.findIndex((function(t){return"number"===t[0]})),r=this.duration_min_max[this.contract_expiry_type]||!1;if(r){var n,o={min:(0,f.convertDurationLimit)(+r.min,this.duration_unit),max:(0,f.convertDurationLimit)(+r.max,this.duration_unit)};Number(e)>-1&&this.validation_rules.duration.rules?this.validation_rules.duration.rules[Number(e)][1]=o:null===(n=this.validation_rules.duration.rules)||void 0===n||n.push(["number",o]),this.validateProperty("duration",this.duration)}}}else this.validation_errors.duration=[]}},{key:"accountSwitcherListener",value:(s=uo(co().mark((function t(){var e=this;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.root_store.common.is_language_changing){t.next=6;break}return t.next=3,this.loadActiveSymbols(!1,!1);case 3:this.root_store.common.is_language_changing=!1,t.next=8;break;case 6:return t.next=8,this.loadActiveSymbols(!0,!1);case 8:return this.resetErrorServices(),t.next=11,this.setContractTypes();case 11:return(0,H.runInAction)(uo(co().mark((function t(){return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.processNewValuesAsync({currency:e.root_store.client.currency||e.root_store.client.default_currency},!0,{currency:e.currency},!1);case 1:case"end":return t.stop()}}),t)})))),t.abrupt("return",Promise.resolve());case 13:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"preSwitchAccountListener",value:function(){return this.clearContracts(),this.is_trade_enabled=!1,Promise.resolve()}},{key:"logoutListener",value:(a=uo(co().mark((function t(){return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.clearContracts(),this.refresh(),this.resetErrorServices(),!this.root_store.common.is_language_changing){t.next=9;break}return t.next=6,this.loadActiveSymbols(!1);case 6:this.root_store.common.is_language_changing=!1,t.next=11;break;case 9:return t.next=11,this.loadActiveSymbols();case 11:return t.next=13,this.setContractTypes();case 13:this.is_trade_enabled=!0,this.debouncedProposal();case 15:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"clientInitListener",value:function(){return this.initAccountCurrency(this.root_store.client.currency||this.root_store.client.default_currency),Promise.resolve()}},{key:"networkStatusChangeListener",value:function(t){this.setTradeStatus(t)}},{key:"resetErrorServices",value:function(){this.root_store.ui.toggleServicesErrorModal(!1)}},{key:"onMount",value:function(){var t=this;this.is_trade_component_mounted&&this.should_skip_prepost_lifecycle||(this.root_store.notifications.setShouldShowPopups(!1),this.onPreSwitchAccount(this.preSwitchAccountListener),this.onSwitchAccount(this.accountSwitcherListener),this.resetAccumulatorData(),this.onLogout(this.logoutListener),this.onClientInit(this.clientInitListener),this.onNetworkStatusChange(this.networkStatusChangeListener),this.setChartStatus(!0),(0,H.runInAction)(uo(co().mark((function e(){return co().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.is_trade_component_mounted=!0,e.next=3,t.prepareTradeStore();case 3:t.root_store.notifications.setShouldShowPopups(!0);case 4:case"end":return e.stop()}}),e)})))))}},{key:"setChartStatus",value:function(t){this.is_chart_loading=t}},{key:"initAccountCurrency",value:(i=uo(co().mark((function t(e){return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.currency!==e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.processNewValuesAsync({currency:e},!0,{currency:this.currency},!1);case 4:this.refresh(),this.debouncedProposal();case 6:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"onUnmount",value:function(){this.should_skip_prepost_lifecycle||(this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.is_trade_component_mounted=!1,this.root_store.contract_trade.onUnmount(),this.refresh(),this.resetErrorServices(),this.root_store.notifications.is_notifications_visible&&this.root_store.notifications.toggleNotificationsModal(),this.prev_chart_layout&&(this.prev_chart_layout.is_used=!1),this.clearContracts(),this.resetAccumulatorData(),this.is_vanilla&&this.setBarrierChoices([]))}},{key:"chart_layout",get:function(){var t=null;return this.prev_chart_layout&&!1===this.prev_chart_layout.is_used&&(t=this.prev_chart_layout),t}},{key:"is_crypto_multiplier",get:function(){return"multiplier"===this.contract_type&&this.symbol.startsWith("cry")}},{key:"exportLayout",value:function(t){var e=this;delete t.previousMaxTicks,this.prev_chart_layout=t,this.prev_chart_layout&&(this.prev_chart_layout.isDone=function(){e.prev_chart_layout&&(e.prev_chart_layout.is_used=!0),e.setChartStatus(!1)})}},{key:"chartStateChange",value:function(t,e){t===Qn&&this.is_trade_component_mounted&&null!=e&&e.isClosed&&e.isClosed!==this.is_market_closed&&this.prepareTradeStore(!1);var r=no(t,e),n=r.data,o=r.event_type;n&&Ke.c.trackEvent(o,ao(ao({},n),{},{action:n.action,device_type:(0,f.isMobile)()?"mobile":"desktop",form_name:"default"}))}},{key:"has_alternative_source",get:function(){return this.is_multiplier&&!!this.hovered_contract_type}},{key:"has_barrier",get:function(){return(0,f.hasBarrier)(this.contract_type)}},{key:"is_accumulator",get:function(){return"accumulator"===this.contract_type}},{key:"is_multiplier",get:function(){return"multiplier"===this.contract_type}},{key:"is_turbos",get:function(){return(0,f.isTurbosContract)(this.contract_type)}},{key:"is_vanilla",get:function(){return(0,f.isVanillaContract)(this.contract_type)}},{key:"is_vanilla_fx",get:function(){return(0,f.isVanillaFxContract)(this.contract_type,this.symbol)}},{key:"setContractPurchaseToastbox",value:function(t){var e=(0,yr.wu)(this.contract_types_list,f.unsupported_contract_types_list);this.contract_purchase_toast_box={key:!0,buy_price:(0,f.formatMoney)(this.root_store.client.currency,t.buy_price,!0,0,0),contract_type:this.contract_type,currency:(0,f.getCurrencyDisplayCode)(this.root_store.client.currency),list:e}}},{key:"clearContractPurchaseToastBox",value:function(){this.contract_purchase_toast_box=void 0}},{key:"getFirstOpenMarket",value:(o=uo(co().mark((function t(e){var r,n,o;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(r=this.active_symbols)||void 0===r||!r.length){t.next=2;break}return t.abrupt("return",(0,f.findFirstOpenMarket)(this.active_symbols,e));case 2:return t.next=4,f.WS.authorized.activeSymbols();case 4:if(n=t.sent,o=n.active_symbols,!n.error){t.next=10;break}return this.root_store.common.showError({message:(0,h.localize)("Trading is unavailable at this time.")}),t.abrupt("return",void 0);case 10:return t.abrupt("return",(0,f.findFirstOpenMarket)(o,e));case 11:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"setStakeBoundary",value:function(t,e,r){e&&r&&(this.stake_boundary[t]={min_stake:e,max_stake:r})}},{key:"setBarrierChoices",value:function(t){if(this.barrier_choices=null!=t?t:[],this.is_turbos){var e={barrier:this.barrier_1,barrier_choices:t};"Long"===(0,f.getContractSubtype)(this.contract_type)?this.long_barriers=e:this.short_barriers=e}this.is_vanilla&&(this.strike_price_choices={barrier:this.barrier_1,barrier_choices:t})}},{key:"setIsDigitsWidgetActive",value:function(t){this.is_digits_widget_active=t}}],r&&fo(e.prototype,r),n&&fo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}(dn);function go(t){return go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},go(t)}function wo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==go(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==go(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===go(i)?i:String(i)),n)}var o,i}function xo(t,e,r){return e&&wo(t.prototype,e),r&&wo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var Eo=xo((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cashier=r.modules.cashier,this.trade=new bo({root_store:e})}));function So(t){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},So(t)}function ko(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==So(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==So(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===So(i)?i:String(i)),n)}var o,i}function Oo(t,e,r){return e&&ko(t.prototype,e),r&&ko(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var jo,Po=Oo((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.client=void 0,this.common=void 0,this.modules=void 0,this.ui=void 0,this.gtm=void 0,this.notifications=void 0,this.contract_replay=void 0,this.contract_trade=void 0,this.portfolio=void 0,this.chart_barrier_store=void 0,this.active_symbols=void 0,this.client=e.client,this.common=e.common,this.modules=new Eo(this,e),this.ui=e.ui,this.gtm=e.gtm,this.notifications=e.notifications,this.contract_replay=e.contract_replay,this.contract_trade=e.contract_trade,this.portfolio=e.portfolio,this.chart_barrier_store=e.chart_barrier_store,this.active_symbols=e.active_symbols}));(0,H.configure)({enforceActions:"observed"});const Lo=function(t,e){return jo||(cr().init(t.common),(0,f.setWebsocket)(e),jo=new Po(t))};var Co=a()({loader:function(){return r.e("trade-modals").then(r.bind(r,"./src/App/Containers/Modals/index.ts"))},loading:function(){return null}});const To=function(t){var e=t.passthrough,r=Lo(e.root_store,e.WS);return o().useEffect((function(){return function(){return r.ui.setPromptHandler(!1)}}),[r]),o().createElement(De,{store:r},o().createElement(we,null),o().createElement(Co,null),o().createElement(qe.S,null),o().createElement(Fe,{store:r}),o().createElement(Ue,null),o().createElement(He,{store:r}))},Ao=To},"./src/Modules/Contract/Components/AccumulatorsStats/index.js":(t,e,r)=>{"use strict";r.d(e,{Z:()=>k});var n=r("react"),o=r.n(n),i=r("../../node_modules/classnames/index.js"),a=r.n(i),s=r("@deriv/components"),c=r("@deriv/shared"),l=r("@deriv/translations"),u=function(t){var e=t.has_progress_dots,r=t.progress_dots_testid,n=t.should_emphasize_last_counter,i=t.ticks_history_counter_testid,s=t.value,c=n&&e&&0===s;return o().createElement("div",{"data-testid":i,className:a()("accumulators-stats__history-counter",{"accumulators-stats__history-counter--emphasized":c})},s,e&&o().createElement("div",{className:"accumulators-stats__progress-dots","data-testid":r},[1,2,3].map((function(t){return o().createElement("span",{key:"ticks-dot-counter".concat(t),className:"dot-".concat(t)})}))))};const f=o().memo(u);var p=function(t){var e=t.history_text_size,r=t.rows;return o().createElement(s.Text,{size:e,className:"accumulators-stats__history--expanded"},r.map((function(t,e){return o().createElement("div",{key:e.toString()+t[0],"data-testid":"dt_accu_stats_history_row",className:"accumulators-stats__row"},t.map((function(t,r){return o().createElement(f,{ticks_history_counter_testid:"dt_accu_stats_history_counter",key:r.toString()+t,value:t,has_progress_dots:0===e&&0===r})})))})))};const d=o().memo(p);function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var y=function(t){var e=t.icon_classname,r=t.is_dark_theme,n=t.is_manual_open,i=t.title,a=t.toggleManual,u=h(o().useState(!0),2),f=u[0],p=u[1],d=(0,c.isMobile)(),m=o().useCallback((function(t){return(0,c.getUrlBase)("/public/videos/accumulators_manual_".concat(d?"mobile":"desktop").concat(r?"_dark":"",".").concat(t))}),[d,r]),y=o().useMemo((function(){return m("mp4")}),[m]),_=o().useMemo((function(){return m("webm")}),[m]);return o().createElement(o().Fragment,null,o().createElement(s.Icon,{icon:"IcInfoOutline",onClick:a,size:16,className:e,data_testid:"dt_ic_info_icon"}),o().createElement(s.Modal,{is_open:n&&!!y&&!!_,should_header_stick_body:!1,title:i,toggleModal:a,width:d?"328px":"596px",className:"accumulators-stats-manual-modal"},o().createElement(s.Modal.Body,{className:"accumulators-stats-modal-body"},o().createElement("div",{className:"accumulators-stats-modal-body__video"},f&&o().createElement(s.Loading,{is_fullscreen:!1}),o().createElement("video",{autoPlay:!0,"data-testid":"dt_accumulators_stats_manual_video",loop:!0,onLoadedData:function(){return p(!1)},playsInline:!0,preload:"auto",width:d?296:563},o().createElement("source",{src:y,type:"video/mp4"}),o().createElement("source",{src:_,type:"video/webm"}),(0,l.localize)("Unfortunately, your browser does not support the video."))),o().createElement(s.Text,{as:"p",size:d?"xs":"s",color:"prominent",className:"accumulators-stats-modal-body__text"},(0,l.localize)("Stats show the history of consecutive tick counts, i.e. the number of ticks the price remained within range continuously.")))))},_=r("./src/Stores/useTraderStores.tsx"),v=r("../stores/src/index.ts");function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var w=10,x=10,E=15,S=5;const k=(0,v.Pi)((function(t){var e,r,n=t.is_expandable,i=void 0===n||n,u=(0,v.oR)().ui,p=(0,_.b)().ticks_history_stats,h=void 0===p?{}:p,m=u.is_dark_mode_on,g=b(o().useState(!0),2),k=g[0],O=g[1],j=b(o().useState(!1),2),P=j[0],L=j[1],C=(0,l.localize)("Stats"),T=null!==(e=null==h?void 0:h.ticks_stayed_in)&&void 0!==e?e:[],A=(0,c.isDesktop)()||!k?"xxs":"xxxs",N=T.reduce((function(t,e,r){var n=k?w:x,o=k?E:S,i=(0,c.isDesktop)()?n:o;return r%i==0&&t.push(T.slice(r,r+i)),t}),[]);return T.length?o().createElement("div",{className:"accumulators-stats"},o().createElement("div",{className:a()("accumulators-stats__container--collapsed")},o().createElement("div",{className:"accumulators-stats__title"},o().createElement(y,{is_dark_theme:m,icon_classname:"info",is_manual_open:P,title:C,toggleManual:function(){return L(!P)}}),o().createElement(s.Text,{weight:"bold",size:(0,c.isMobile)()?"xxxs":"xxs",className:"accumulators-stats__title-text"},C)),o().createElement(s.Text,{size:A,className:"accumulators-stats__history"},k?null===(r=N[0])||void 0===r?void 0:r.map((function(t,e){return o().createElement(f,{ticks_history_counter_testid:"dt_accu_stats_history_counter",key:e,value:t,has_progress_dots:0===e})})):o().createElement("div",{className:"accumulators-stats__history-heading"},(0,l.localize)("Number of ticks")))),i&&!k&&o().createElement(o().Fragment,null,o().createElement(s.DesktopWrapper,null,o().createElement(d,{history_text_size:A,rows:N})),o().createElement(s.MobileWrapper,null,o().createElement(s.MobileDialog,{onClose:function(){return O(!k)},portal_element_id:"modal_root",title:C,visible:!k,wrapper_classname:"accumulators-stats"},o().createElement(d,{history_text_size:A,rows:N})))),i&&o().createElement(s.Icon,{icon:k?"IcArrowUp":"IcArrowDown",onClick:function(){return O(!k)},className:"accordion-toggle-arrow",data_testid:"dt_accordion-toggle-arrow"})):null}))},"./src/Modules/Contract/Components/Digits/index.ts":(t,e,r)=>{"use strict";r.d(e,{Z:()=>T});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("react"),a=r.n(i),s=r("mobx"),c=r("@deriv/components"),l=r("@deriv/shared"),u=r("@deriv/translations"),f=r("./src/App/Components/Animations/index.js"),p=r("mobx-react");const d=function(t){var e=t.is_latest,r=t.is_lost,n=t.is_selected,i=t.is_won,s=t.percentage,c=t.value,l=s&&!isNaN(s)?parseFloat(s.toFixed(1)):null;return a().createElement(a().Fragment,null,a().createElement("span",{className:o()("digits__digit-value",{"digits__digit-value--latest":e,"digits__digit-value--selected":n,"digits__digit-value--win":i&&e,"digits__digit-value--loss":r&&e})},a().createElement("i",{className:o()("digits__digit-display-value",{"digits__digit-display-value--no-stats":!l})},c),!!l&&a().createElement("i",{className:"digits__digit-display-percentage"},l,"%")))};const h=function(t){var e=t.current_spot,r=t.is_selected_winning,n=t.is_lost,i=t.is_won;return a().createElement(a().Fragment,null,a().createElement(c.Text,{size:"xs",align:"center",weight:"bold",className:"digits__digit-spot-value","data-testid":"dt_digits_digit_spot_value"},null==e?void 0:e.slice(0,-1)),a().createElement("span",{className:o()("digits__digit-spot-last",{"digits__digit-spot-last--selected-win":r,"digits__digit-spot-last--win":i,"digits__digit-spot-last--loss":n}),"data-testid":"dt_digits_digit_spot_last"},null==e?void 0:e.slice(-1)))};const m=function(t){var e=t.is_max,r=t.is_min,n=t.is_selected,i=t.percentage,s=((null!=i?i:0)-10)/4;s=((s=Math.min(Math.max(s,-1),1))+1)/2*.85+.15;var c=339.292,l=(20*(null!=i?i:0)-102)/3/100;return l=Math.max(Math.min(l,.66),.06),a().createElement("div",{className:o()("digits__pie-container",{"digits__pie-container--selected":n})},a().createElement("svg",{className:"digits__pie-progress",width:"120",height:"120",viewBox:"0 0 120 120"},a().createElement("circle",{className:"progress__bg",cx:"60",cy:"60",r:"54",fill:"none",stroke:"#E8EEFC",strokeWidth:"12","data-testid":"dt_progress_bg"}),i&&a().createElement("circle",{className:o()("progress__value",{"progress__value--is-max":e,"progress__value--is-min":r}),cx:"60",cy:"60",r:"54",fill:"none",strokeOpacity:e||r?1:s,strokeWidth:"12",strokeDasharray:[c*l,c*(1-l)].join(" "),strokeDashoffset:c*((l+1)/2),"data-testid":"dt_progress_value"})))};const y=(0,p.observer)((function(t){var e=t.barrier,r=t.is_digit_contract,n=t.has_entry_spot,i=t.is_lost,s=t.is_max,u=t.is_min,p=t.is_won,y=t.onSelect,_=t.latest_digit,v=t.selected_digit,b=t.status,g=t.stats,w=t.value,x=t.onLastDigitSpot,E=_.digit,S=_.spot,k=w===E,O=w===e,j=E===e,P=g?100*g/1e3:null;a().useEffect((function(){x&&x({spot:S,is_lost:i,is_selected_winning:j,is_latest:k,is_won:p})}),[_,S,e,w,i,j,k,p,x]);var L=(0,l.isMobile)()&&"function"==typeof y&&!b,C=(0,l.isMobile)()&&w===v&&!b;return a().createElement("div",{className:o()("digits__digit",{"digits__digit--latest":k,"digits__digit--win":p&&k,"digits__digit--loss":i&&k,"digits__digit--is-selectable":L,"digits__digit--is-selected":C}),onClick:function(){L&&y(w)}},a().createElement(m,{is_min:u,is_max:s,is_selected:O,percentage:P}),a().createElement(c.DesktopWrapper,null,a().createElement(f.s,{is_visible:!!(r&&k&&S&&b&&n),className:"digits__digit-spot",keyname:"digits__digit-spot"},a().createElement(h,{current_spot:S,is_lost:i,is_selected_winning:j,is_won:p}))),a().createElement(d,{is_latest:k,is_lost:i,is_selected:O,is_won:p,percentage:P,value:w}))}));const _=function(t){var e=t.is_lost,r=t.is_trade_page,n=t.is_won,i=t.position;return a().createElement(a().Fragment,null,!!i&&a().createElement("span",{className:"digits__pointer",style:{transform:"translate3d(calc(".concat(i.left,"px), ").concat(i.top,"px, 0px)")}},a().createElement(c.Icon,{icon:"IcProfit",className:o()("digits__icon",{"digits__icon--win":n&&!r,"digits__icon--loss":e&&!r}),color:n?"green":"red",custom_color:n||e?void 0:"var(--brand-orange)"})))};function v(t){return function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var x=Array.from(Array(10).keys());const E=(0,p.observer)((function(t){var e=t.barrier,r=t.contract_type,n=t.digits,i=t.digits_info,s=t.dimension,c=t.is_digit_contract,u=t.has_entry_spot,f=t.is_ended,p=t.is_trade_page,d=t.onDigitChange,h=t.onLastDigitSpot,m=t.selected_digit,g=t.status,w=t.tick,E=t.trade_type,S=b(a().useState({0:{left:6,top:0},1:{left:6+1*s,top:0},2:{left:6+2*s,top:0},3:{left:6+3*s,top:0},4:{left:6+4*s,top:0},5:{left:6+5*s,top:0},6:{left:6+6*s,top:0},7:{left:6+7*s,top:0},8:{left:6+8*s,top:0},9:{left:6+9*s,top:0}}),1)[0],k=b(a().useState({0:{left:6,top:-60},1:{left:6+1*s,top:-60},2:{left:6+2*s,top:-60},3:{left:6+3*s,top:-60},4:{left:6+4*s,top:-60},5:{left:6+0*s,top:8},6:{left:6+1*s,top:8},7:{left:6+2*s,top:8},8:{left:6+3*s,top:8},9:{left:6+4*s,top:8}}),1)[0],O=function(t){P()&&t!==m&&"function"==typeof d&&d({target:{name:"last_digit",value:t}})},j=function(){return(0,l.isMobile)()?k:S},P=function(){return!!(0,l.isMobile)()&&"even_odd"!==E},L=Object.keys(i).sort((function(t,e){return+t-+e})).map((function(t){return i[+t]})).slice(-1)[0]||{},C=f&&"won"===g&&c,T=f&&"lost"===g&&c,A=n?Math.min.apply(Math,v(n)):null,N=n?Math.max.apply(Math,v(n)):null,I=w?+w.pip_size:null,M=null!=w&&w.ask&&I?w.ask.toFixed(I):null,D=M?+(M.split("").pop()||""):null,R=w?j()[null!=D?D:-1]:j()[L.digit],z=C||T?L:{digit:D,spot:M};return a().createElement("div",{className:o()("digits",{"digits--trade":p})},x.map((function(t){return a().createElement(y,{barrier:(o=t,i={DIGITMATCH:function(t){return t===e},DIGITDIFF:function(t){return t!==e&&!!e&&!isNaN(e)},DIGITOVER:function(t){return!(!t||!e)&&t>e},DIGITUNDER:function(t){return!(!t||!e)&&t<e},DIGITODD:function(t){return!!t&&Boolean(t%2)},DIGITEVEN:function(t){return!(!t||t%2)}},r&&i[r]&&i[r](o)?o:null),has_entry_spot:u,is_digit_contract:c,is_lost:T,is_won:C,key:t,is_max:n?n[t]===N:null,is_min:n?n[t]===A:null,stats:n?n[t]:null,status:g,latest_digit:p?z:L,value:t,onLastDigitSpot:h,onSelect:P()?O:null,selected_digit:P()?m:void 0});var o,i})),a().createElement(_,{is_lost:T,is_trade_page:p,is_won:C,position:R}))}));var S=["contract_info","digits_array","digits_info","display_status","is_digit_contract","is_ended","is_trade_page","onDigitChange","selected_digit","trade_type","onChangeStatus"];function k(){return k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},k.apply(this,arguments)}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var L=function(t){var e=t.contract_info,r=t.digits_array,n=t.digits_info,o=t.display_status,i=t.is_digit_contract,c=t.is_ended,u=t.is_trade_page,f=t.onDigitChange,p=t.selected_digit,d=t.trade_type,h=t.onChangeStatus,m=P(t,S),y=e.date_start,_=m.tick,v=!u||!!_,b=!!u&&(0,l.isContractElapsed)(e,_),g=!b&&v?o:null;if(y&&!b){_=null;var w=e.tick_stream;if(null!=w&&w.length){var x,k=(0,s.toJS)(w.slice(-1)[0]);_={ask:k.tick,bid:k.tick,epoch:k.epoch,pip_size:null===(x=k.tick_display_value)||void 0===x?void 0:x.split(".")[1].length,current_tick:w.length}}}return a().useEffect((function(){h&&h({status:g,current_tick:_&&"current_tick"in _?_.current_tick:null})}),[_,u,o,h,g]),a().createElement(E,{dimension:(0,l.isMobile)()?64:52,has_entry_spot:!!e.entry_tick,barrier:!b&&v?Number(e.barrier):null,contract_type:!b&&v?e.contract_type:"",digits:r,digits_info:!b&&v?n:{},is_digit_contract:i,is_ended:c,is_trade_page:u,status:g,tick:_,trade_type:d,onDigitChange:f,selected_digit:p,onLastDigitSpot:m.onLastDigitSpot})},C=a().memo((function(t){var e,r=O(a().useState(),2),n=r[0],i=r[1],s=O(a().useState(),2),p=s[0],d=s[1],m=O(a().useState(),2),y=m[0],_=m[1],v=O(a().useState(),2),b=v[0],g=v[1],w=O(a().useState(),2),x=w[0],E=w[1],S=O(a().useState(),2),j=S[0],P=S[1],C=(0,l.useIsMounted)(),T=t.contract_info,A=t.digits_array,N=t.is_digit_contract,I=t.is_trade_page,M=t.underlying;return a().createElement(a().Fragment,null,a().createElement(c.DesktopWrapper,null,a().createElement(f.o,{is_visible:(A||N)&&C(),className:"digits__container",keyname:"digits",type:"bottom"},I&&a().createElement("div",{className:"digits__tooltip-container"},a().createElement(c.Popover,{alignment:"top",classNameBubble:"digits__tooltip-bubble",icon:"info",id:"dt_last_digits_info_tooltip",margin:4,message:(e=I?M:T.underlying,a().createElement(u.Localize,{i18n_default_text:"Last digit stats for latest 1000 ticks for {{underlying_name}}",values:{underlying_name:(0,l.getMarketNamesMap)()[null==e?void 0:e.toUpperCase()]}}))})),a().createElement(L,t))),a().createElement(c.MobileWrapper,null,a().createElement("div",{className:"digits__container"},a().createElement(f.s,{is_visible:!!(N&&n&&y&&T.entry_tick),className:o()("digits__digit-spot",{"digits__digit-spot--is-trading":I}),keyname:"digits__digit-spot"},I&&a().createElement(c.Text,{size:"xs",align:"center",className:"digits__digit-spot-value"},a().createElement(u.Localize,{i18n_default_text:"Tick {{current_tick}} - ",values:{current_tick:p}})),a().createElement(h,{current_spot:y,is_lost:j,is_selected_winning:b,is_won:x})),a().createElement(L,k({},t,{onChangeStatus:function(t){i(t.status),d(t.current_tick)},onLastDigitSpot:function(t){_(t.spot),P(t.is_lost),g(t.is_selected_winning),E(t.is_won)}})))))}));C.displayName="Digits";const T=C},"./src/Modules/Page404/index.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var n=r("react"),o=r.n(n),i=r("@deriv/components"),a=r("@deriv/shared"),s=r("@deriv/translations");const c=function(){return o().createElement(i.PageError,{header:(0,s.localize)("We couldn’t find that page"),messages:[(0,s.localize)("You may have followed a broken link, or the page has moved to a new address."),(0,s.localize)("Error code: {{error_code}} page not found",{error_code:404})],redirect_urls:[a.routes.trade],redirect_labels:[(0,s.localize)("Return to trade")],classNameImage:"page-404__image",image_url:(0,a.getUrlBase)("/public/images/common/404.png")})}},"./src/Modules/SmartChart/Components/Markers/marker.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r("mobx"),o=r("../../node_modules/prop-types/index.js"),i=r.n(o),a=r("react"),s=r.n(a),c=r("./src/Modules/SmartChart/index.js"),l=["ContentComponent"];function u(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var f=function(t){var e=t.marker_config,r=t.marker_content_props,o=t.is_bottom_widget_visible,i=e.ContentComponent,a=u(e,l),f=s().useCallback((function(){return s().createElement(i,(0,n.toJS)(r))}),[r]);return s().createElement(c.KW,{markerRef:function(t){if(t){if(!a.y){var e=24+(o?115:0);t.div.style.height="calc(100% - ".concat(e,"px)"),t.div.style.zIndex="-1"}t.setPosition({epoch:+a.x,price:+a.y})}}},f())};f.propTypes={is_bottom_widget_visible:i().bool,marker_config:i().object,marker_content_props:i().object};const p=f},"./src/Modules/SmartChart/Components/all-markers.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>D});var n=r("react"),o=r.n(n),i=r("@deriv/shared"),a=r("./src/Modules/SmartChart/index.js"),s=function(t){if(!window.DOMParser)return null;var e=(new window.DOMParser).parseFromString(t,"image/svg+xml").children[0],r=e.attributes,n=r.width,o=r.height;n=1*n.value,o=1*o.value;var i=[];return[].forEach.call(e.children,(function(t){var e=t.attributes,r=e.d,n=e.fill,o=e.stroke;i.push({points:r.value.match(/M|C|H|A|L|V|-?\d*(\.\d+)?/g).filter((function(t){return t})).map((function(t){return-1==="MCHALV".indexOf(t)?1*t:t})),fill:n&&n.value,stroke:o&&o.value})})),{width:n,height:o,paths:i,with_color:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white";return{width:n,height:o,paths:i.map((function(r){var n=r.points,o=r.fill;return{points:n,stroke:r.stroke,fill:"white"!==o?t:e}}))}}}},c=s('\n<svg width="15" height="20" viewBox="0 0 15 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7,20 C11.2,14.4 14,10.8659932 14,7 C14,3.13400675 10.8659932,0 7,0 C3.13400675,0 0,3.13400675 0,7 C0,10.8659932 2.8,14.4 7,20 Z" fill="#333333"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="A7 7 4.2 0 6.283185307179586" fill="white" />\n</svg>'),l=s('\n<svg width="19" height="20" viewBox="0 0 19 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L18 2L18 12L2 12Z" fill="white" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2,0 L2,1 L19,1 L19,12 L2,12 L2,20 L1,20 L1,0 L2,0 Z M18,8 L15,8 L15,11 L18,11 L18,8 Z M12,8 L9,8 L9,11 L12,11 L12,8 Z M6,8 L3,8 L3,11 L6,11 L6,8 Z M15,5 L12,5 L12,8 L15,8 L15,5 Z M9,5 L6,5 L6,8 L9,8 L9,5 Z M6,2 L3,2 L3,5 L6,5 L6,2 Z M18,2 L15,2 L15,5 L18,5 L18,2 Z M12,2 L9,2 L9,5 L12,5 L12,2 Z" fill="#333333"/>\n</svg>\n');function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}var f=["epoch_array","price_array"];function p(t,e){return _(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||m(t,e)||h()}function d(t){return _(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||m(t)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t,e){if(t){if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _(t){if(Array.isArray(t))return t}function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var x=navigator.userAgent.search("Firefox")>0,E=function(t){return function(e){var r=e.epoch_array,n=e.price_array,i=w(e,f);return o().createElement(a.If,{epoch_array:r,price_array:n,draw_callback:function(e){return t(b(b({},e),i))}})}},S={accu_contract_shade:"#00a79e14",accu_shade:"#377cfc14",accu_shade_crossed:"#cc2e3d14",bg:"#0e0e0e",fg:"#ffffff",grey_border:"#6e6e6e",lost:"#cc2e3d",open:"#377cfc",sold:"#ffad3a",won:"#00a79e"},k={accu_contract_shade:"#4bb4b314",accu_shade:"#377cfc14",accu_shade_crossed:"#ec3f3f14",bg:"#ffffff",fg:"#333333",grey_border:"#999999",lost:"#ec3f3f",open:"#377cfc",sold:"#ffad3a",won:"#4bb4b3"};function O(t){var e=t.status,r=t.profit,n=t.is_dark_theme,o=t.is_vanilla,i=n?S:k,a=i[e||"open"];return o?"open"===e?i.open:i[r>0?"won":"lost"]:("open"===e&&r&&(a=i[r>0?"won":"lost"]),a)}var j=function(t){return t?Math.max(Math.min(Math.sqrt(t/18),1.2),.8):1},P=[],L=function(t,e){if(0===P.length)for(var r=255;r>=0;--r)P[r]=(r<16?"0":"")+r.toString(16);var n=Math.floor(255*Math.min(Math.max(e-t-10,0)/6,1));return P[n]},C=function(t,e){var r=e.zoom,n=e.top,o=e.left,i=e.icon;t.save();var a=j(r);t.translate(o-i.width*a/2,n-i.height*a/2),t.scale(a,a),i.paths.forEach((function(e){var r,n,o=e.points,i=e.fill,a=e.stroke;i&&(t.fillStyle=i),a&&(t.strokeStyle=a),t.beginPath();for(var s=0;s<o.length;s++){var c=void 0,l=void 0,u=void 0,f=void 0,p=void 0,d=void 0,h=void 0;if("M"===o[s])c=o[++s],l=o[++s],t.moveTo(c,l);else if("L"===o[s])c=o[++s],l=o[++s],t.lineTo(c,l);else if("V"===o[s])l=o[++s],t.lineTo(r,l);else if("H"===o[s])c=o[++s],t.lineTo(c,n);else if("Q"===o[s])u=o[++s],p=o[++s],c=o[++s],l=o[++s],t.quadraticCurveTo(u,p,c,l);else if("C"===o[s])u=o[++s],p=o[++s],f=o[++s],d=o[++s],c=o[++s],l=o[++s],t.bezierCurveTo(u,p,f,d,c,l);else if("A"===o[s]){c=o[++s],l=o[++s],h=o[++s];var m=o[++s],y=o[++s];t.arc(c,l,h,m,y)}r=c,n=l}t.closePath(),i&&t.fill(),a&&t.stroke()})),t.scale(1,1),t.restore()},T=function(t){var e,r=t.coordinates,n=t.ctx,o=t.labels,i=t.has_persistent_borders,a=t.previous_tick,s=t.scale,c=t.shade_color,l=t.stroke_color;n.save();var u=r.bottom,f=r.start_left,p=r.top,d=null!==(e=r.end_left)&&void 0!==e?e:n.canvas.offsetWidth-n.canvas.parentElement.stx.panels.chart.yaxisTotalWidthRight,h=n.canvas.offsetHeight-n.canvas.parentElement.stx.xaxisHeight,m=p<h&&(p>=0||!i),y=u<h,_=m?p:p<0&&i?2:h,v=y?u:h,b=f<d,g=u-Math.abs(u-p)/2;if(b){if(n.lineWidth=1,n.strokeStyle=l,n.setLineDash([]),n.font=null==o?void 0:o.font,n.textAlign="right",(m||i)&&(n.fillStyle=l,null!=o&&o.top&&n.fillText(null==o?void 0:o.top,d-1,_-10),n.beginPath(),n.moveTo(d,_),n.lineTo(f-2.5,_),n.lineTo(f,_+4.5),n.lineTo(f+2.5,_),n.fill(),n.stroke()),g<h&&a){var w=a||{},x=w.draw_line_without_tick_marker,E=w.radius,S=w.stroke_color;n.fillStyle=S,n.globalCompositeOperation="destination-over",S&&!x&&(n.strokeStyle=S,n.beginPath(),n.arc(f-1*s,g,E,0,2*Math.PI),n.fill(),n.stroke()),n.strokeStyle=l,n.beginPath(),n.setLineDash([2,4]),n.moveTo(f+(E||0),g),n.lineTo(d,g),n.stroke(),n.globalCompositeOperation="source-over"}(y||i)&&(n.fillStyle=l,null!=o&&o.bottom&&v+12<h&&n.fillText(null==o?void 0:o.bottom,d-1,v+12),n.beginPath(),n.setLineDash([]),n.moveTo(d,v),n.lineTo(f-2.5,v),n.lineTo(f,v-4.5),n.lineTo(f+2.5,v),n.fill(),n.stroke()),n.fillStyle=c,n.fillRect(f,_,d-f,Math.abs(v-_)),n.restore()}},A=function(t){var e=t.ctx,r=t.text,n=t.tick,o=n.zoom,i=n.left,a=n.top,s=j(o),c=Math.floor(3*s+7);e.font="".concat(c,"px Roboto"),r.split(/\n/).forEach((function(t,r){var n=Math.ceil(e.measureText(t).width);e.fillText(t,i-5-n,a+r*c+1)}))},N=function(t){var e=t.ctx,r=t.color,n=t.is_dark_theme,o=t.text,i=t.left,a=t.top,s=t.scale;e.save(),e.textAlign="center";var c=Math.floor(12*s);e.font="bold ".concat(c,"px BinarySymbols, Roboto"),r&&(e.fillStyle=r),x||(e.shadowColor=n?"rgba(16,19,31,1)":"rgba(255,255,255,1)",e.shadowBlur=12);for(var l=0;l<(x?1:5);++l)e.fillText(o,i,a);e.restore()},I=E((function(t){var e=t.ctx,r=t.canvas_height,n=d(t.points),o=n[0],a=n.slice(1),s=p(t.prices,2),u=s[0],f=s[1],h=t.is_last_contract,m=t.is_dark_theme,y=t.is_in_contract_details,_=t.granularity,v=t.contract_info,b=v.accu_barriers_difference,g=v.contract_type,w=v.exit_tick_time,x=v.status,E=v.profit,S=v.has_crossed_accu_barriers,k=v.is_accumulator_trade_without_contract,P=v.is_sold,I=v.is_expired,M=v.tick_count,D=e,R=(0,i.isAccumulatorContract)(g),z=R?(0,i.getContractStatus)({contract_type:g,profit:E,exit_tick_time:w,status:x}):x,G=R&&"open"!==z,F=O({is_dark_theme:m,status:z,profit:P||G?E:null}),B=h&&o.visible&&!P,U=j(o.zoom),V=r/window.devicePixelRatio;[u,f].filter(Boolean).forEach((function(t){t=Math.min(Math.max(t,2),V-32)}));var H=a[0],q=a[a.length-1],W=a[a.length-2]||q,Y=P?L(o.left,q.left):"";if(o&&k)T({coordinates:{bottom:f,start_left:o.left,top:u},ctx:D,labels:b,previous_tick:{stroke_color:O({status:"fg",is_dark_theme:m})+Y,radius:1.5*U},scale:U,shade_color:O({status:S?"accu_shade_crossed":"accu_shade",is_dark_theme:m}),stroke_color:O({status:S?"lost":"open",is_dark_theme:m})});else{if(u&&f&&((W||q)&&R&&y||!g&&o)){var Z=R&&"open"===z?null==q?void 0:q.left:null==W?void 0:W.left;T({coordinates:{bottom:f,start_left:y?Z:o.left,top:u},ctx:D,has_persistent_borders:y,labels:!y&&b,previous_tick:{draw_line_without_tick_marker:y,stroke_color:F+Y,radius:1.5*U},scale:U,shade_color:O({status:S||"lost"===z?"accu_shade_crossed":"accu_contract_shade",is_dark_theme:m}),stroke_color:O({status:S||"lost"===z?"lost":"won",is_dark_theme:m})})}if(!y)if(D.save(),D.strokeStyle=F,D.fillStyle=F,B&&(A({ctx:D,text:"Start\nTime",tick:{zoom:o.zoom,left:o.left-1*U,top:V-50}}),D.beginPath(),D.setLineDash([3,3]),D.moveTo(o.left-1*U,0),a.length&&u&&!R&&(D.lineTo(o.left-1*U,u-34*U),D.moveTo(o.left-1*U,u+4*U)),D.lineTo(o.left-1*U,r),D.stroke()),a.length&&u){if((o.visible||H.visible||q.visible)&&(!R||G)){var $=R?H.top:u;D.strokeStyle=F+Y,D.beginPath(),D.setLineDash([1,1]),D.moveTo(o.left,$),D.lineTo(H.left,$),D.stroke(),D.beginPath(),D.setLineDash([]),D.moveTo(H.left,$),D.lineTo(q.left,$),D.stroke(),D.strokeStyle=F}!h||0!==_||P||R||(a.filter((function(t){return t.visible})).forEach((function(t){var e=t===q?F:O({status:"fg",is_dark_theme:m});D.fillStyle=e+Y,D.beginPath(),D.arc(t.left-1*U,t.top,1.5*U,0,2*Math.PI),D.fill()})),D.fillStyle=F),0===_&&([H,I||G?q:null].forEach((function(t){t&&t.visible&&(D.strokeStyle=F+Y,D.setLineDash([2,2]),D.beginPath(),D.moveTo(t.left-1*U,t.top),t===H&&R?D.lineTo(o.left-1*U,H.top):t===q&&R?(D.moveTo(q.left,H.top),D.lineTo(q.left,q.top)):D.lineTo(t.left-1*U,u),D.stroke(),D.fillStyle=F+Y,D.beginPath(),D.arc(t.left-1*U,t.top,3*U,0,2*Math.PI),D.fill(),t===H&&(D.beginPath(),D.fillStyle=O({status:"bg",is_dark_theme:m})+Y,D.arc(t.left-1*U,t.top,2*U,0,2*Math.PI),D.fill()))})),D.strokeStyle=F,D.fillStyle=F),!o.visible||P||R||N({ctx:D,scale:U,is_dark_theme:m,text:"".concat(a.length-1,"/").concat(M),left:o.left,top:u-27*U}),o.visible&&C(D,{top:R?H.top-9*U:u-9*U,left:o.left-1*U,zoom:o.zoom,icon:c.with_color(F+(P?Y:""),O({status:"bg",is_dark_theme:m})+(P?Y:""))}),q.visible&&(P||G)&&(C(D,{top:R?H.top-9*U:u-9*U,left:q.left+8*U,zoom:q.zoom,icon:l.with_color(F,O({status:"bg",is_dark_theme:m}))}),G&&T({coordinates:{bottom:f,end_left:q.left,start_left:null==W?void 0:W.left,top:u},ctx:D,previous_tick:{stroke_color:F+Y,radius:1.5*U},scale:U,shade_color:O({status:S||"lost"===z?"accu_shade_crossed":"accu_contract_shade",is_dark_theme:m}),stroke_color:O({status:S||"lost"===z?"lost":"won",is_dark_theme:m})})),D.restore()}else D.restore()}})),M={AUD:"A$",EUR:"€",GBP:"£",JPY:"¥",USD:"$",BTC:"₿",BCH:"",ETH:"E",ETC:"",LTC:"Ł",UST:"₮"};const D={TickContract:I,NonTickContract:E((function(t){var e=t.ctx,r=t.canvas_height,n=p(t.points,4),o=n[0],a=n[1],s=n[2],u=n[3],f=t.is_last_contract,d=p(t.prices,3),h=d[0],m=d[1],y=d[2],_=t.is_dark_theme,v=t.granularity,b=t.currency,g=t.contract_info,w=g.contract_type,x=g.is_sold,E=g.status,S=g.profit,k=e;0!==v&&(s&&(s.top=m),u&&(u.top=y));var P=O({status:E,profit:S,is_dark_theme:_,is_vanilla:(0,i.isVanillaContract)(w)});k.save(),k.strokeStyle=P,k.fillStyle=P;var T=f&&o.visible&&!x,I=f&&!x&&S&&o.visible&&h,D=j(o.zoom),R=x?L(o.left,a.left):"",z=r/window.devicePixelRatio;if(h&&(h=Math.min(Math.max(h,2),z-32)),T&&(A({ctx:k,text:"Start\nTime",tick:{zoom:o.zoom,left:o.left-1*D,top:z-50}}),k.beginPath(),k.setLineDash([3,3]),k.moveTo(o.left-1*D,0),h&&(k.lineTo(o.left-1*D,h-(I?38:20)*D),k.moveTo(o.left-1*D,h+4*D)),k.lineTo(o.left-1*D,r),k.stroke()),h&&s&&(o.visible||a.visible||Math.sign(o.left)!==Math.sign(a.left))&&(k.strokeStyle=P+R,k.beginPath(),k.setLineDash([1,1]),k.moveTo(o.left,h),k.lineTo(s.left,h),k.stroke(),k.beginPath(),k.setLineDash([]),k.moveTo(s.left,h),k.lineTo(a.left,h),k.stroke(),k.strokeStyle=P),[s,u].forEach((function(t){t&&t.visible&&(k.strokeStyle=P+R,k.setLineDash([2,2]),k.beginPath(),k.moveTo(t.left-1*D,t.top),k.lineTo(t.left-1*D,h),k.stroke(),k.fillStyle=P+R,k.beginPath(),k.arc(t.left-1*D,t.top,3*D,0,2*Math.PI),k.fill(),t===s&&(k.beginPath(),k.fillStyle=O({status:"bg",is_dark_theme:_})+R,k.arc(t.left-1*D,t.top,2*D,0,2*Math.PI),k.fill()),k.fillStyle=P,k.strokeStyle=P)})),o&&o.visible&&h&&C(k,{top:h-9*D,left:o.left-1*D,zoom:o.zoom,icon:c.with_color(P+R)}),I){var G=M[b]||"",F=(0,i.getDecimalPlaces)(b),B="".concat(S<0?"-":S>0?"+":" ").concat(G).concat(Math.abs(S).toFixed(F));N({ctx:k,color:O({status:"open",profit:S}),scale:D,text:B,is_dark_theme:_,left:o.left,top:h-28*D})}a.visible&&C(k,{top:h-9*D,left:a.left+8*D,zoom:a.zoom,icon:l.with_color(P,O({status:"bg",is_dark_theme:_}))}),k.restore()})),DigitContract:E((function(t){var e=t.ctx,r=d(t.points),n=r[0],o=r.slice(1),i=p(t.prices,2),a=i[0],s=i[1],u=t.is_last_contract,f=t.is_dark_theme,h=t.granularity,m=t.contract_info,y=m.status,_=m.profit,v=m.is_sold,b=m.tick_stream,g=m.tick_count,w=e,x=O({is_dark_theme:f,status:y,profit:v?_:null});w.save(),w.strokeStyle=x,w.fillStyle=x;var E=u&&n.visible&&!v,S=j(n.zoom);if(0!==h&&n&&a&&(n.top=a),E&&(w.beginPath(),w.setLineDash([3,3]),w.moveTo(n.left-1*S,0),o.length&&(w.lineTo(n.left-1*S,n.top-34*S),w.moveTo(n.left-1*S,n.top+4*S)),w.lineTo(n.left-1*S,w.canvas.height),w.stroke()),o.length){var k=o[o.length-1],P=v?L(n.left,k.left):"";0!==h&&k&&s&&(k.top=s),n.visible&&n.top&&!v&&N({ctx:w,scale:S,is_dark_theme:f,text:"".concat(o.length,"/").concat(g),left:n.left-1*S,top:n.top-27*S}),!n.visible||0!==h&&v||C(w,{top:n.top-9*S,left:n.left-1*S,zoom:n.zoom,icon:c.with_color(x+P,O({status:"bg",is_dark_theme:f})+P)}),o.forEach((function(t,e){if(t===k&&t.visible&&(0===h||t===k)&&(0===h||t!==k||v)){var r=t!==k?O({status:"fg",is_dark_theme:f}):x;w.beginPath(),w.fillStyle=r,w.arc(t.left,t.top,7*S,0,2*Math.PI),w.fill(),w.beginPath(),w.fillStyle=v?x:O({status:"bg",is_dark_theme:f}),w.arc(t.left,t.top,6*S,0,2*Math.PI),w.fill();var n=b[e].tick_display_value.slice(-1);w.fillStyle=v?"white":r,w.textAlign="center",w.shadowBlur=0,w.font="bold ".concat(12*S,"px BinarySymbols, Roboto"),w.fillText(n,t.left,t.top)}})),k.visible&&v&&(w.fillStyle=x,C(w,{top:k.top-16*S,left:k.left+8*S,zoom:k.zoom,icon:l.with_color(x,O({status:"bg",is_dark_theme:f}))})),w.restore()}else w.restore()}))}},"./src/Modules/SmartChart/Components/bottom-widgets.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r.n(i),s=function(t){var e=t.Widget;return a().createElement("div",{className:"bottom-widgets"},e)};s.propTypes={Widget:o().node};const c=s},"./src/Modules/SmartChart/Components/top-widgets.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>b});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r.n(i),s=r("react-dom"),c=r.n(s),l=r("@deriv/components"),u=r("@deriv/translations"),f=r("@deriv/shared"),p=r("./src/Modules/SmartChart/index.js"),d=r("./src/Modules/SmartChartBeta/index.js"),h=r("./src/Modules/Trading/Helpers/contract-type.tsx"),m=r("../stores/src/index.ts");const y=(0,m.Pi)((function(){var t,e,r,n=document.getElementById("popup_root"),o=(0,m.oR)().modules.trade,i=o.contract_purchase_toast_box,s=o.clearContractPurchaseToastBox;if(a().useEffect((function(){var t=setTimeout((function(){s()}),4e3);return function(){clearTimeout(t)}}),[s,i]),!n||!i)return a().createElement(a().Fragment,null);var f=i.buy_price,p=i.currency,d=i.contract_type,y=i.list,_={value:d},v=null===(t=(0,h.vt)(y,_))||void 0===t||null===(e=t.contract_types)||void 0===e||null===(r=e.find((function(t){return t.value===d})))||void 0===r?void 0:r.text;return c().createPortal(a().createElement(l.MobileWrapper,null,a().createElement(l.Toast,{className:"dc-toast-popup-mobile",is_open:!!i.key,timeout:0,type:"notification"},a().createElement(l.Text,{as:"p",size:"xxs",className:"dc-toast__notification"},a().createElement(u.Localize,{i18n_default_text:"The purchase of <0>{{trade_type_name}} contract</0> has been completed successfully for the amount of <0> {{buy_price}} {{currency}}</0>",components:[a().createElement("strong",{key:0})],values:{trade_type_name:v,buy_price:f,currency:p},shouldUnescape:!0})))),n)}));var _=(0,m.Pi)((function(){var t=(0,m.oR)(),e=t.contract_trade,r=t.client,n=e.granularity,o=e.filtered_contracts,i=e.markers_array,s=r.is_beta_chart?o[o.length-1]:i[i.length-1];if(!s||!s.contract_info.tick_stream||(0,f.isAccumulatorContract)(s.contract_info.contract_type))return null;if((0,f.isEnded)(s.contract_info)||0!==n)return null;var c=s.contract_info,p=c.contract_type,d=c.tick_stream,h=c.tick_count,y=(0,f.isDigitContract)(p)?d.length:Math.max(d.length-1,0);return a().createElement(l.Text,{weight:"bold",className:"recent-trade-info"},(0,u.localize)("Tick")," ",y,"/",h)})),v=function(t){var e=t.InfoBox,r=t.is_mobile,n=t.is_title_enabled,o=void 0===n||n,i=t.onSymbolChange,s=t.y_axis_width,u=t.theme,f=t.open_market,h=t.open,m=t.is_digits_widget_active,v=t.is_beta_chart?d.bL:p.oP,b=a().createElement(v,{open_market:f,open:h,enabled:o,onChange:i,searchInputClassName:"data-hj-whitelist",isNestedList:r,portalNodeId:r?"deriv_app":void 0}),g=c().createPortal(a().createElement("div",{className:"smartcharts-".concat(u)},a().createElement("div",{className:"top-widgets-portal",style:{width:"calc(100% - ".concat(s?s+5:0,"px)")}},r&&a().createElement(y,null),b,!m&&a().createElement(_,null))),document.getElementById("app_contents"));return a().createElement(a().Fragment,null,e,a().createElement(l.MobileWrapper,null,g),a().createElement(l.DesktopWrapper,null,b))};v.propTypes={InfoBox:o().node,is_digits_widget_active:o().bool,is_mobile:o().bool,is_title_enabled:o().bool,onSymbolChange:o().func,open:o().bool,open_market:o().object,theme:o().string,y_axis_width:o().number,is_beta_chart:o().bool};const b=v},"./src/Modules/SmartChart/index.js":(t,e,r)=>{"use strict";r.d(e,{If:()=>_,KW:()=>y,NU:()=>f,Xb:()=>c,as:()=>d,av:()=>m,kO:()=>h,mB:()=>p,oP:()=>l,oY:()=>u});var n,o=r("react"),i=r.n(o),a=r("@deriv/shared"),s=function(t){return function(){return n||(n=(0,a.moduleLoader)((function(){return Promise.resolve().then(r.t.bind(r,"@deriv/deriv-charts",23))}))).then((function(t){(0,t.setSmartChartsPublicPath)((0,a.getUrlBase)("/js/smartcharts/"))})),n.then((function(e){return{default:e[t]}}))}},c=i().lazy(s("SmartChart")),l=i().lazy(s("ChartTitle")),u=(s("ChartSize"),i().lazy(s("ChartMode"))),f=i().lazy(s("DrawTools")),p=i().lazy(s("Share")),d=i().lazy(s("StudyLegend")),h=i().lazy(s("Views")),m=i().lazy(s("ToolbarWidget")),y=i().lazy(s("FastMarker")),_=i().lazy(s("RawMarker"))},"./src/Modules/SmartChartBeta/Components/Markers/marker.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r("mobx"),o=r("../../node_modules/prop-types/index.js"),i=r.n(o),a=r("react"),s=r.n(a),c=r("./src/Modules/SmartChartBeta/index.js"),l=["ContentComponent"];function u(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var f=function(t){var e=t.marker_config,r=t.marker_content_props,o=e.ContentComponent,i=u(e,l);return s().createElement(c.rq,{markerRef:function(t){if(t){if(i.y)t.div.style.zIndex="1";else{t.div.style.height="calc(100% - ".concat(24,"px)")}t.setPosition({epoch:+i.x,price:+i.y})}}},s().createElement(o,(0,n.toJS)(r)))};f.propTypes={is_bottom_widget_visible:i().bool,marker_config:i().object,marker_content_props:i().object};const p=f},"./src/Modules/SmartChartBeta/index.js":(t,e,r)=>{"use strict";r.d(e,{E_:()=>u,Xt:()=>m,bL:()=>l,cY:()=>d,es:()=>f,qN:()=>h,rq:()=>y,ry:()=>p,yU:()=>c});var n,o=r("react"),i=r.n(o),a=r("@deriv/shared"),s=function(t){return function(){return n||(n=(0,a.moduleLoader)((function(){return r.e("smart_chart_beta").then(r.t.bind(r,"../../node_modules/@deriv/deriv-charts-beta/dist/smartcharts.js",23))}))).then((function(t){(0,t.setSmartChartsPublicPath)((0,a.getUrlBase)("/js/smartchartsbeta/"))})),n.then((function(e){return{default:e[t]}}))}},c=i().lazy(s("SmartChart")),l=i().lazy(s("ChartTitle")),u=(s("ChartSize"),i().lazy(s("ChartMode"))),f=i().lazy(s("DrawTools")),p=i().lazy(s("Share")),d=i().lazy(s("StudyLegend")),h=i().lazy(s("Views")),m=i().lazy(s("ToolbarWidget")),y=i().lazy(s("FastMarker"));s("RawMarker")},"./src/Modules/Trading/Containers/smart-chart-switcher.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n=r("react"),o=r.n(n),i=r("./src/Modules/SmartChart/index.js"),a=r("./src/Modules/SmartChartBeta/index.js"),s=["is_beta"];function c(){return c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c.apply(this,arguments)}function l(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}const u=function(t){var e=t.is_beta,r=l(t,s),n=e?a.yU:i.Xb;return o().createElement(n,c({"data-testid":"SmartChart"},r))}},"./src/Modules/Trading/Containers/toast-popup.tsx":(t,e,r)=>{"use strict";r.d(e,{S:()=>v,a:()=>y});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("react"),a=r.n(i),s=r("react-dom"),c=r.n(s),l=r("@deriv/components"),u=r("../stores/src/index.ts"),f=["portal_id","children","className"];function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(){return h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},h.apply(this,arguments)}function m(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var y=function(t){var e=t.portal_id,r=void 0===e?"popup_root":e,n=t.children,i=t.className,s=m(t,f),u=document.getElementById(r);return u?c().createPortal(a().createElement(l.Toast,h({className:o()("dc-toast-popup",i)},s),n),u):null},_=function(t){var e=t.status,r=t.portal_id,n=t.message,i=p(a().useState(!1),2),s=i[0],u=i[1],f=document.getElementById(r);return f&&n?(s||"online"===e?s&&"online"===e&&setTimeout((function(){u(!1)}),1500):u(!0),c().createPortal(a().createElement(l.MobileWrapper,null,a().createElement(l.Toast,{className:o()({"dc-toast--blinker":"blinker"===e}),is_open:s,timeout:0,type:"error"},n)),f)):null},v=(0,u.Pi)((function(){var t=(0,u.oR)().common.network_status;return a().createElement(_,{portal_id:"popup_root",message:t.tooltip,status:t.class})}))},"./src/Modules/Trading/Helpers/contract-type.tsx":(t,e,r)=>{"use strict";r.d(e,{JF:()=>b,K5:()=>v,Qe:()=>h,Sh:()=>f,g_:()=>g,hM:()=>m,vt:()=>_,wu:()=>y});var n,o=r("react"),i=r.n(o),a=r("@deriv/translations");function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=function(t,e){return e.some((function(e){var r=e.submarket,n=e.symbol;return/major_pairs/i.test(r)&&t===n}))},p=(u(n={},(0,a.localize)("Ups & Downs"),"IcUpsDowns"),u(n,(0,a.localize)("Highs & Lows"),"IcHighsLows"),u(n,(0,a.localize)("Ins & Outs"),"IcInsOuts"),u(n,(0,a.localize)("Look Backs"),"IcLookbacks"),u(n,(0,a.localize)("Digits"),"IcDigits"),u(n,(0,a.localize)("Multipliers"),"IcMultiplier"),u(n,(0,a.localize)("Accumulators"),"IcCatAccumulator"),n),d=["Accumulators","Vanillas","Turbos","Multipliers","Ups & Downs","Highs & Lows","Digits"],h=function(){return{All:"IcCatAll",Accumulators:"IcCatAccumulator",Options:"IcCatOptions",Multipliers:"IcCatMultiplier",Turbos:"IcCatTurbos"}},m=function(t){return/R_|1HZ/i.test(t)&&!/1HZ150V|1HZ250V/i.test(t)},y=function(t,e){return Object.keys(t).map((function(r){var n=t[r].categories,o=t[r].name,s=n.filter((function(t){return t.value&&!e.includes(t.value)?t:void 0}));if(s.length)return{key:r,label:o,contract_types:s,icon:p[o],component:o===(0,a.localize)("Accumulators")?i().createElement("span",{className:"dc-vertical-tab__header--new"},(0,a.localize)("NEW!")):null}})).filter(Boolean)},_=function(t,e){return(null==t?void 0:t.find((function(t){var r;return null==t||null===(r=t.contract_types)||void 0===r?void 0:r.some((function(t){return t.value.includes(e.value)}))})))||{}},v=function(t,e){var r;return null===(r=_(t,e))||void 0===r?void 0:r.key},b=function(t,e){var r;return null===(r=_(t,e))||void 0===r?void 0:r.contract_types},g=function(){return c(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).sort((function(t,e){return d.indexOf(t.key)-d.indexOf(e.key)}))}},"./src/Modules/Trading/Helpers/digits.ts":(t,e,r)=>{"use strict";r.d(e,{A:()=>i,H:()=>a});var n=["even_odd","match_diff","over_under"],o=["DIGITDIFF","DIGITMATCH","DIGITOVER","DIGITUNDER","DIGITEVEN","DIGITODD"],i=function(t){return n.some((function(e){return e===t}))},a=function(t){return o.some((function(e){return e===t}))}},"./src/Stores/Modules/Trading/Helpers/contract-type.ts":(t,e,r)=>{"use strict";r.d(e,{R:()=>Z});var n=r("@deriv/shared"),o=r("./src/_common/base/server_time.js"),i=r.n(o),a=r("@deriv/translations"),s=r("./src/Stores/Modules/Trading/Helpers/start-date.ts");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),s=new j(o||[]);return n(a,"_invoke",{value:E(t,r,s)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var d={};function h(){}function m(){}function y(){}var _={};u(_,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(P([])));b&&b!==e&&r.call(b,i)&&(_=b);var g=y.prototype=h.prototype=Object.create(_);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(n,i,a,s){var l=p(t[n],t,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==c(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(l.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return m.prototype=y,n(g,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(x.prototype),u(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),u(g,s,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=P,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function u(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))}}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b,g,w,x,E,S,k,O,j,P,L,C,T,A,N,I,M,D,R,z,G,F,B,U,V,H,q,W,Y,Z=(g={},w={},x={},E={},S={},k=!1,O=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r[t.contract_type]=null!==(e=t.contract_display)&&void 0!==e?e:"",r},j=function(t,e){return-1!==t.indexOf(e)?e:t[0]},P=function(t){var e=["duration","amount"].concat(d(b[t].components)).filter((function(e){var r;return!("duration"===e&&b[t].config&&null!==(r=b[t].config)&&void 0!==r&&r.hide_duration)}));return b&&{form_components:e}},L=function(t,e){return{duration_units_list:(0,n.getPropertyValue)(g,[t,"config","durations","units_display",e])||[]}},C=function(t,e,r){var o=(0,n.getPropertyValue)(g,[e,"config","durations","units_display",r])||[],i=[];return o.forEach((function(t){i.push(t.value)})),{duration_unit:j(i,t)}},T=function(t,e,r){var o=(0,n.getPropertyValue)(g,[t,"config","durations","min_max",e])||{};return r&&(o="contract_expiry_type"in o?o[r]:{}),{duration_min_max:o}},A=function(t){return{contract_start_type:t===Number(0)?"spot":"forward"}},N=function(t,e){var r,o=(0,n.getPropertyValue)(g,[t,"config"]),i=[];return null!=o&&o.has_spot&&i.push({text:(0,a.localize)("Now"),value:Number(0)}),null!=o&&o.forward_starting_dates&&i.push.apply(i,d(o.forward_starting_dates)),{start_date:i.find((function(t){return t.value===e}))?e:null===(r=i[0])||void 0===r?void 0:r.value,start_dates_list:i}},I=d(Array(24).keys()).map((function(t){return"0".concat(t).slice(-2)})),M=d(Array(12).keys()).map((function(t){return"0".concat(5*t).slice(-2)})),D=function(t,e,r){return t&&!(0,s.Y)(t,e)&&(e.minute(Number(M.find((function(r){return(0,s.Y)(t,e.minute(+r))}))||e.format("mm"))),(0,s.Y)(t,e)||(e.minute(0),e.hour(Number(I.find((function(n){return(0,s.Y)(t,e.hour(+n),r,!0)}))||e.format("HH"))),e.minute(Number(M.find((function(r){return(0,s.Y)(t,e.minute(+r))}))||e.format("mm"))))),e.format("HH:mm")},R=function(t,e){var r,o=p((0,n.isTimeValid)(null!=e?e:"")?null!==(r=null==e?void 0:e.split(":"))&&void 0!==r?r:[]:[0,0],2),a=o[0],s=o[1];return(0,n.toMoment)(t||i().get()).hour(+a).minute(+s)},G=function(t){return t.minute(5*Math.ceil(t.minute()/5))},F=function(t){return{trade_types:(0,n.getPropertyValue)(g,[t,"config","trade_types"])}},U=function(t,e){var r=(0,n.getPropertyValue)(g,[t,"basis"])||[],o=(0,n.getLocalizedBasis)();return{basis_list:r.reduce((function(t,e){return[].concat(d(t),[{text:o[e],value:e}])}),[]),basis:j(r,e)}},V=function(t){return{accumulator_range_list:(0,n.getPropertyValue)(g,[t,"config","growth_rate_range"])||[]}},H=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{barrier_choices:e.length?e:(0,n.getPropertyValue)(g,[t,"config","barrier_choices"])||[]}},q=function(t,e){var r=(0,n.getPropertyValue)(g,[t,"config","multiplier_range"])||[];return{multiplier_range_list:r.map((function(t){return{text:"x".concat(t),value:t}})),multiplier:j(r,e)}},W=function(t,e){var r=(0,n.getPropertyValue)(g,[t,"config","cancellation_range"])||[],o=(0,n.getPropertyValue)(g,["multiplier","config","cancellation_range"])||[],i=/(^(?:\d){1,})|((?:[a-zA-Z]){1,}$)/g,a=function(t){return{text:"".concat((e=t,o=p(null!==(r=e.match(i))&&void 0!==r?r:[],2),a=o[0],s=o[1],c=(0,n.getUnitMap)()[s],l="name_plural"in c?c.name_plural:c.name,"".concat(a," ").concat(l))),value:t};var e,r,o,a,s,c,l},s=!!r.length;return _({cancellation_duration:j(r,e),cancellation_range_list:r.map(a),cached_multiplier_cancellation_list:o.map(a)},s?{}:{has_cancellation:!1})},Y=function(t){var e,r=null===(e=/^(.*)_equal$/.exec(t))||void 0===e?void 0:e[1];return r&&!g[r]?{is_equal:1,has_equals_only:!0}:{}},{buildContractTypesConfig:function(t){return n.WS.storage.contractsFor(t).then((function(e){var r=(0,n.getPropertyValue)(e,["contracts_for"]);if(k=r&&!e.contracts_for.available.find((function(t){return"forward"!==t.start_type})),r&&!k){var o=(0,n.getContractCategoriesConfig)();b=(0,n.getContractTypesConfig)(t),g={},w=(0,n.cloneObject)(o),e.contracts_for.available.forEach((function(t){var e=Object.keys(b).find((function(e){return-1!==b[e].trade_types.indexOf(t.contract_type)&&(void 0===b[e].barrier_count||Number(b[e].barrier_count)===t.barriers)}));if(e){if(!g[e]){var r,o=w[null!==(r=Object.keys(w).find((function(t){return-1!==w[t].categories.indexOf(e)})))&&void 0!==r?r:""].categories;if(!o)return;o[o.indexOf(e)]={value:e,text:b[e].title},g[e]=(0,n.cloneObject)(b[e])}var i=g[e].config||{};i.has_spot=i.has_spot||"spot"===t.start_type,i.durations=i.hide_duration?void 0:(0,n.buildDurationConfig)(t,i.durations),i.trade_types=O(t,i.trade_types),i.barriers=(0,n.buildBarriersConfig)(t,i.barriers),i.barrier_choices=t.barrier_choices,i.forward_starting_dates=(0,n.buildForwardStartingConfig)(t,i.forward_starting_dates),i.growth_rate_range=t.growth_rate_range,i.multiplier_range=t.multiplier_range,i.cancellation_range=t.cancellation_range,g[e].config=i}})),w=(0,n.getCleanedUpCategories)(w),x={};var i=(0,n.cloneObject)(o),a=function(){var t,e;return null!==(t=null===(e=i[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""])||void 0===e?void 0:e.categories)&&void 0!==t?t:[]},s=e.contracts_for.non_available;s&&s.forEach((function(t){var e,r,n,o,s=t.contract_type,c=null!==(e=Object.keys(b).find((function(t){return b[t].trade_types.includes(s)})))&&void 0!==e?e:"",l=Object.keys(i).find((function(t){return a(t).includes(c)})),u=a(l),f=null===(r=b[c])||void 0===r?void 0:r.title,p=!(null===(n=w[l])||void 0===n||null===(o=n.categories)||void 0===o||!o.find((function(t){return t.text===f})));u.includes(c)&&!p&&(u[u.indexOf(c)]={value:c,text:f}),l&&(x[l]=i[l])})),x=(0,n.getCleanedUpCategories)(x)}}))},getBarriers:B=function(t,e,r){var o=(0,n.getPropertyValue)(g,[t,"config","barriers"])||{},i=o[e]||{},a=i.barrier||i.high_barrier||"",s=i.low_barrier||"";return{barrier_count:o.count||0,barrier_1:r||a.toString(),barrier_2:s.toString()}},getContractType:function(t,e){var r=Object.keys(t||{}).reduce((function(e,r){return[].concat(d(e),d(t[r].categories.map((function(t){return t.value}))))}),[]).filter((function(t){return-1===n.unsupported_contract_types_list.indexOf(t)})).sort((function(t,e){return"multiplier"===t||"multiplier"===e?-1:0}));return{contract_type:j(r,e)}},getContractValues:function(t){var e,r,o,i=t.contract_expiry_type,a=t.contract_type,s=t.basis,c=t.duration_unit,l=t.expiry_type,u=t.multiplier,f=t.start_date,p=t.cancellation_duration,d=t.short_barriers,h=t.long_barriers,m=t.strike_price_choices;if(!a)return{};switch((0,n.getContractSubtype)(a)){case"Short":o=d;break;case"Long":o=h;break;case"Call":case"Put":o=m;break;default:o={}}var y=P(a),v=U(a,s),b=F(a),g=N(a,f),w=A(g.start_date),x=B(a,i,null===(e=o)||void 0===e?void 0:e.barrier),E=C(c,a,w.contract_start_type),S=L(a,w.contract_start_type),k=T(a,w.contract_start_type),O=V(a),j=H(a,null===(r=o)||void 0===r?void 0:r.barrier_choices),I=q(a,u),M=W(a,p),D=z(S.duration_units_list,l),R=Y(a);return _(_(_(_(_(_(_(_(_(_(_(_(_(_(_({},y),v),b),g),w),x),E),S),k),D),O),j),I),M),R)},getDurationMinMax:T,getDurationUnit:C,getDurationUnitsList:L,getFullContractTypes:function(){return g},getExpiryDate:function(t,e,r,o){var i=null;if("endtime"===r){var a=(0,n.toMoment)(o),s=(0,n.toMoment)(e);i=(0,n.hasIntradayDurationUnit)(t)?(s.isBefore(a,"day")||o&&s.isAfter(a.clone().add(1,"day"))?a:s).format("YYYY-MM-DD"):(s.isSameOrBefore(a,"day")?a.clone().add(1,"day"):s).format("YYYY-MM-DD")}return{expiry_date:i}},getExpiryTime:function(t,e,r,o,a,c,l){var u=null;if("endtime"===r){var f="23:59:59";if(Array.isArray(o)&&null!=o&&o.length&&"--"!==o[0]&&(f=o.slice(-1)[0]),!c&&i().get().isBefore(R(t),"day"))u=f;else{var p=c?R(c,l):i().get(),d=R(t,e);u=d.format("HH:mm");var h=[{open:p.clone().add(5,"minute"),close:(0,n.minDate)(p.clone().add(24,"hour"),R(t,f))}];if((0,s.Y)(h,d)||(u=D(h,d.clone(),p.clone())),d.isSameOrBefore(p)||d.diff(p,"minute")<5){var m=23===p.get("hours")&&p.get("minute")>=55,y=a&&!(0,s.Y)(a,p.clone().add(5,"minutes"));u=p.clone().add(m||y?0:5,"minutes"),u=G(u).format("HH:mm")}"00:00"===u&&p.isBefore(d,"day")&&(u=p.clone().subtract(5,"minute").format("HH:mm"))}}return{expiry_time:u}},getExpiryType:z=function(t,e){if(t){if(!e&&t.length>0||1===t.length&&"t"===t[0].value)return{expiry_type:"duration"};if(0===t.length)return{expiry_type:null}}return{expiry_type:e}},getSessions:function(t,e){var r,o;return{sessions:null===(r=((0,n.getPropertyValue)(g,[t,"config"])||{}).forward_starting_dates)||void 0===r||null===(o=r.find((function(t){return t.value===e})))||void 0===o?void 0:o.sessions}},getStartTime:function(t,e,r){return{start_time:e?D(t,R(e,r)):null}},getStartType:A,getTradingEvents:function(){var t=f(l().mark((function t(e){var r,o,i,a,s,c,u,f,p,d=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:null,e){t.next=3;break}return t.abrupt("return",[]);case 3:if(e in E){t.next=9;break}return t.next=6,n.WS.tradingTimes(e);case 6:if(o=t.sent,i=o.trading_times,(0,n.getPropertyValue)(o,["trading_times","markets"]))for(a=0;a<i.markets.length;a++)if(s=i.markets[a].submarkets)for(c=0;c<s.length;c++)if(u=s[c].symbols)for(f=0;f<u.length;f++)p=u[f],E[o.echo_req.trading_times]||(E[o.echo_req.trading_times]={}),E[o.echo_req.trading_times][p.symbol]=p.events;case 9:return t.abrupt("return",E[e][r]);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getTradingTimes:function(){var t=f(l().mark((function t(e){var r,o,i,a,s,c,u,f,p,d=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:null,e){t.next=3;break}return t.abrupt("return",{});case 3:if(e in S){t.next=9;break}return t.next=6,n.WS.tradingTimes(e);case 6:if(o=t.sent,i=o.trading_times,(0,n.getPropertyValue)(o,["trading_times","markets"]))for(a=0;a<i.markets.length;a++)if(s=i.markets[a].submarkets)for(c=0;c<s.length;c++)if(u=s[c].symbols)for(f=0;f<u.length;f++)p=u[f],S[o.echo_req.trading_times]||(S[o.echo_req.trading_times]={}),S[o.echo_req.trading_times][p.symbol]={open:p.times.open,close:p.times.close};case 9:return t.abrupt("return",r?S[e][r]:S[e]);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getContractCategories:function(){return{contract_types_list:w,has_only_forward_starting_contracts:k,non_available_contract_types_list:x}}})},"./src/Stores/Modules/Trading/Helpers/proposal.ts":(t,e,r)=>{"use strict";r.d(e,{RX:()=>f,_N:()=>u,yr:()=>l});var n=r("@deriv/shared");function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c={barrier:"barrier_1",barrier2:"barrier_2",date_expiry:"expiry_date"},l=function(t){var e=(0,n.getPropertyValue)(t,["error","details","field"]);if(!e)return null;var r,o=c[e]||e,i=document.getElementsByName(o)[0];return i&&((r=i)&&(0!==r.offsetWidth||0!==r.offsetHeight))?o:null},u=function(t,e,r){var o,i,s,c,u=e.proposal||{},f=(u.payout||0)-(u.ask_price||0),p=100*f/(u.ask_price||1),d=u.display_value,h=t.basis_list,m=t.is_vanilla||t.is_turbos?{text:(0,n.getLocalizedBasis)().payout_per_point,value:"display_number_of_contracts"}:h.find((function(e){return e.value!==t.basis}))||{},y="stake"===(null==m?void 0:m.value)?d:u[null==m?void 0:m.value],_=!1;null!=y&&(_=y>r.value),r.value&&y!==r.value||(_=!1);var v={text:(null==m?void 0:m.text)||"",value:y||""},b=u.commission,g=u.cancellation,w=a(a({},u.contract_details),{},{growth_rate:t.growth_rate,spot_time:u.spot_time});return a({commission:b,cancellation:g,id:u.id||"",has_error:!!e.error,has_error_details:!!l(e),error_code:null==e||null===(o=e.error)||void 0===o?void 0:o.code,error_field:null==e||null===(i=e.error)||void 0===i||null===(s=i.details)||void 0===s?void 0:s.field,has_increased:_,limit_order:u.limit_order,message:u.longcode||(null==e||null===(c=e.error)||void 0===c?void 0:c.message),obj_contract_basis:v,payout:u.payout,profit:f.toFixed((0,n.getDecimalPlaces)(t.currency)),returns:"".concat(p.toFixed(2),"%"),stake:d,spot:u.spot},w)},f=function(t){var e={};return Object.keys(t.trade_types).forEach((function(r){var n=p(t,r);e[r]=n})),e},p=function(t,e){var r,o={},i={},s={};if("endtime"===t.expiry_type&&t.expiry_time){var c=(0,n.toMoment)(t.expiry_date);i.date_expiry=(0,n.convertToUnix)(c.unix(),t.expiry_time)}return"multiplier"===t.contract_type&&function(t,e){e.multiplier=t.multiplier,e.cancellation=t.has_cancellation?t.cancellation_duration:void 0,e.limit_order=t.has_take_profit||t.has_stop_loss?{}:void 0,t.has_take_profit&&t.take_profit&&e.limit_order&&(e.limit_order.take_profit=+t.take_profit||0),t.has_stop_loss&&t.stop_loss&&e.limit_order&&(e.limit_order.stop_loss=+t.stop_loss||0)}(t,s),"accumulator"===t.contract_type&&function(t,e){e.growth_rate=t.growth_rate,e.limit_order=t.has_take_profit?{}:void 0,t.has_take_profit&&t.take_profit&&e.limit_order&&(e.limit_order.take_profit=+t.take_profit||0)}(t,o),(0,n.isTurbosContract)(t.contract_type)&&t.has_take_profit&&t.take_profit&&(r={take_profit:+t.take_profit||0}),a(a(a(a(a(a({proposal:1,subscribe:1,amount:parseFloat(t.amount.toString())||0,basis:t.basis,contract_type:e,currency:t.currency,symbol:t.symbol},t.start_date&&t.start_time&&{date_start:(0,n.convertToUnix)(t.start_date,t.start_time)}),"duration"===t.expiry_type?{duration:parseInt(t.duration.toString()),duration_unit:t.duration_unit}:i),(t.barrier_count>0||-1!==t.form_components.indexOf("last_digit"))&&!(0,n.isAccumulatorContract)(e)&&{barrier:t.barrier_1||t.last_digit}),2===t.barrier_count&&!(0,n.isAccumulatorContract)(e)&&{barrier2:t.barrier_2}),{},{limit_order:r},o),s)}},"./src/Stores/Modules/Trading/Helpers/start-date.ts":(t,e,r)=>{"use strict";r.d(e,{Y:()=>s});var n=r("./src/_common/base/server_time.js"),o=r.n(n),i=r("@deriv/shared"),a=function(t,e,r){var n=(0,i.toMoment)(e);return r&&n.minute(0).second(0),t.isBefore(n)&&n.unix()!==t.unix()},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.toMoment)(o().get()),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.toMoment)(o().get()),n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!(a(e,o().get(),n)||a(e,r,n)||t.length&&!t.find((function(t){return e.isBetween(t.open,t.close,n?"hour":null,"[]")})))}},"./src/Stores/useTraderStores.tsx":(t,e,r)=>{"use strict";r.d(e,{b:()=>c,z:()=>s});var n=r("react"),o=r.n(n),i=r("../stores/src/index.ts"),a=o().createContext(null),s=function(t){var e=t.children,r=(0,i.oR)().modules;return o().createElement(a.Provider,{value:null==r?void 0:r.trade},e)},c=function(){var t=o().useContext(a);if(!t)throw new Error("useTraderStore must be used within TraderStoreProvider");return t}},"./src/Utils/Helpers/market-underlying.ts":(t,e,r)=>{"use strict";r.d(e,{cS:()=>n});r("@deriv/shared");var n=function(t){var e={category:"",underlying:""},r=new RegExp("^([A-Z]+)_((1HZ[0-9-V]+)|((CRASH|BOOM)[0-9\\d]+[A-Z]?)|(OTC_[A-Z0-9]+)|R_[\\d]{2,3}|[A-Z]+)").exec(t);return null!==r&&(e.category=r[1].toLowerCase(),e.underlying=r[2]),e}},"./src/_common/base/server_time.js":(t,e,r)=>{var n,o,i,a=r("./src/_common/utility.js").PromiseClass,s=(o=!1,i=new a,{init:function(t){o||(n=t,i.resolve(n.server_time),o=!0)},get:function(){return o&&n.server_time?n.server_time.clone():void 0},timePromise:function(){return o?Promise.resolve(n.server_time):i.promise}});t.exports=s},"./src/_common/utility.js":t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(i,"string"),"symbol"===e(a)?a:String(a)),o)}var i,a}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var o,i=n((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.promise=new Promise((function(t,r){e.reject=r,e.resolve=t}))}));t.exports={createElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement(t);return Object.keys(e).forEach((function(t){var n=e[t];"text"===t?r.textContent=n:"html"===t?r.html(n):r.setAttribute(t,n)})),r},getStaticHash:function(){return o=o||(document.querySelector('script[src*="main"]').getAttribute("src")||"").split(".")[1]},PromiseClass:i}},"../utils/src/index.ts":(t,e,r)=>{"use strict";r("../../node_modules/lodash.groupby/index.js"),r("../../node_modules/lodash.pickby/index.js"),r("../../node_modules/moment/moment.js")}}]);
//# sourceMappingURL=trader.trader-app.a2e0439e02401694a870.js.map