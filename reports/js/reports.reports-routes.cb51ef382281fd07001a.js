"use strict";(self.webpackChunk_deriv_reports=self.webpackChunk_deriv_reports||[]).push([["reports-routes"],{"./src/Containers/index.ts":(e,t,n)=>{n.r(t),n.d(t,{default:()=>he});var r=n("react"),o=n.n(r),a=n("react-router-dom"),l=n("@deriv/components"),i=n("@deriv/shared"),c=n("@deriv/translations"),s=n("@deriv/analytics"),u=n("../../node_modules/react-content-loader/dist/react-content-loader.es.js"),m=function(e){var t=e.speed;return o().createElement(u.ZP,{height:64,width:992,speed:t,backgroundColor:"var(--general-hover)",foregroundColor:"var(--general-active)"},o().createElement("rect",{x:"16",y:"16",rx:"4",ry:"4",width:"32",height:"32"}),o().createElement("rect",{x:"52",y:"16",rx:"4",ry:"4",width:"32",height:"32"}),o().createElement("rect",{x:"132",y:"28",rx:"4",ry:"4",width:"101",height:"8"}),o().createElement("rect",{x:"273",y:"28",rx:"4",ry:"4",width:"120",height:"8"}),o().createElement("rect",{x:"460",y:"28",rx:"4",ry:"4",width:"46",height:"8"}),o().createElement("rect",{x:"593",y:"28",rx:"4",ry:"4",width:"46",height:"8"}),o().createElement("rect",{x:"726",y:"28",rx:"4",ry:"4",width:"64",height:"8"}),o().createElement("rect",{x:"906",y:"28",rx:"4",ry:"4",width:"64",height:"8"}))};const _=function(e){var t=e.has_selected_date,n=e.component_icon,r=e.localized_message,a=e.localized_period_message;return o().createElement(o().Fragment,null,o().createElement("div",{className:"empty-trade-history"},o().createElement(l.Icon,{data_testid:"dt_empty_trade_history_icon",icon:n,className:"empty-trade-history__icon",color:"disabled",size:96}),o().createElement(l.Text,{size:"xs",align:"center",color:"disabled",className:"empty-trade-history__text"},t?a:r)))};var d=n("../../node_modules/classnames/index.js"),p=n.n(d),f=n("../stores/src/index.ts");const v=(0,f.Pi)((function(e){var t=e.contract_info,n=(0,f.oR)(),r=n.common,a=n.portfolio,c=r.server_time,s=a.is_loading;if(!t)return o().createElement("div",null);var u=t.tick_count&&(0,i.getCurrentTick)(t);return c?o().createElement(l.ProgressSlider,{current_tick:u,expiry_time:t.date_expiry,getCardLabels:i.getCardLabels,is_loading:s,server_time:c,start_time:t.date_start,ticks_count:t.tick_count}):null}));var y=function(e){return+e.replace(/,/g,"")>=0?"profit":"loss"};function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const h=(0,f.Pi)((function(e){var t=e.amount,n=e.contract_info,r=e.currency,a=e.is_footer,c=e.is_sell_requested,s=e.status,u=(0,f.oR)().portfolio.onClickSell,m=g(o().useState(null),2),_=m[0],d=m[1],p=g(o().useState(0),2),v=p[0],y=p[1];return o().useEffect((function(){d((function(){return t>=v?"profit":"loss"})),y(t)}),[t,v]),o().createElement("div",{className:"open-positions__indicative"},o().createElement("div",{className:"open-positions__indicative--amount"},o().createElement(l.Money,{amount:Math.abs(t),currency:r}),"no-resale"!==s&&0!==t&&o().createElement(o().Fragment,null,"profit"===_&&o().createElement(l.Icon,{icon:"IcProfit"}),"loss"===_&&o().createElement(l.Icon,{icon:"IcLoss"}))),o().createElement(l.DesktopWrapper,null,!a&&o().createElement(l.ContractCard.Sell,{contract_info:n,is_sell_requested:c,getCardLabels:i.getCardLabels,onClickSell:function(e){e&&u(e)}})))}));const b=function(e){var t,n=e.has_full_contract_title,r=e.icon,a=e.payload,c=e.should_show_accumulator,s=void 0===c||c,u=e.should_show_multiplier,m=void 0===u||u,_="string"==typeof a.shortcode,d=(0,i.extractInfoFromShortcode)(a.shortcode),f=(0,i.isHighLow)({shortcode_info:d}),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e&&(0,i.getContractConfig)(t)[e.toUpperCase()];return r&&(n&&r.button_name||r.name)||null}(d.category,f,n);return _&&d?o().createElement("div",{className:p()("market-symbol-icon",{"market-symbol-icon__full-title":n})},o().createElement("div",{className:"market-symbol-icon-name"},o().createElement(l.Popover,{classNameTarget:"market-symbol-icon__popover",classNameBubble:"market-symbol-icon__popover-bubble",alignment:"top",message:(t=d.underlying,t?(0,i.getMarketNamesMap)()[t.toUpperCase()]:null),is_bubble_hover_enabled:!0,disable_target_icon:!0},o().createElement(l.Icon,{icon:d.underlying?"IcUnderlying".concat(d.underlying):"IcUnknown",size:32})),n&&a.display_name),o().createElement("div",{className:"market-symbol-icon-category"},o().createElement(l.Popover,{classNameTarget:"category-type-icon__popover",classNameBubble:"category-type-icon__popover-bubble",alignment:"top",message:v,is_bubble_hover_enabled:!0,disable_target_icon:!0},o().createElement(l.IconTradeTypes,{type:f?"".concat(d.category.toLowerCase(),"_barrier"):d.category.toLowerCase(),color:"brand"})),n&&v),m&&d.multiplier&&o().createElement("div",{className:"market-symbol-icon__multiplier"},"x",d.multiplier),s&&d.growth_rate&&o().createElement("div",{className:"market-symbol-icon__multiplier"},100*+d.growth_rate,"%")):["deposit","hold","release","withdrawal","transfer"].includes(a.action_type)?o().createElement("div",{className:"market-symbol-icon"},"deposit"===a.action_type&&o().createElement(l.Icon,{icon:r||"IcCashierDeposit",size:32}),"withdrawal"===a.action_type&&o().createElement(l.Icon,{icon:"IcCashierWithdrawal",size:32}),"transfer"===a.action_type&&o().createElement(l.Icon,{icon:"IcAccountTransferColored",size:32}),("hold"===a.action_type||"release"===a.action_type)&&o().createElement(l.Icon,{icon:"IcCashierDp2p",size:32})):["adjustment"].includes(a.action_type)?o().createElement("div",{className:"market-symbol-icon"},o().createElement(l.Icon,{icon:"IcAdjustment",size:32})):o().createElement("svg",{width:"32",height:"32",className:"unknown-icon"},o().createElement("rect",{width:"32",height:"32"}))};const C=function(e){var t=e.value,n=e.children,r=y(t);return o().createElement("span",{className:"amount--".concat(r)},n)};const w=function(e){var t=e.currency;return o().createElement("div",{className:"currency__wrapper"},o().createElement(l.Text,{color:"colored-background",weight:"bold",size:"xxxs"},t))};var N={buy:"success",deposit:"success",hold:"warn",release:"success",sell:"danger",withdrawal:"info",default:"default",adjustment:"adjustment",transfer:"transfer"},x=n("../../node_modules/prop-types/index.js"),k=n.n(x);const M=function(e){var t=e.className,n=e.is_invisible,r=e.theme,a=e.id,l=e.data_testid;return o().createElement("div",{id:a,"data-testid":l,className:p()("barspinner","barspinner--".concat(r||"dark"),{invisible:n},t)},Array.from(new Array(5)).map((function(e,t){return o().createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))};var z=function(e){var t=e.empty_message_component;return o().createElement(o().Fragment,null,e.is_empty&&o().createElement(t,{component_icon:e.component_icon,has_selected_date:e.has_selected_date,localized_message:e.localized_message,localized_period_message:e.localized_period_message}),e.is_loading&&o().createElement(M,{data_testid:"dt_loading_component"}))};z.propTypes={component_icon:k().string,empty_message_component:k().func,has_selected_date:k().bool,is_empty:k().bool,is_loading:k().bool,localized_message:k().string,localized_period_message:k().string};const D=z;var S=["row","is_footer","columns_map","server_time","onClickCancel","onClickSell","measure"],T=["component_icon"];function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}function P(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Y=function(e){var t=e.is_empty,n=e.component_icon,r=e.children;return o().createElement(o().Fragment,null,t?o().createElement(D,{is_empty:t,empty_message_component:_,component_icon:n,localized_message:(0,c.localize)("You have no open positions yet.")}):r)},A=function(e){var t,n=e.row,r=void 0===n?{}:n,a=e.is_footer,s=e.columns_map,u=void 0===s?{}:s,m=e.server_time,_=void 0===m?(0,i.toMoment)():m,d=e.onClickCancel,p=e.onClickSell,f=e.measure,v=P(e,S);if(o().useEffect((function(){a||null==f||f()}),[null===(t=r.contract_info)||void 0===t?void 0:t.underlying,f,a]),a)return o().createElement(o().Fragment,null,o().createElement("div",{className:"open-positions__data-list-footer--content"},o().createElement("div",null,o().createElement(l.DataList.Cell,{row:r,column:u.purchase}),o().createElement(l.DataList.Cell,{row:r,column:u.payout})),o().createElement("div",null,o().createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:r,column:u.indicative}),o().createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:r,column:u.profit}))));var y=r,g=y.contract_info,E=y.contract_update,h=y.type,b=y.is_sell_requested,C=g.currency,w=g.status,N=g.date_expiry,x=g.date_start,k=g.tick_count,M=g.purchase_time,z=k?(0,i.getCurrentTick)(g):null,D=k?"ticks":(0,i.getDurationUnitText)((0,i.getDurationPeriod)(g),!0),T=function(e,t){if(t&&/^(MULTUP|MULTDOWN)/.test(t))return"";var n=new RegExp("ticks|tick|seconds|minutes|minute|hour|hours").exec(e);if(null!==n){var r=n[0],o=r[0].toUpperCase()+r.slice(1);return o.endsWith("s")?o:"".concat(o,"s")}return(0,c.localize)("Days")}((0,i.isTurbosContract)(g.contract_type)?D:g.longcode||""),I=(0,i.getTimePercentage)(_,null!=x?x:0,null!=N?N:0)/100;return(0,i.isMultiplierContract)(h)||(0,i.isAccumulatorContract)(h)?o().createElement(l.PositionsDrawerCard,j({contract_info:g,contract_update:E,currency:null!=C?C:"",is_link_disabled:!0,onClickCancel:d,onClickSell:p,server_time:_,status:null!=w?w:""},v)):o().createElement(o().Fragment,null,o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:r,column:u.type}),(0,i.isVanillaContract)(h)||(0,i.isTurbosContract)(h)&&!k?o().createElement(l.ProgressSliderMobile,{current_tick:z,className:"data-list__row--timer",expiry_time:N,getCardLabels:i.getCardLabels,is_loading:!1,server_time:_,start_time:M,ticks_count:k}):o().createElement(l.ProgressBar,{label:null!=T?T:"",value:I})),o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:r,column:u.reference}),o().createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:r,column:u.currency})),o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:r,column:u.purchase}),o().createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:r,column:u.indicative})),o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:r,column:u.payout}),o().createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:r,column:u.profit})),o().createElement("div",{className:"data-list__row-divider"}),o().createElement("div",{className:"data-list__row"},o().createElement(l.ContractCard.Sell,{contract_info:g,is_sell_requested:b,getCardLabels:i.getCardLabels,onClickSell:p})))},O=function(e){var t=e.accumulator_rate,n=e.active_positions,r=e.className,a=e.columns,i=e.component_icon,u=e.contract_type_value,d=e.currency,p=e.getRowAction,f=e.is_empty,v=e.is_loading,y=e.mobileRowRenderer,g=e.preloaderCheck,E=e.row_size,h=e.totals;return o().useEffect((function(){s.Analytics.trackEvent("ce_reports_form",{action:"choose_report_type",form_name:"default",subform_name:"open_positions_form",trade_type_filter:u,growth_type_filter:t})}),[]),o().createElement(o().Fragment,null,v?o().createElement(D,{is_loading:v,empty_message_component:_,component_icon:i,localized_message:(0,c.localize)("You have no open positions yet.")}):d&&o().createElement("div",{className:"reports__content"},o().createElement(l.DesktopWrapper,null,o().createElement(Y,{component_icon:i,is_empty:f},o().createElement(l.DataTable,{className:r,columns:a,preloaderCheck:g,footer:h,data_source:n,getRowAction:p,getRowSize:function(){return E},content_loader:m},o().createElement(D,{is_loading:v})))),o().createElement(l.MobileWrapper,null,o().createElement(Y,{component_icon:i,is_empty:f},o().createElement(l.DataList,{className:r,data_source:n,footer:h,rowRenderer:y,getRowAction:p,row_gap:8,keyMapper:function(e){return null==e?void 0:e.id}},o().createElement(D,{is_loading:v}))))))},F=function(e){var t;return e.is_unsupported?{component:o().createElement(c.Localize,{i18n_default_text:"The {{trade_type_name}} contract details aren't currently available. We're working on making them available soon.",values:{trade_type_name:null===(t=(0,i.getUnsupportedContracts)()[e.type])||void 0===t?void 0:t.name}})}:(0,i.getContractPath)(e.id||0)},R=function(e){return isNaN(Number(e.purchase))||!e.purchase},U=(0,f.Pi)((function(e){var t,n=e.component_icon,r=P(e,T),a=(0,f.oR)(),u=a.portfolio,m=a.client,_=a.ui,d=a.common,y=a.contract_trade,g=u.active_positions,E=u.error,C=u.getPositionById,N=u.is_accumulator,x=u.is_loading,k=u.is_multiplier,M=u.onClickCancel,z=u.onClickSell,D=u.onMount,S=u.removePositionById,L=m.currency,Y=m.is_eu,U=_.notification_messages_ui,W=_.addToast,B=_.current_focus,q=_.is_mobile,G=_.removeToast,V=_.setCurrentFocus,$=_.should_show_cancellation_warning,H=_.toggleCancellationWarning,Z=_.toggleUnsupportedContractModal,K=d.server_time,J={onClickRemove:S,NotificationMessages:U,addToast:W,current_focus:B,is_mobile:q,removeToast:G,setCurrentFocus:V,should_show_cancellation_warning:$,toggleCancellationWarning:H,toggleUnsupportedContractModal:Z,getContractById:y.getContractById},Q=I(o().useState(!1),2),X=Q[0],ee=Q[1],te=I(o().useState(!1),2),ne=te[0],re=te[1],oe=(0,l.usePrevious)(g),ae=[{text:(0,c.localize)("Options"),is_default:!k&&!N},{text:(0,c.localize)("Multipliers"),is_default:k},{text:(0,c.localize)("Accumulators"),is_default:N}],le=I(o().useState((null===(t=ae.find((function(e){return e.is_default})))||void 0===t?void 0:t.text)||(0,c.localize)("Options")),2),ie=le[0],ce=le[1],se=(0,l.usePrevious)(ie),ue=[(0,c.localize)("All growth rates"),"1%","2%","3%","4%","5%"],me=I(o().useState(ue[0]),2),_e=me[0],de=me[1],pe=(0,l.usePrevious)(_e),fe=ie===ae[2].text,ve=ie===ae[1].text,ye=ae.filter((function(e){return e.text!==(0,c.localize)("Accumulators")||!Y})).map((function(e){var t=e.text;return{text:t,value:t}})),ge=ue.map((function(e){return{text:e,value:e}})),Ee=null==g?void 0:g.filter((function(e){var t=e.contract_info;return!t||(ve?(0,i.isMultiplierContract)(t.contract_type||""):fe?(0,i.isAccumulatorContract)(t.contract_type)&&("".concat((0,i.getGrowthRatePercentage)(Number(t.growth_rate)),"%")===_e||!_e.includes("%")):!(0,i.isMultiplierContract)(t.contract_type||"")&&!(0,i.isAccumulatorContract)(t.contract_type))})),he=function(e,t,n){var r;if(t){var o=0,a=0,l=0,c=0,s=0;e.forEach((function(e){if(l+=Number(e.contract_info.buy_price),c+=Number(e.contract_info.bid_price),s+=Number(e.purchase),e.contract_info){var t,n,r={bid_price:null!==(t=e.contract_info.bid_price)&&void 0!==t?t:0,buy_price:null!==(n=e.contract_info.buy_price)&&void 0!==n?n:0};a+=(0,i.getTotalProfit)(r),e.contract_info.cancellation&&(o+=e.contract_info.cancellation.ask_price||0)}})),r={contract_info:{profit:a,buy_price:l,bid_price:c},purchase:s},o>0&&r.contract_info&&(r.contract_info.cancellation={ask_price:o})}else if(n){var u=0,m=0,_=0,d=0;null==e||e.forEach((function(e){var t,n,r=e.contract_info;u+=Number(r.buy_price),m+=Number(r.bid_price),null!==(t=r.limit_order)&&void 0!==t&&null!==(n=t.take_profit)&&void 0!==n&&n.order_amount&&(_+=r.limit_order.take_profit.order_amount),r&&(d+=(0,i.getTotalProfit)(r))})),r={contract_info:{buy_price:u,bid_price:m,profit:d,limit_order:{take_profit:{order_amount:_}}},purchase:u}}else{var p=0,f=0,v=0,y=0;null==e||e.forEach((function(e){p+=+e.indicative,f+=Number(e.purchase),v+=Number(e.profit_loss),y+=Number(e.payout)})),r={indicative:p,purchase:f,profit_loss:v,payout:y}}return r}(Ee,ve,fe);o().useEffect((function(){D(),be()}),[]),o().useEffect((function(){be(oe)}),[oe]),o().useEffect((function(){se&&s.Analytics.trackEvent("ce_reports_form",{action:"filter_trade_type",form_name:"default",subform_name:"open_positions_form",trade_type_filter:ie})}),[ie]),o().useEffect((function(){pe&&s.Analytics.trackEvent("ce_reports_form",{action:"filter_growth_rate",form_name:"default",subform_name:"open_positions_form",growth_type_filter:_e})}),[_e]);var be=function(){g!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])&&(X||ee(g.some((function(e){var t=e.contract_info;return(0,i.isAccumulatorContract)(null==t?void 0:t.contract_type)}))),ne||re(g.some((function(e){var t=e.contract_info;return(0,i.isMultiplierContract)((null==t?void 0:t.contract_type)||"")}))))};if(E)return o().createElement("p",null,E);var Ce=ve&&K?function(e){var t=e.currency,n=e.onClickCancel,r=e.onClickSell,a=e.getPositionById,s=e.server_time;return[{title:(0,i.isMobile)()?"":(0,c.localize)("Type"),col_index:"type",renderCellContent:function(e){var t=e.row_obj;return e.is_footer?(0,c.localize)("Total"):o().createElement(b,{key:t.id,payload:t.contract_info,should_show_multiplier:!1})}},{title:(0,c.localize)("Multiplier"),col_index:"multiplier",renderCellContent:function(e){var t=e.row_obj;return t.contract_info&&t.contract_info.multiplier?"x".concat(t.contract_info.multiplier):""}},{title:(0,c.localize)("Currency"),col_index:"currency",renderCellContent:function(e){var t,n=e.row_obj;return o().createElement(w,{currency:(0,i.getCurrencyDisplayCode)(null===(t=n.contract_info)||void 0===t?void 0:t.currency)})}},{title:(0,c.localize)("Stake"),col_index:"buy_price",renderCellContent:function(e){var n=e.row_obj;if(n.contract_info){var r=(n.contract_info.cancellation||{}).ask_price,a=void 0===r?0:r;return o().createElement(l.Money,{amount:n.contract_info.buy_price-a,currency:t})}return""}},{title:(0,c.localize)("Deal cancel. fee"),col_index:"cancellation",renderCellContent:function(e){var n=e.row_obj;return n.contract_info&&n.contract_info.underlying?(0,i.shouldShowCancellation)(n.contract_info.underlying)?n.contract_info.cancellation?o().createElement(l.Money,{amount:n.contract_info.cancellation.ask_price,currency:t}):"-":(0,c.localize)("N/A"):"-"}},{title:(0,i.isMobile)()?o().createElement(c.Localize,{i18n_default_text:"Total buy price"}):o().createElement(c.Localize,{i18n_default_text:"Buy price"}),col_index:"purchase",renderCellContent:function(e){var n=e.cell_value;return o().createElement(l.Money,{amount:n,currency:t})}},{title:o().createElement(c.Localize,{i18n_default_text:"Take profit<0 />Stop loss",components:[o().createElement("br",{key:0})]}),col_index:"limit_order",renderCellContent:function(e){var n,r=e.row_obj;if(e.is_footer)return"";var a=(null===(n=r.contract_info)||void 0===n?void 0:n.limit_order)||{},i=a.take_profit,c=a.stop_loss;return o().createElement(o().Fragment,null,o().createElement("div",null,null!=i&&i.order_amount?o().createElement(l.Money,{has_sign:!0,amount:i.order_amount,currency:t}):"-"),o().createElement("div",null,null!=c&&c.order_amount?o().createElement(l.Money,{has_sign:!0,amount:c.order_amount,currency:t}):"-"))}},{title:(0,c.localize)("Current stake"),col_index:"bid_price",renderCellContent:function(e){var n=e.row_obj;if(e.is_footer)return"";if(!n.contract_info||!n.contract_info.bid_price)return"-";var r=(0,i.getTotalProfit)(n.contract_info);return o().createElement("div",{className:p()("open-positions__bid_price",{"open-positions__bid_price--negative":r<0,"open-positions__bid_price--positive":r>0})},o().createElement(l.Money,{amount:n.contract_info.bid_price,currency:t}))}},{title:(0,i.isMobile)()?o().createElement(c.Localize,{i18n_default_text:"Total profit/loss"}):o().createElement(c.Localize,{i18n_default_text:"Total<0 />profit/loss",components:[o().createElement("br",{key:0})]}),col_index:"profit",renderCellContent:function(e){var n=e.row_obj;if(!n.contract_info||!n.contract_info.profit)return null;var r=(0,i.getTotalProfit)(n.contract_info);return o().createElement("div",{className:p()("open-positions__profit-loss",{"open-positions__profit-loss--negative":r<0,"open-positions__profit-loss--positive":r>0})},o().createElement(l.Money,{amount:Math.abs(r),currency:t}),o().createElement("div",{className:"open-positions__profit-loss--movement"},r>0?o().createElement(l.Icon,{icon:"IcProfit"}):o().createElement(l.Icon,{icon:"IcLoss"})))}},{title:(0,c.localize)("Action"),col_index:"action",renderCellContent:function(e){var t=e.row_obj;if(e.is_footer)return o().createElement("div",{className:"open-positions__row-action"});var c=t.contract_info,u=(a(c.contract_id)||{}).is_sell_requested;return o().createElement("div",{className:"open-positions__row-action"},o().createElement(l.ContractCard.MultiplierCloseActions,{contract_info:c,getCardLabels:i.getCardLabels,is_sell_requested:u,onClickCancel:n,onClickSell:r,server_time:s}))}}]}({currency:L,onClickCancel:M,onClickSell:z,getPositionById:C,server_time:K}):fe?function(e){var t=e.currency,n=e.onClickSell,r=e.getPositionById;return[{title:(0,i.isMobile)()?"":(0,c.localize)("Type"),col_index:"type",renderCellContent:function(e){var t=e.row_obj;return e.is_footer?(0,c.localize)("Total"):o().createElement(b,{key:t.id,payload:t.contract_info,should_show_multiplier:!1,should_show_accumulator:!1})}},{title:(0,c.localize)("Growth rate"),col_index:"growth_rate",renderCellContent:function(e){var t=e.row_obj;return t.contract_info&&t.contract_info.growth_rate?"".concat((0,i.getGrowthRatePercentage)(t.contract_info.growth_rate),"%"):""}},{title:(0,c.localize)("Currency"),col_index:"currency",renderCellContent:function(e){var t,n=e.row_obj;return o().createElement(w,{currency:(0,i.getCurrencyDisplayCode)(null===(t=n.contract_info)||void 0===t?void 0:t.currency)})}},{title:(0,i.isMobile)()?(0,c.localize)("Total stake"):(0,c.localize)("Initial stake"),col_index:(0,i.isMobile)()?"purchase":"buy_price",renderCellContent:function(e){var n=e.row_obj;return n.contract_info?o().createElement(l.Money,{amount:n.contract_info.buy_price,currency:t}):""}},{title:(0,c.localize)("Take profit"),col_index:"limit_order",renderCellContent:function(e){var n,r=((null===(n=e.row_obj.contract_info)||void 0===n?void 0:n.limit_order)||{}).take_profit;return o().createElement("div",null,null!=r&&r.order_amount?o().createElement(l.Money,{has_sign:!0,amount:r.order_amount,currency:t}):"-")}},{title:(0,c.localize)("Current stake"),col_index:"bid_price",renderCellContent:function(e){var n=e.row_obj;if(!n.contract_info||!n.contract_info.bid_price)return"-";var r=(0,i.getTotalProfit)(n.contract_info);return o().createElement("div",{className:p()("open-positions__bid_price",{"open-positions__bid_price--negative":r<0,"open-positions__bid_price--positive":r>0})},o().createElement(l.Money,{amount:n.contract_info.bid_price,currency:t}))}},{title:(0,c.localize)("Total profit/loss"),col_index:"profit",renderCellContent:function(e){var n=e.row_obj;if(!n.contract_info||!n.contract_info.profit)return null;var r=(0,i.getTotalProfit)(n.contract_info);return o().createElement("div",{className:p()("open-positions__profit-loss",{"open-positions__profit-loss--negative":r<0,"open-positions__profit-loss--positive":r>0})},o().createElement(l.Money,{amount:Math.abs(r),currency:t}),o().createElement("div",{className:"open-positions__profit-loss--movement"},r>0?o().createElement(l.Icon,{icon:"IcProfit"}):o().createElement(l.Icon,{icon:"IcLoss"})))}},{title:(0,c.localize)("Action"),col_index:"action",renderCellContent:function(e){var t=e.row_obj;if(e.is_footer)return o().createElement("div",{className:"open-positions__row-action"});var a=t.contract_info,c=(r(a.contract_id)||{}).is_sell_requested;return o().createElement("div",{className:"open-positions__row-action"},o().createElement(l.ContractCardSell,{contract_info:a,is_sell_requested:c,getCardLabels:i.getCardLabels,onClickSell:n}))}}]}({currency:L,onClickSell:z,getPositionById:C}):function(e){return[{key:"icon",title:(0,i.isMobile)()?"":(0,c.localize)("Type"),col_index:"type",renderCellContent:function(e){var t=e.row_obj,n=e.is_footer,r=e.is_vanilla,a=e.is_turbos;return n?(0,c.localize)("Total"):o().createElement(b,{key:t.id,payload:t.contract_info,has_full_contract_title:r||a})}},{title:(0,c.localize)("Ref. ID"),col_index:"reference"},{title:(0,c.localize)("Currency"),col_index:"currency",renderCellContent:function(e){var t,n=e.row_obj;return o().createElement(w,{currency:(0,i.getCurrencyDisplayCode)(null===(t=n.contract_info)||void 0===t?void 0:t.currency)})}},{title:(0,c.localize)("Buy price"),col_index:"purchase",renderCellContent:function(t){var n=t.cell_value;return o().createElement(l.Money,{amount:n,currency:e})}},{title:(0,c.localize)("Payout limit"),col_index:"payout",renderHeader:function(e){var t=e.title,n=e.is_vanilla;return o().createElement("span",null,n?(0,c.localize)("Strike"):t)},renderCellContent:function(t){var n,r=t.cell_value,a=t.row_obj,i=t.is_vanilla,c=r?o().createElement(l.Money,{amount:r,currency:e}):o().createElement("span",null,"-");return i?null===(n=a.barrier)||void 0===n?void 0:n.toFixed(2):c}},{title:(0,c.localize)("Indicative profit/loss"),col_index:"profit",renderCellContent:function(t){var n=t.row_obj;if(n.profit_loss||n.contract_info&&n.contract_info.profit){var r=n.profit_loss||n.contract_info.profit;return o().createElement("div",{className:p()("open-positions__profit-loss",{"open-positions__profit-loss--negative":r<0,"open-positions__profit-loss--positive":r>0})},o().createElement(l.Money,{amount:Math.abs(r),currency:e}),o().createElement("div",{className:"open-positions__profit-loss--movement"},r>0?o().createElement(l.Icon,{icon:"IcProfit"}):o().createElement(l.Icon,{icon:"IcLoss"})))}}},{title:(0,c.localize)("Indicative price"),col_index:"indicative",renderCellContent:function(t){var n=t.cell_value,r=t.row_obj,a=t.is_footer;return o().createElement(h,{amount:+n,currency:e,contract_info:r.contract_info,is_sell_requested:r.is_sell_requested,is_footer:a})}},{title:(0,c.localize)("Remaining time"),col_index:"id",renderCellContent:function(e){var t=e.row_obj;return o().createElement(v,{contract_info:t.contract_info})}}]}(L),we={};Ce.forEach((function(e){we[e.col_index]=e}));var Ne,xe,ke={accumulator_rate:_e,active_positions:Ee,component_icon:n,contract_type_value:ie,currency:L,getRowAction:F,is_loading:x,mobileRowRenderer:function(e){return o().createElement(A,j({},e,{columns_map:we,server_time:K||(0,i.toMoment)(),onClickCancel:M,onClickSell:z},r,J))},preloaderCheck:R,totals:he};return o().createElement(o().Fragment,null,o().createElement(U,null),0!==g.length&&o().createElement(o().Fragment,null,o().createElement(l.DesktopWrapper,null,o().createElement("div",{className:fe?"open-positions__accumulator-container":"open-positions__contract-types-selector-container"},o().createElement("div",{className:"open-positions__accumulator-container__contract-dropdown"},o().createElement(l.Dropdown,{is_align_text_left:!0,name:"contract_types",list:ye,value:ie,onChange:function(e){return ce(e.target.value)}})),fe&&!Y&&o().createElement("div",{className:"open-positions__accumulator-container__rates-dropdown"},o().createElement(l.Dropdown,{is_align_text_left:!0,name:"accumulator_rates",list:ge,value:_e,onChange:function(e){return de(e.target.value)}})))),o().createElement(l.MobileWrapper,null,o().createElement("div",{className:fe?"open-positions__accumulator-container--mobile":"open-positions__contract-types-selector-container--mobile"},o().createElement(l.SelectNative,{className:"open-positions__accumulator-container-mobile__contract-dropdown",list_items:ye,value:ie,should_show_empty_option:!1,onChange:function(e){return ce(e.target.value)}}),fe&&!Y&&o().createElement(l.SelectNative,{className:"open-positions__accumulator-container--mobile__rates-dropdown",list_items:ge,value:_e,should_show_empty_option:!1,onChange:function(e){return de(e.target.value)}})))),(Ne="open-positions",xe=(0,i.isMobile)()?5:63,fe?(Ne="open-positions-accumulator open-positions",xe=(0,i.isMobile)()?3:68):ve&&(Ne="open-positions-multiplier open-positions",xe=(0,i.isMobile)()?3:68),o().createElement(O,j({className:Ne,columns:Ce,is_empty:0===Ee.length,row_size:xe},ke))))}));const W=(0,a.withRouter)(U);var B=n("react-router"),q=n("../../node_modules/react-loadable/lib/index.js"),G=n.n(q);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e){var t=e.id,n=e.className,r=e.selected_value,a=e.value,i=e.label,c=e.onChange;return o().createElement("label",{htmlFor:t,className:p()("composite-calendar-modal__radio",n,{"composite-calendar-modal__radio--selected":r===a}),onClick:function(){return c({label:i,value:a})}},o().createElement("input",{className:"composite-calendar-modal__radio-input",id:t,type:"radio",value:a}),o().createElement("span",{className:p()("composite-calendar-modal__radio-circle",{"composite-calendar-modal__radio-circle--selected":r===a})}),o().createElement(l.Text,{as:"p",color:"prominent",size:"xs",line_height:"unset",weight:r===a?"bold":"normal"},i))},Z="custom",K=o().memo((function(e){var t,n=e.input_date_range,r=e.current_focus,a=e.duration_list,s=e.onChange,u=e.setCurrentFocus,m=e.from,_=e.to,d=n||(null==a?void 0:a.find((function(e){return"all_time"===e.value}))),p=V(o().useState(m?(0,i.toMoment)(m).format("YYYY-MM-DD"):void 0),2),f=p[0],v=p[1],y=V(o().useState(_?(0,i.toMoment)(_).format("YYYY-MM-DD"):void 0),2),g=y[0],E=y[1],h=V(o().useState(!1),2),b=h[0],C=h[1],w=V(o().useState(d),2),N=w[0],x=w[1],k=V(o().useState(d),2),M=k[0],z=k[1],D=(0,i.toMoment)().format("YYYY-MM-DD"),S=function(e,t){var n=e.duration;s({from:t||n?(0,i.toMoment)().startOf("day").subtract(n,"day").add(1,"s"):void 0,to:(0,i.toMoment)().endOf("day"),is_batch:!0},{date_range:e})},T=function(){var e,t,n;null!=M&&M.onClick?S(M):(null==M?void 0:M.value)===Z&&(e=f||g||D,t=g||D,n=Object.assign(M,{label:"".concat((0,i.toMoment)(e).format("DD MMM YYYY")," - ").concat((0,i.toMoment)(t).format("DD MMM YYYY"))}),s({from:(0,i.toMoment)(e).startOf("day").add(1,"s"),to:(0,i.toMoment)(t).endOf("day"),is_batch:!0},{date_range:n})),x(M),C(!1)},I=function(e,t){var n,r;z({value:Z}),"from"===t&&v(null===(n=e.target)||void 0===n?void 0:n.value),"to"===t&&E(null===(r=e.target)||void 0===r?void 0:r.value)},L=function(e){z((null==a?void 0:a.find((function(t){return e&&t.value===e.value})))||e)};return o().createElement(o().Fragment,null,o().createElement("div",{className:"composite-calendar__input-fields composite-calendar__input-fields--fill"},o().createElement(l.InputField,{id:"dt_calendar_input",current_focus:null!=r?r:"",is_read_only:!0,icon:function(){return o().createElement(l.Icon,{icon:"IcCalendarDatefrom",className:"inline-icon"})},onClick:function(){z(N),C(!0)},setCurrentFocus:u,value:null!==(t=null==N?void 0:N.label)&&void 0!==t?t:""})),o().createElement(l.MobileDialog,{portal_element_id:"modal_root",title:(0,c.localize)("Please select duration"),visible:b,has_content_scroll:!0,onClose:function(){return C(!1)},content_height_offset:"94px",footer:o().createElement("div",{className:"composite-calendar-modal__actions"},o().createElement(l.Button,{className:"composite-calendar-modal__actions__cancel",text:(0,c.localize)("Cancel"),onClick:function(){return C(!1)},has_effect:!0,secondary:!0,large:!0}),o().createElement(l.Button,{className:"composite-calendar-modal__actions__ok",text:(0,c.localize)("OK"),onClick:T,has_effect:!0,primary:!0,large:!0}))},o().createElement("div",{className:"composite-calendar-modal"},o().createElement("div",{className:"composite-calendar-modal__radio-group"},null==a?void 0:a.map((function(e){return o().createElement(H,{id:"composite-calendar-modal__radio__".concat(e.value),key:e.value,value:e.value,label:e.label,selected_value:null==M?void 0:M.value,onChange:L})}))),o().createElement("div",{className:"composite-calendar-modal__custom"},o().createElement(H,{id:"composite-calendar-modal__custom-radio",className:"composite-calendar-modal__custom-radio",value:Z,label:(0,c.localize)("Custom"),selected_value:null==M?void 0:M.value,onChange:L}),o().createElement("div",{className:"composite-calendar-modal__custom-date-range"},o().createElement(l.DatePicker,{className:"composite-calendar-modal__custom-date-range-start-date",placeholder:(0,c.localize)("Start date"),value:null!=f?f:"",max_date:g||D,onChange:function(e){return I(e,"from")}}),o().createElement(l.DatePicker,{className:"composite-calendar-modal__custom-date-range-end-date",placeholder:(0,c.localize)("End date"),value:null!=g?g:"",max_date:D,min_date:f,onChange:function(e){return I(e,"to")}}))),o().createElement(l.Button,{className:"composite-calendar-modal__actions-today",text:(0,c.localize)("Back to today"),onClick:function(){var e={duration:0,label:(0,c.localize)("Today")};S(e,!0),x(e),z(e),C(!1)},has_effect:!0,tertiary:!0,large:!0}))))}));K.displayName="CompositeCalendarMobile";const J=K;const Q=function(e){var t=e.onClick,n=e.is_active,r=e.label;return o().createElement("li",{className:p()({"composite-calendar__prepopulated-list--is-active":n}),onClick:t},r)};const X=function(e){var t=e.items,n=e.from,r=e.to;return o().createElement("ul",{className:"composite-calendar__prepopulated-list"},t.map((function(e){var t=e.duration,a=e.label,l=e.onClick,c=function(e,t,n){return 0===n?(0,i.toMoment)().endOf("day").unix()===t&&null===e:Math.ceil(t/86400)-Math.ceil(e/86400)===n}(n,r,t);return o().createElement(Q,{key:t,is_active:c,label:a,onClick:l})})))};const ee=function(e){var t=e.onClick;return o().createElement(l.Icon,{onClick:t,icon:"IcCalendarDatefrom",className:"inline-icon"})};function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te.apply(this,arguments)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oe=G()({loader:function(){return n.e("two-month-picker").then(n.bind(n,"./src/Components/Form/CompositeCalendar/two-month-picker.tsx"))},loading:function(){return null},render:function(e,t){var n=e.default;return o().createElement(n,t)}}),ae=(0,f.Pi)((function(e){var t=(0,f.oR)().ui,n=t.current_focus,r=t.setCurrentFocus,a=e.onChange,s=e.to,u=e.from,m=ne(o().useState(!1),2),_=m[0],d=m[1],p=ne(o().useState(!1),2),v=p[0],y=p[1],g=ne(o().useState([{value:"all_time",label:(0,c.localize)("All time"),onClick:function(){return h()},duration:0},{value:"last_7_days",label:(0,c.localize)("Last 7 days"),onClick:function(){return h(7)},duration:7},{value:"last_30_days",label:(0,c.localize)("Last 30 days"),onClick:function(){return h(30)},duration:30},{value:"last_60_days",label:(0,c.localize)("Last 60 days"),onClick:function(){return h(60)},duration:60},{value:"last_quarter",label:(0,c.localize)("Last quarter"),onClick:function(){return h(90)},duration:90}]),1)[0],E=o().useRef(null),h=function(e){b(),a({from:e?(0,i.toMoment)().startOf("day").subtract(e,"day").add(1,"s"):void 0,to:(0,i.toMoment)().endOf("day"),is_batch:!0})},b=function(){y(!1),d(!1)},C=function(e){"from"===e&&y(!0),"to"===e&&d(!0)};(0,l.useOnClickOutside)(E,(function(e){null==e||e.stopPropagation(),null==e||e.preventDefault(),b()}),(function(e){var t;return!(null!==(t=E.current)&&void 0!==t&&t.contains(e.target))}));var w;return o().createElement(o().Fragment,null,o().createElement(l.DesktopWrapper,null,o().createElement("div",{id:"dt_composite_calendar_inputs",className:"composite-calendar__input-fields"},o().createElement(l.InputField,{id:"dt_calendar_input_from",current_focus:n,is_read_only:!0,placeholder:(0,c.localize)("Date from"),icon:ee,onClick:function(){return C("from")},setCurrentFocus:r,value:(w=(0,i.toMoment)(u),u?w.format("MMM, DD YYYY"):"")}),o().createElement(l.InputField,{id:"dt_calendar_input_to",current_focus:n,is_read_only:!0,placeholder:(0,c.localize)("Date to"),icon:ee,onClick:function(){return C("to")},setCurrentFocus:r,value:function(){var e=(0,i.toMoment)(s);return 0===(0,i.daysFromTodayTo)(e)?(0,c.localize)("Today"):e.format("MMM, DD YYYY")}()})),_&&o().createElement("div",{className:"composite-calendar",ref:E},o().createElement(X,{from:u,to:s,items:g}),o().createElement(oe,{value:s,onChange:function(e){a({to:(0,i.toMoment)(e).endOf("day")})},isPeriodDisabled:function(e){return e.unix()<u||e.unix()>(0,i.toMoment)().endOf("day").unix()}})),v&&o().createElement("div",{className:"composite-calendar",ref:E},o().createElement(X,{from:u,to:s,items:g}),o().createElement(oe,{value:u,onChange:function(e){a({from:(0,i.toMoment)(e)}),b()},isPeriodDisabled:function(e){return e.unix()>s}}))),o().createElement(l.MobileWrapper,null,o().createElement(J,te({duration_list:g,setCurrentFocus:r,current_focus:n},e))))}));ae.displayName="CompositeCalendar";const le=o().memo(ae);var ie=function(e){var t=e.filter_component,n=e.className,r=e.optional_component,a=e.is_statement;return o().createElement("div",{className:p()("reports__meta",n)},r,t&&o().createElement("div",{className:p()("reports__meta-filter",{"reports__meta-filter--statement":a})},t))},ce=n("./src/Stores/useReportsStores.tsx"),se=function(e){var t,n,r,a=null===(t=(0,i.extractInfoFromShortcode)(null==e?void 0:e.shortcode))||void 0===t||null===(n=t.category)||void 0===n?void 0:n.toString().toUpperCase();return(0,i.getSupportedContracts)()[a]&&!(0,i.isForwardStarting)(e.shortcode,Number(e.purchase_time_unix))?(0,i.getContractPath)(Number(e.contract_id)):{component:o().createElement(c.Localize,{i18n_default_text:"The {{trade_type_name}} contract details aren't currently available. We're working on making them available soon.",values:{trade_type_name:null===(r=(0,i.getUnsupportedContracts)()[a])||void 0===r?void 0:r.name}})}},ue=(0,f.Pi)((function(e){var t=e.component_icon,n=(0,f.oR)().client,r=(0,ce.F)().profit_table,a=n.currency,u=n.is_switching,d=r.data,v=r.date_from,y=r.date_to,g=r.error,E=r.is_empty,h=r.is_loading,N=r.handleDateChange,x=r.handleScroll,k=r.has_selected_date,M=r.onMount,z=r.onUnmount,S=r.totals,T=(0,l.usePrevious)(v),I=(0,l.usePrevious)(y);if(o().useEffect((function(){return M(),s.Analytics.trackEvent("ce_reports_form",{action:"choose_report_type",form_name:"default",subform_name:"trade_table_form",start_date_filter:(0,i.formatDate)(v,"DD/MM/YYYY",!1),end_date_filter:(0,i.formatDate)(y,"DD/MM/YYYY",!1)}),function(){z()}}),[]),o().useEffect((function(){void 0!==T&&void 0!==I&&s.Analytics.trackEvent("ce_reports_form",{action:"filter_dates",form_name:"default",subform_name:"trade_table_form",start_date_filter:(0,i.formatDate)(v,"DD/MM/YYYY",!1),end_date_filter:(0,i.formatDate)(y,"DD/MM/YYYY",!1)})}),[y,v]),g)return o().createElement("p",null,g);var L=o().createElement(le,{onChange:N,from:v,to:y}),j=function(e,t){return[{key:"icon",title:(0,i.isMobile)()?"":(0,c.localize)("Type"),col_index:"action_type",renderCellContent:function(e){var n=e.row_obj;return e.is_footer?(0,c.localize)("Profit/loss on the last {{item_count}} contracts",{item_count:t}):o().createElement(b,{key:n.transaction_id,payload:n})}},{title:(0,c.localize)("Ref. ID"),col_index:"transaction_id"},{title:(0,c.localize)("Currency"),col_index:"currency",renderCellContent:function(t){return t.is_footer?"":o().createElement(w,{currency:(0,i.getCurrencyDisplayCode)(e)})}},{title:(0,c.localize)("Buy time"),col_index:"purchase_time",renderCellContent:function(e){var t=e.cell_value;return e.is_footer?"":o().createElement("span",null,t," GMT")}},{title:(0,c.localize)("Buy price"),col_index:"buy_price",renderCellContent:function(t){var n=t.cell_value;return t.is_footer?"":o().createElement(l.Money,{amount:n,currency:e})}},{title:(0,c.localize)("Sell time"),col_index:"sell_time",renderHeader:function(e){var t=e.title;return o().createElement("span",null,t)},renderCellContent:function(e){var t=e.cell_value;return e.is_footer?"":o().createElement("span",null,t," GMT")}},{title:(0,c.localize)("Sell price"),col_index:"sell_price",renderCellContent:function(t){var n=t.cell_value;return t.is_footer?"":o().createElement(l.Money,{amount:n,currency:e})}},{title:(0,c.localize)("Profit / Loss"),col_index:"profit_loss",renderCellContent:function(t){var n=t.cell_value;return o().createElement(C,{value:n},o().createElement(l.Money,{has_sign:!0,amount:n.replace(/[,]+/g,""),currency:e}))}}]}(a,d.length),P=Object.fromEntries(j.map((function(e){return[e.col_index,e]})));return o().createElement(o().Fragment,null,o().createElement(ie,{filter_component:L,className:"profit-table__filter"}),u?o().createElement(D,{is_loading:!0}):o().createElement(o().Fragment,null,0===d.length||E?o().createElement(D,{is_loading:h,has_selected_date:k,is_empty:E,empty_message_component:_,component_icon:t,localized_message:(0,c.localize)("You have no trading activity yet."),localized_period_message:(0,c.localize)("You've made no transactions of this type during this period.")}):o().createElement("div",{className:"reports__content"},o().createElement(l.DesktopWrapper,null,o().createElement(l.DataTable,{className:"profit-table",data_source:d,columns:j,onScroll:x,footer:S,getRowAction:se,getRowSize:function(){return 63},content_loader:m},o().createElement(D,{is_loading:h}))),o().createElement(l.MobileWrapper,null,o().createElement(l.DataList,{className:"profit-table",data_source:d,rowRenderer:function(e){var t=e.row,n=e.is_footer,r=/^(MULTUP|MULTDOWN)/.test(null==t?void 0:t.shortcode)?"":null==t?void 0:t.duration_type,a=r?"duration-type__".concat(r.toLowerCase()):"";return n?o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:t,column:P.action_type,is_footer:n}),o().createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:t,column:P.profit_loss,is_footer:n})):o().createElement(o().Fragment,null,o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:t,column:P.action_type}),o().createElement("div",{className:p()("duration-type",a)},o().createElement("div",{className:p()("duration-type__background","".concat(a,"__background"))}),o().createElement("span",{className:"".concat(a,"__label")},(0,c.localize)(r)))),o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:t,column:P.transaction_id}),o().createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:t,column:P.currency})),o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:t,column:P.purchase_time}),o().createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:t,column:P.buy_price})),o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:t,column:P.sell_time}),o().createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:t,column:P.sell_price})),o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:t,column:P.profit_loss})))},getRowAction:se,onScroll:x,footer:S,row_gap:8},o().createElement(D,{is_loading:h}))))))}));const me=(0,B.withRouter)(ue);var _e=(0,f.Pi)((function(){var e=(0,f.oR)().client,t=(0,ce.F)().statement,n=e.currency,r=t.account_statistics;return o().createElement("div",{className:"statement__account-statistics"},o().createElement("div",{className:"statement__account-statistics-item"},o().createElement("div",{className:"statement__account-statistics--is-rectangle"},o().createElement(l.Text,{color:"less-prominent",className:"statement__account-statistics-title"},(0,c.localize)("Total deposits")," ",o().createElement(l.MobileWrapper,null," (",n,") ")),o().createElement(l.Text,{color:"prominent",weight:"bold",align:"center",className:"statement__account-statistics-amount"},o().createElement(l.Money,{amount:r.total_deposits,currency:n})))),o().createElement("div",{className:"statement__account-statistics-item statement__account-statistics-total-withdrawal"},o().createElement("div",{className:"statement__account-statistics--is-rectangle"},o().createElement(l.Text,{color:"less-prominent",className:"statement__account-statistics-title"},(0,c.localize)("Total withdrawals")," ",o().createElement(l.MobileWrapper,null," (",n,") ")),o().createElement(l.Text,{color:"prominent",weight:"bold",align:"center",className:"statement__account-statistics-amount"},o().createElement(l.Money,{amount:r.total_withdrawals,currency:n})))),o().createElement("div",{className:"statement__account-statistics-item"},o().createElement("div",{className:"statement__account-statistics--is-rectangle"},o().createElement(l.Text,{color:"less-prominent",className:"statement__account-statistics-title"},(0,c.localize)("Net deposits")," ",o().createElement(l.MobileWrapper,null," (",n,") ")),o().createElement(l.Text,{color:"prominent",weight:"bold",align:"center",className:"statement__account-statistics-amount"},o().createElement(l.Money,{amount:r.total_deposits-r.total_withdrawals,currency:n})))))}));const de=_e;var pe=(0,f.Pi)((function(){var e=(0,ce.F)().statement,t=e.action_type,n=e.date_from,r=e.date_to,a=e.handleFilterChange,i=e.handleDateChange,s=[{text:(0,c.localize)("All transactions"),value:"all"},{text:(0,c.localize)("Buy"),value:"buy"},{text:(0,c.localize)("Sell"),value:"sell"},{text:(0,c.localize)("Deposit"),value:"deposit"},{text:(0,c.localize)("Withdrawal"),value:"withdrawal"},{text:(0,c.localize)("Transfer"),value:"transfer"}];return o().createElement(o().Fragment,null,o().createElement(le,{onChange:i,from:n,to:r}),o().createElement(l.FilterDropdown,{dropdown_display_className:"dc-dropdown__display--has-suffix-icon",filter_list:s,handleFilterChange:a,initial_selected_filter:t}))}));const fe=pe;function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}var ye=function(e){var t=e.message,n=void 0===t?"":t,r=e.action_type,a=void 0===r?"":r,i=/:\s([0-9a-zA-Z]+.{25,28})/gm.exec(n.split(/,\s/)[0]),c=null==i?void 0:i[1],s=/:\s([0-9a-zA-Z]+.{25,34})/gm.exec(n.split(/,\s/)[1]),u=null==s?void 0:s[1],m=[n];if(c||u){var _=n.split(/,\s/);m=_.map((function(e,t){return t!==_.length-1?"".concat(e,", "):e}))}return o().createElement(l.Text,{as:"div",size:"xs",className:"statement__row--detail-text",align:"center"},m.map((function(e,t){return o().createElement("div",{key:e},e,u&&t===m.length-1&&o().createElement(l.Clipboard,{text_copy:u,popoverAlignment:"top"}),c&&"withdrawal"===a&&t===m.length-1&&o().createElement(l.Clipboard,{text_copy:c,popoverAlignment:"top"}))})))},ge=function(e){var t,n={};if(e.id&&["buy","sell"].includes(e.action_type)){var r,a,l,s=null===(r=(0,i.extractInfoFromShortcode)(e.shortcode))||void 0===r||null===(a=r.category)||void 0===a?void 0:a.toUpperCase();n=(0,i.getSupportedContracts)()[s]&&!(0,i.isForwardStarting)(e.shortcode,e.purchase_time||e.transaction_time)?(0,i.getContractPath)(e.id):{message:"",component:o().createElement(c.Localize,{i18n_default_text:"The {{trade_type_name}} contract details aren't currently available. We're working on making them available soon.",values:{trade_type_name:null===(l=(0,i.getUnsupportedContracts)()[s])||void 0===l?void 0:l.name}})}}else"withdrawal"===e.action_type?n=e.withdrawal_details&&e.longcode?{message:"".concat(e.withdrawal_details," ").concat(e.longcode)}:{message:e.desc}:e.desc&&["deposit","transfer","adjustment","hold","release"].includes(e.action_type)&&(n={message:e.desc});return"object"===ve(n)&&null!==(t=n)&&void 0!==t&&t.message&&(n.component=o().createElement(ye,{message:n.message,action_type:e.action_type})),n},Ee=(0,f.Pi)((function(e){var t=e.component_icon,n=(0,f.oR)().client,r=(0,ce.F)().statement,a=n.currency,u=n.standpoint,d=n.is_switching,p=n.is_virtual,v=r.action_type,g=r.data,E=r.date_from,h=r.date_to,C=r.error,x=r.handleScroll,k=r.has_selected_date,M=r.is_empty,z=r.is_loading,S=r.onMount,T=r.onUnmount,I=u.iom||u.malta,L=(0,l.usePrevious)(v),j=(0,l.usePrevious)(E),P=(0,l.usePrevious)(h);if(o().useEffect((function(){return S(),s.Analytics.trackEvent("ce_reports_form",{action:"choose_report_type",form_name:"default",subform_name:"statement_form",transaction_type_filter:v,start_date_filter:(0,i.formatDate)(E,"DD/MM/YYYY",!1),end_date_filter:(0,i.formatDate)(h,"DD/MM/YYYY",!1)}),function(){T()}}),[]),o().useEffect((function(){L&&s.Analytics.trackEvent("ce_reports_form",{action:"filter_transaction_type",form_name:"default",subform_name:"statement_form",transaction_type_filter:v})}),[v]),o().useEffect((function(){void 0!==j&&void 0!==P&&s.Analytics.trackEvent("ce_reports_form",{action:"filter_dates",form_name:"default",subform_name:"statement_form",start_date_filter:(0,i.formatDate)(E,"DD/MM/YYYY",!1),end_date_filter:(0,i.formatDate)(h,"DD/MM/YYYY",!1)})}),[h,E]),C)return o().createElement("p",null,C);var Y=function(e){return[{key:"icon",title:(0,i.isMobile)()?"":(0,c.localize)("Type"),col_index:"icon",renderCellContent:function(e){var t=e.passthrough,n=e.row_obj,r=t.isTopUp(n)?"icCashierTopUp":null;return o().createElement(b,{icon:r,key:n.transaction_id,payload:n})}},{title:(0,c.localize)("Ref. ID"),col_index:"refid",renderCellContent:function(e){var t=e.cell_value,n=e.row_obj;return o().createElement(l.Popover,{alignment:"top",message:(0,c.localize)("Transaction performed by (App ID: {{app_id}})",{app_id:n.app_id})},t)}},{title:(0,c.localize)("Currency"),col_index:"currency",renderCellContent:function(){return o().createElement(w,{currency:(0,i.getCurrencyDisplayCode)(e)})}},{title:(0,c.localize)("Transaction time"),col_index:"date",renderCellContent:function(e){var t=e.cell_value;return o().createElement("span",null,t," GMT")}},{key:"mode",title:(0,c.localize)("Transaction"),col_index:"action_type",renderCellContent:function(e){var t,n=e.cell_value,r=e.passthrough,a=e.row_obj;return o().createElement(l.Label,{mode:(t=n,N[t]||N.default)},r.isTopUp(a)&&(0,c.localize)("Top up")||a.action)}},{title:(0,c.localize)("Credit/Debit"),col_index:"amount",renderCellContent:function(t){var n=t.cell_value;return o().createElement("div",{className:"amount--".concat(y(n))},o().createElement(l.Money,{has_sign:!0,amount:n.replace(/[,]+/g,""),currency:e}))}},{title:(0,c.localize)("Balance"),col_index:"balance",renderCellContent:function(t){var n=t.cell_value;return o().createElement(l.Money,{amount:n.replace(/[,]+/g,""),currency:e})}}]}(a),A=Y.reduce((function(e,t){return e[t.col_index]=t,e}),{});return o().createElement(o().Fragment,null,o().createElement(ie,{className:I?void 0:"reports__meta--statement",filter_component:o().createElement(fe,null),is_statement:!0,optional_component:!d&&I&&o().createElement(de,null)}),d?o().createElement(D,{is_loading:!0}):o().createElement(o().Fragment,null,0===(null==g?void 0:g.length)||M?o().createElement(D,{is_loading:z,has_selected_date:k,is_empty:M,empty_message_component:_,component_icon:t,localized_message:(0,c.localize)("You have no transactions yet."),localized_period_message:(0,c.localize)("You've made no transactions of this type during this period.")}):o().createElement("div",{className:"reports__content"},o().createElement(l.DesktopWrapper,null,o().createElement(l.DataTable,{className:"statement",columns:Y,content_loader:m,data_source:g,getRowAction:ge,onScroll:x,passthrough:{isTopUp:function(e){return p&&"Deposit"===e.action}}},o().createElement(D,{is_loading:z}))),o().createElement(l.MobileWrapper,null,o().createElement(l.DataList,{className:"statement",data_source:g,getRowAction:ge,onScroll:x,rowRenderer:function(e){var t=e.row,n=e.passthrough;return o().createElement(o().Fragment,null,o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:t,column:A.icon,passthrough:n}),o().createElement(l.DataList.Cell,{row:t,column:A.action_type,passthrough:n})),o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:t,column:A.refid}),o().createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:t,column:A.currency})),o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:t,column:A.date}),o().createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:t,column:A.amount})),o().createElement("div",{className:"data-list__row"},o().createElement(l.DataList.Cell,{row:t,column:A.balance})))},row_gap:8,passthrough:{isTopUp:function(e){return p&&"Deposit"===e.action}}},o().createElement(D,{is_loading:z}))))))}));const he={OpenPositions:W,ProfitTable:me,Statement:(0,a.withRouter)(Ee),Reports:(0,f.Pi)((function(e){var t,n=e.history,r=e.location,a=e.routes,u=(0,f.oR)(),m=u.client,_=u.common,d=u.ui,p=m.is_logged_in,v=m.is_logging_in,y=m.setVisibilityRealityCheck,g=_.is_from_derivgo,E=_.routeBackInApp,h=d.is_reports_visible,b=d.setReportsTabIndex,C=d.reports_route_tab_index,w=d.toggleReports;o().useEffect((function(){return s.Analytics.trackEvent("ce_reports_form",{action:"open",form_name:"default",subform_name:n.location.pathname.split("/")[2],form_source:"deriv_trader"}),w(!0),function(){y(1),w(!1),s.Analytics.trackEvent("ce_reports_form",{action:"close",form_name:"default",subform_name:r.pathname.split("/")[2]})}}),[]);var N=function(){var e=[];return a.forEach((function(t){e.push({default:t.default,icon:t.icon_component,label:t.getTitle(),value:t.component,path:t.path})})),e},x=(0,i.getSelectedRoute)({routes:a,pathname:r.pathname});return!p&&v?o().createElement(l.Loading,{is_fullscreen:!0}):o().createElement(l.FadeWrapper,{is_visible:h,className:"reports-page-wrapper",keyname:"reports-page-wrapper"},o().createElement("div",{className:"reports"},o().createElement(l.PageOverlay,{header:(0,c.localize)("Reports"),onClickClose:function(){return E(n)},is_from_app:g},o().createElement(l.DesktopWrapper,null,o().createElement(l.VerticalTab,{is_floating:!0,current_path:r.pathname,is_routed:!0,is_full_width:!0,setVerticalTabIndex:b,vertical_tab_index:x.default?0:C,list:N()})),o().createElement(l.MobileWrapper,null,o().createElement(l.Div100vhContainer,{className:"reports__mobile-wrapper",height_offset:"80px"},o().createElement(l.SelectNative,{className:"reports__route-selection",list_items:N().map((function(e){var t;return{text:e.label,value:null!==(t=e.path)&&void 0!==t?t:""}})),value:null!==(t=x.path)&&void 0!==t?t:"",should_show_empty_option:!1,onChange:function(e){return n.push(e.target.value)},label:"",hide_top_placeholder:!1}),(null==x?void 0:x.component)&&o().createElement(x.component,{icon_component:x.icon_component}))))))}))}}}]);
//# sourceMappingURL=reports.reports-routes.cb51ef382281fd07001a.js.map