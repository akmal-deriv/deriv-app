/*! For license information please see trader.screen-large.5ab90dba44333fa0280b.js.LICENSE.txt */
"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["screen-large"],{"./src/Modules/Trading/Components/Form/screen-large.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ve});var r=n("../../node_modules/classnames/index.js"),a=n.n(r),i=n("react"),o=n.n(i),l=n("./src/App/Components/Elements/ContentLoader/index.js"),u=n("./src/App/Components/Form/fieldset.tsx"),c=n("./src/Modules/Trading/Containers/contract-type.tsx"),s=n("./src/Modules/Trading/Containers/purchase.tsx"),m=n("@deriv/shared"),d=n("@deriv/components"),_=n("@deriv/translations"),p=n("./src/Stores/Modules/Trading/Helpers/allow-equals.ts");const f=function(e){var t=e.contract_start_type,n=e.contract_type,r=e.contract_types_list,a=e.duration_unit,i=e.expiry_type,l=e.onChange,u=e.value,c=e.has_equals_only,s=(0,p.OW)(r,a,t),m=(0,p.vy)(r);return(0,p.i$)(n)&&(s||"endtime"===i)&&m&&o().createElement("div",{className:"allow-equals"},o().createElement(d.Checkbox,{className:"allow-equals__input-field",id:"dt_allow_equals_input",onChange:function(e){if(e.persist(),"checked"in e.target){var t=e.target,n=t.name,r=t.checked;l({target:{name:n,value:Number(r)}})}},defaultChecked:!!u,name:"is_equal",label:(0,_.localize)("Allow equals"),classNameLabel:"allow-equals__label",disabled:c}),o().createElement(d.Popover,{alignment:"left",classNameTarget:"allow-equals__tooltip",icon:"info",id:"dt_allow_equals_info",message:(0,_.localize)("Win payout if exit spot is also equal to entry spot."),margin:130,relative_render:!0}))};var v=n("./src/Stores/useTraderStores.tsx"),y=n("../stores/src/index.ts"),h=n("./src/Modules/Trading/Helpers/contract-type.tsx"),g=(0,y.Pi)((function(){var e=(0,v.b)(),t=e.multiplier,n=e.multiplier_range_list,r=e.onChange,a=e.symbol;return o().createElement(d.Dropdown,{id:"multiplier",className:"trade-container__multiplier-dropdown",is_alignment_left:!0,is_nativepicker:!1,list:n,name:"multiplier",no_border:!0,value:t,onChange:r,should_show_new_label:(0,h.hM)(a)})}));const b=g;var E=n("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/info.tsx"),x=n("./src/Modules/Trading/Components/Form/TradeParams/min-max-stake-info.tsx");function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===w(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){var t=e.amount,n=e.currency,r=e.current_focus,a=e.error_messages,i=e.is_single_currency,l=e.is_disabled,u=e.onChange,c=e.setCurrentFocus;return o().createElement(d.InputField,{className:"trade-container__amount",classNameInlinePrefix:"trade-container__currency",classNameInput:"trade-container__input",currency:n,current_focus:r,error_messages:a,fractional_digits:(0,m.getDecimalPlaces)(n),id:"dt_amount_input",inline_prefix:i?n:void 0,is_autocomplete_disabled:!0,is_float:!0,is_hj_whitelisted:!0,is_incrementable:!0,is_negative_disabled:!0,is_disabled:l,max_length:m.AMOUNT_MAX_LENGTH,name:"amount",onChange:u,type:"tel",value:t,ariaLabel:(0,_.localize)("Amount"),setCurrentFocus:c})},S=(0,y.Pi)((function(e){var t,n=e.is_minimized,r=void 0!==n&&n,i=(0,y.oR)(),l=i.ui,c=i.client,s=c.currencies_list,p=c.is_single_currency,h=l.setCurrentFocus,g=l.current_focus,w=(0,v.b)(),S=w.amount,j=w.basis,O=w.basis_list,M=w.contract_start_type,T=w.contract_type,N=w.contract_types_list,A=w.currency,P=w.duration_unit,F=w.expiry_type,D=w.is_accumulator,I=w.is_equal,L=w.is_multiplier,U=w.is_turbos,z=w.is_vanilla,Y=w.has_equals_only,Z=w.has_open_accu_contract,H=w.stake_boundary,q=w.onChange,G=w.validation_errors,R=H[T.toUpperCase()]||{},B=R.min_stake,$=R.max_stake;if(r)return o().createElement("div",{className:"fieldset-minimized fieldset-minimized__amount"},o().createElement("span",{className:"fieldset-minimized__basis"},null===(t=O.find((function(e){return e.value===j})))||void 0===t?void 0:t.text)," ",o().createElement("i",null,o().createElement("span",{className:a()("fieldset-minimized__currency","symbols",C({},"symbols--".concat((A||"").toLowerCase()),A))})),(0,m.addComma)(S,2));var V=null==G?void 0:G.amount;return o().createElement(u.Z,{className:"trade-container__fieldset center-text",header:"high_low"===T||L||D||z||U?(0,_.localize)("Stake"):void 0},O.length>1&&o().createElement(d.ButtonToggle,{id:"dt_amount_toggle",buttons_arr:O.map((function(e){return{text:e.text,value:e.value}})),className:"dropdown--no-margin",is_animated:!0,name:"basis",onChange:q,value:j}),p?o().createElement(k,{amount:S,currency:A,current_focus:g,error_messages:V,is_single_currency:p,is_disabled:Z,onChange:q,setCurrentFocus:h}):o().createElement("div",{className:"trade-container__currency-options"},o().createElement(k,{amount:S,currency:A,current_focus:g,error_messages:V,is_single_currency:p,onChange:q,setCurrentFocus:h}),o().createElement(d.Dropdown,{className:a()({"dc-dropdown-container__currency":!p}),is_alignment_left:!0,is_nativepicker:!1,list:s,name:"currency",initial_offset:256,no_border:!0,value:A,onChange:q})),o().createElement(f,{contract_start_type:M,contract_type:T,contract_types_list:N,duration_unit:P,expiry_type:F,onChange:q,value:Number(I),has_equals_only:Y}),L&&o().createElement(o().Fragment,null,o().createElement(b,null),o().createElement(E.Z,{className:"trade-container__multipliers-trade-info",should_show_tooltip:!0,is_tooltip_relative:!0})),(U||z)&&o().createElement(x.Z,{currency:A,max_stake:$,min_stake:B}))}));const j=S;var O=n("./src/Modules/Trading/Components/Form/TradeParams/barrier.tsx"),M=n("./src/Modules/Trading/Components/Form/TradeParams/Turbos/barrier-selector.tsx"),T=n("mobx-react"),N=n("../../node_modules/prop-types/index.js"),A=n.n(N);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=function(e){var t=e.hover_value,n=e.max_value,r=e.min_value,i=e.onClick,l=e.onMouseEnter,u=e.onMouseLeave,c=e.value;if(!n||!r)return null;var s=function(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Array(n-r+1).keys()),m=function(e){return e+r===c},d=function(e){return e+r<c},_=function(e){return!d(e)&&e+r<=t};return o().createElement(o().Fragment,null,s.map((function(e){return o().createElement("span",{"data-testid":"tick_step_".concat(e+r),key:e,"data-value":e+r,className:a()("range-slider__ticks-step",{"range-slider__ticks-step--active":m(e),"range-slider__ticks-step--marked":d(e),"range-slider__ticks-step--marked-hover":_(e)}),onClick:function(){return i(e+r)},onMouseEnter:function(){return l(e+r)},onMouseLeave:u})})))};F.propTypes={hover_value:A().number,max_value:A().number,min_value:A().number,onClick:A().func,onMouseEnter:A().func,onMouseLeave:A().func,value:A().number};const D=F;function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L=function(e){var t=e.className,n=e.name,r=e.value,i=e.min_value,l=e.max_value,u=e.onChange,c=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o().useState(0),2),s=c[0],m=c[1],p=o().useRef(),f=function(e){var t=e.nativeEvent,n=t.offsetX,r=t.offsetY;(r<=-3||r>=3||n<-3||n>3)&&y()},v=function(e,t){return"".concat(10/(l-i)*(e-i)*2+(t?.8:1.4),"em")},y=function(){s&&(m(0),p.current.style.width=0)},h=s||r;return o().createElement("div",{className:a()("range-slider",t,{"range-slider__error":r<i||r>l})},o().createElement("label",{className:"range-slider__label",htmlFor:"range"},o().createElement("input",{className:"input trade-container__input range-slider__track",id:"dt_duration_range_input",max:l,min:i,name:n,onChange:function(e){var t=+e.target.value;t!==r&&(y(),u({target:{name:n,value:t}}))},tabIndex:"0",type:"range",value:r,"aria-label":"range-input"}),o().createElement("span",{ref:p,className:"range-slider__line range-slider__line--fill",onMouseLeave:f}),o().createElement("div",{className:"range-slider__ticks"},o().createElement(D,{hover_value:s,max_value:l,min_value:i,onClick:function(e){e!==r&&(y(),u({target:{name:n,value:e}}))},onMouseLeave:f,onMouseEnter:function(e){e&&(m(e),p.current.style.width=v(e,!0))},value:r})),o().createElement("div",{className:"range-slider__line",style:{width:"".concat(v(r))}})),o().createElement("div",{className:"range-slider__caption"},!!h&&o().createElement(d.Text,{align:"center",weight:"bold",size:"xs",color:"prominent",id:"dt_range_slider_label"},1===h&&(0,_.localize)("{{display_value}} Tick",{display_value:h}),h>1&&(0,_.localize)("{{display_value}} Ticks",{display_value:h}))))};L.propTypes={className:A().string,max_value:A().number,min_value:A().number,name:A().string,onChange:A().func,value:A().number};const U=L;var z=function(e){var t=e.name,n=e.onChange,r=e.value,i=a()("advanced-simple-toggle__icon","select-arrow",{"advanced-simple-toggle__icon--active":r});return o().createElement(o().Fragment,null,o().createElement("button",{id:r?"dt_advanced_toggle":"dt_simple_toggle",className:"advanced-simple-toggle",onClick:function(){n({target:{value:!r,name:t}})},"aria-label":(0,_.localize)("Toggle between advanced and simple duration settings")},o().createElement(d.Icon,{icon:"IcChevronDown",className:i,classNamePath:"advanced-simple-toggle__icon-path"})))};z.propTypes={name:A().string,onChange:A().func,value:A().bool};const Y=z;var Z=n("./src/Stores/Modules/Trading/Helpers/contract-type.ts");function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function q(){q=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),l=new k(a||[]);return r(o,"_invoke",{value:E(e,n,l)}),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var m={};function d(){}function _(){}function p(){}var f={};u(f,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(S([])));y&&y!==t&&n.call(y,i)&&(f=y);var h=p.prototype=d.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function a(r,i,o,l){var u=s(e[r],e,i);if("throw"!==u.type){var c=u.arg,m=c.value;return m&&"object"==H(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){a("next",e,o,l)}),(function(e){a("throw",e,o,l)})):t.resolve(m).then((function(e){c.value=e,o(c)}),(function(e){return a("throw",e,o,l)}))}l(u.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return{value:void 0,done:!0}}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var l=x(o,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=s(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return _.prototype=p,r(h,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:_,configurable:!0}),_.displayName=u(p,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,l,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},g(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new b(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(h),u(h,l,"Generator"),u(h,i,(function(){return this})),u(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},e}function G(e,t,n,r,a,i,o){try{var l=e[i](o),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){G(i,r,a,o,l,"next",e)}function l(e){G(i,r,a,o,l,"throw",e)}o(void 0)}))}}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const V=(0,y.Pi)((function(e){var t,n,r=e.id,i=e.is_24_hours_contract,l=e.mode,u=e.name,c=(0,y.oR)().common.server_time,s=(0,v.b)(),p=s.duration,f=s.duration_min_max,h=s.duration_units_list,g=s.expiry_type,b=s.onChange,E=s.start_date,x=s.start_time,w=s.symbol,C=s.validation_errors,k=(0,m.useIsMounted)(),S=B(o().useState([]),2),j=S[0],O=S[1],M=B(o().useState([]),2),T=M[0],N=M[1],A=B(o().useState(p),2),P=A[0],F=A[1],D=B(o().useState(),2),I=D[0],L=D[1];o().useEffect((function(){$()}),[]),o().useEffect((function(){P!==p&&F(p)}),[p]);var U,z=function(){var e,t;return(0,m.setTime)((0,m.toMoment)((0,m.hasIntradayDurationUnit)(h)?(0,m.toMoment)(c).clone():(0,m.toMoment)(c).clone().add(null==f||null===(t=f.daily)||void 0===t?void 0:t.min,"second")),(0,m.isTimeValid)(null!=x?x:"")?x:null!==(e=null==c?void 0:c.format("HH:mm:ss"))&&void 0!==e?e:"")},Y=function(){return f.daily?f.daily.max:31536e3},H=function(){var e="duration"===g,t=z().clone().startOf("day");return e&&(0,m.hasIntradayDurationUnit)(h)?t.add(1,"day"):t},G=function(){return"duration"===l},$=o().useCallback(R(q().mark((function e(){var t,n,r,a=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:(0,m.toMoment)().format("YYYY-MM-DD"),n=[],r=[],e.next=5,Z.R.getTradingEvents(t,w);case 5:e.sent.forEach((function(e){var t=e.dates.split(", ");-1!==t.indexOf("Fridays")&&(r=[6,0]),n.push({dates:t,descrip:e.descrip})})),k()&&(O(r),N(n));case 8:case"end":return e.stop()}}),e)}))),[k,w]),V=!(null==C||null===(t=C[u])||void 0===t||!t.length);return o().createElement("div",{className:a()("dc-input-field",{"dc-input-field--has-error":V})},o().createElement(d.Tooltip,{className:"trade-container__tooltip",alignment:"left",message:V?C[u][0]:void 0,has_error:V},o().createElement(d.DatePicker,{id:r,alignment:"left",display_format:"DD MMM YYYY",show_leading_icon:!0,error:null!=C&&null!==(n=C[u])&&void 0!==n&&n.length?"":void 0,mode:l,max_date:(U=E?86400:Y(),i?z().clone().add(U,"second"):z().clone().add(Y(),"second")),min_date:H(),name:u,onChange:function(e){var t;if(k())if(G())F(Number(e.duration));else if(null!==(t=e.target)&&void 0!==t&&t.value){var n;L((0,m.toMoment)(null===(n=e.target)||void 0===n?void 0:n.value))}"function"==typeof b&&e.target&&b({target:{name:e.target.name||"",value:G()?e.target.value:(0,m.toMoment)(e.target.value).format("YYYY-MM-DD")}})},onChangeCalendarMonth:$,has_range_selection:G(),has_today_btn:!G(),footer:G()?P?1==+P?(0,_.localize)("Duration: {{duration}} day",{duration:P}):(0,_.localize)("Duration: {{duration}} days",{duration:P}):(0,_.localize)("Minimum duration is 1 day"):"",events:T,disabled_days:j,keep_open:!0,readOnly:!G(),value:G()?(0,m.toMoment)().add(P,"days").format("YYYY-MM-DD"):I||H()})))}));var W=n("../../node_modules/react-transition-group/esm/CSSTransition.js");function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==X(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===X(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e,t,n,r){for(var a=0;a<t.length;a++)if(e.isBetween(t[a],n[a],r))return!0;return!1}const re=function(e){var t=e.preClass,n=e.selected_time,r=e.end_times,i=e.start_times,l=e.onChange,u=e.className,c=i?i.map((function(e){return(0,m.toMoment)(e)})):[(0,m.toMoment)()],s=r?r.map((function(e){return(0,m.toMoment)(e)})):[(0,m.toMoment)().hour(23).minute(59).seconds(59).milliseconds(999)],d=(0,m.toMoment)(),p=K(n.split(":"),2),f=p[0],v=p[1],y=J(Array(24).keys()).map((function(e){return"0".concat(e).slice(-2)})),h=J(Array(12).keys()).map((function(e){return"0".concat(5*e).slice(-2)})),g=function(e,t,n){if((!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&n){var r=K(n.split(":"),2),a=r[0],i=r[1];if("h"===e&&t!==a||"m"===e&&t!==i){var o="m"===e?t:i;l("".concat("h"===e?t:a,":").concat(o))}}};return o().createElement("div",{className:a()("".concat(t,"__dialog"),"".concat(u))},o().createElement("div",{className:"".concat(t,"__selector")},o().createElement("div",{className:"".concat(t,"__selector--hours")},o().createElement("div",{className:a()("".concat(t,"__selector-list-title"),"center-text")},o().createElement("strong",null,(0,_.localize)("Hour"))),o().createElement("div",null,y.map((function(e){d.hour(Number(e));var r=c.map((function(e){return e.clone().minute(0)})),i=ne(d,r,s),l=ne(d,c,s,"minute"),u=d.minutes()>52?i&&l:i;return o().createElement("div",{className:a()("".concat(t,"__selector-list-item"),Q({},"".concat(t,"__selector-list-item--selected"),f===e),Q({},"".concat(t,"__selector-list-item--disabled"),!u)),key:e,onClick:function(){g("h",e,n,u)}},e)})))),o().createElement("div",{className:"".concat(t,"__selector--minutes")},o().createElement("div",{className:a()("".concat(t,"__selector-list-title"),"center-text")},o().createElement("strong",null,(0,_.localize)("Minute"))),o().createElement("div",null,h.map((function(e){d.hour(Number(f)).minute(Number(e));var r=ne(d,c,s,"minute");return o().createElement("div",{className:a()("".concat(t,"__selector-list-item"),Q({},"".concat(t,"__selector-list-item--selected"),v===e),Q({},"".concat(t,"__selector-list-item--disabled"),!r)),key:e,onClick:function(){g("m",e,n,r)}},e)}))))))};function ae(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ie(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ie(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue="time-picker";const ce=(0,y.Pi)((function(e){var t,n,r=e.end_times,i=e.is_nativepicker,l=e.name,u=e.onChange,c=e.padding,s=e.placeholder,m=e.selected_time,_=e.start_times,p=e.validation_errors,f=(0,y.oR)().ui,v=f.current_focus,h=f.setCurrentFocus,g=oe(o().useState(!1),2),b=g[0],E=g[1],x=oe(o().useState(null),2),w=x[0],C=x[1];o().useEffect((function(){return document.addEventListener("mousedown",S),function(){return document.removeEventListener("mousedown",S)}}));var k=function(e){var t="object"===ie(e)?e.target.value:e;t!==m&&u({target:{name:l,value:t}})},S=function(e){null!=w&&w.contains(e.target)||!b||E(!1)};return o().createElement("div",{ref:function(e){e&&C(e)},className:a()(ue,ae({},"".concat(ue,"--padding"),c))},i?o().createElement("input",{type:"time",id:"dt_".concat(l,"_input"),value:m,onChange:k,name:l,min:null===(t=_[0])||void 0===t?void 0:t.format("HH:mm"),max:null===(n=r[r.length-1])||void 0===n?void 0:n.format("HH:mm")}):o().createElement(o().Fragment,null,o().createElement(d.InputField,{error_messages:p,type:"text",is_hj_whitelisted:!0,is_read_only:!0,id:"dt_".concat(l,"_input"),className:a()("".concat(ue,"-input")),current_focus:v,value:"".concat(m," GMT"),onClick:function(){E(!b)},name:l,placeholder:s,setCurrentFocus:h}),o().createElement(d.Icon,{icon:"IcClockOutline",className:"".concat(ue,"__icon")}),o().createElement(W.Z,{in:b,classNames:{enter:"time-picker__dialog--enter",enterDone:"time-picker__dialog--enter-done",exit:"time-picker__dialog--exit"},timeout:100,unmountOnExit:!0},o().createElement(re,{end_times:r,start_times:_,className:"from-left",onChange:k,preClass:ue,selected_time:m}))))}));var se=n("../../node_modules/moment/moment.js"),me=n.n(se),de=function(e,t){var n=me()(e);return n.minute(Math.ceil(n.minute()/t)*t)};const _e=(0,y.Pi)((function(){var e=(0,y.oR)().common.server_time,t=(0,v.b)(),n=t.expiry_date,r=t.expiry_time,a=t.market_open_times,i=t.market_close_times,l=t.onChange,u=t.is_market_closed,c=(0,m.toMoment)(n),s=a.map((function(e){return(0,m.setTime)(c.clone(),e)})),d=i.map((function(e){return(0,m.setTime)(c.clone(),e)})),_=(0,m.setTime)(c.clone(),r),p=(0,m.toMoment)(e),f=function(e,t,n){var r={start:t.map((function(t){return e.isBefore(t)?me()(t).clone():e})),end:n};return r.start.length>0&&(r.start[0]=de(r.start[0],5)),r}(p.clone(),s,d),h=function(e,t,n,r){for(var a=0;a<n.length;a++)if(t.isAfter(n[a])&&t.isBefore(r[a]))return de(t,5).format("HH:mm");for(var i=0;i<n.length;i++){var o=me()(n[i]);if(o.isAfter(e))return de(o,5).format("HH:mm")}return de(e,5).format("HH:mm")}(p.clone(),_,s,d);return o().useEffect((function(){r===h||u||l({target:{name:"expiry_time",value:h}})}),[r,h,l,u]),o().createElement(ce,{end_times:f.end,onChange:l,name:"expiry_time",placeholder:"12:00",start_times:f.start,selected_time:h})}));var pe=n("./src/Modules/Trading/Components/Form/TradeParams/Duration/expiry-text.jsx"),fe=n("./src/Modules/Trading/Components/Form/TradeParams/Duration/duration-range-text.tsx");function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(this,arguments)}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var he=(0,y.Pi)((function(e){var t,n=e.advanced_duration_unit,r=e.advanced_expiry_type,i=e.changeDurationUnit,l=e.duration_t,u=e.duration_units_list,c=e.expiry_date,s=e.expiry_epoch,_=e.expiry_list,p=e.expiry_type,f=e.getDurationFromUnit,h=e.number_input_props,g=e.onChange,b=e.onChangeUiStore,E=e.server_time,x=e.shared_input_props,w=e.start_date,C=(0,y.oR)().ui,k=C.current_focus,S=C.setCurrentFocus,j=(0,v.b)(),O=j.contract_expiry_type,M=j.duration_min_max,T=j.is_vanilla,N=j.validation_errors,A=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,m.getDurationMinMaxValues)(M,O,n),2),P=A[0],F=A[1],D=!1;if("endtime"===p){var I=(0,m.hasIntradayDurationUnit)(u);D=(!!w||(0,m.toMoment)(c||E).isSame((0,m.toMoment)(E),"day"))&&I}var L=a()("endtime-container",{"has-time":D}),z=!(null==N||null===(t=N.duration)||void 0===t||!t.length),Y=(0,m.getUnitMap)()[n],Z=Y.name_plural,H=Y.name,q=null!=Z?Z:H;return o().createElement(o().Fragment,null,_.length>1&&o().createElement(d.ButtonToggle,{id:"dt_advanced_duration_toggle",buttons_arr:_,name:"advanced_expiry_type",is_animated:!0,onChange:function(e){var t=e.target,n=t.name,r=t.value;g({target:{name:"expiry_type",value:r}}),b({name:n,value:r})},value:r}),"duration"===p?o().createElement(o().Fragment,null,o().createElement("div",{className:"duration-container"},u.length>=1&&o().createElement(d.Dropdown,{classNameDisplay:"dc-dropdown__display--duration",disabled:!1,id:"duration",is_alignment_left:!0,is_nativepicker:!1,list:u,name:"advanced_duration_unit",no_border:!0,onChange:i,value:n}),"t"===n&&"tick"===O&&o().createElement(U,ve({name:"duration",ticks:10,value:l},x)),"d"===n&&o().createElement(V,{id:"dt_advanced_duration_datepicker",mode:"duration",name:"duration",is_24_hours_contract:D}),"t"!==n&&"d"!==n&&o().createElement(d.InputField,ve({id:"dt_advanced_duration_input",classNameInput:"trade-container__input",current_focus:k,error_messages:N.duration,label:1===u.length?u[0].text:null,name:"duration",setCurrentFocus:S,value:f(n)},h,x)),T&&o().createElement(fe.Z,{min:P,max:F,duration_unit_text:q}),"d"===n&&o().createElement(pe.Z,{expiry_epoch:s,has_error:z}))):o().createElement(o().Fragment,null,o().createElement("div",{className:L},o().createElement(V,{id:"dt_advanced_duration_datepicker",name:"expiry_date",is_24_hours_contract:D}),D&&o().createElement(_e,null),!D&&o().createElement(pe.Z,{expiry_epoch:s}))))}));he.propTypes={advanced_duration_unit:A().string,advanced_expiry_type:A().string,changeDurationUnit:A().func,duration_t:A().number,duration_units_list:T.PropTypes.arrayOrObservableArray,expiry_date:A().oneOfType([A().string,A().number]),expiry_list:A().array,expiry_type:A().string,getDurationFromUnit:A().func,number_input_props:A().object,onChange:A().func,onChangeUiStore:A().func,server_time:A().object,shared_input_props:A().object,start_date:A().oneOfType([A().number,A().string])};const ge=he;function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}var Ee=(0,y.Pi)((function(e){var t,n,r,a=e.changeDurationUnit,i=e.duration_t,l=e.duration_units_list,u=e.getDurationFromUnit,c=e.number_input_props,s=e.shared_input_props,m=(0,y.oR)().ui,_=m.current_focus,p=m.setCurrentFocus,f=m.simple_duration_unit,h=(0,v.b)(),g=h.contract_expiry_type,b=h.validation_errors,E=!l.some((function(e){return"t"===e.value}));return o().createElement(o().Fragment,null,l.length>1&&o().createElement(d.ButtonToggle,{id:"dt_simple_duration_toggle",buttons_arr:(n=l,r=n.filter((function(e){return"t"===e.value||"m"===e.value})),r.length<=1?[]:r),is_animated:!0,name:"simple_duration_unit",onChange:a,value:f}),"t"===f&&"tick"===g&&o().createElement(U,be({name:"duration",value:i,ticks:10},s)),"d"===f&&o().createElement(V,{id:"dt_simple_duration_datepicker",mode:"duration",name:"duration"}),"t"!==f&&"d"!==f&&o().createElement(d.InputField,be({id:"dt_simple_duration_input",classNameInput:"trade-container__input",current_focus:_,error_messages:b.duration,name:"duration",label:E?null===(t=l[0])||void 0===t?void 0:t.text:null,setCurrentFocus:p,value:u(f)},c,s)))}));Ee.propTypes={changeDurationUnit:A().func,duration_t:A().number,duration_units_list:T.PropTypes.arrayOrObservableArray,getDurationFromUnit:A().func,number_input_props:A().object,shared_input_props:A().object};const xe=Ee;function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ce.apply(this,arguments)}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==we(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===we(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=function(e){var t=e.advanced_duration_unit,n=e.advanced_expiry_type,r=e.contract_type,i=e.duration_t,l=e.duration_unit,c=e.duration_units_list,s=e.duration,p=e.expiry_date,f=e.expiry_epoch,v=e.expiry_time,y=e.expiry_type,h=e.getDurationFromUnit,g=e.hasDurationUnit,b=e.is_advanced_duration,E=e.is_minimized,x=e.market_open_times,w=e.max_value,C=e.min_value,k=e.onChange,S=e.onChangeMultiple,j=e.onChangeUiStore,O=e.server_time,M=e.simple_duration_unit,T=e.start_date;o().useEffect((function(){(0,m.isVanillaContract)(r)&&I({target:{value:!0,name:"is_advanced_duration"}})}),[r]);var N=[{text:(0,_.localize)("Duration"),value:"duration"}],A=N.find((function(e){return"endtime"===e.value}));if(1===c.length&&"t"===l?A&&N.pop():A||N.push({text:(0,_.localize)("End time"),value:"endtime"}),E){var P=(0,m.toMoment)(p),F=(c.find((function(e){return e.value===l}))||{}).text;return o().createElement("div",{className:"fieldset-minimized fieldset-minimized__duration"},"duration"===y?"".concat(s," ").concat(F):"".concat(P.format("ddd - DD MMM, YYYY"),"\n").concat(v))}var D=function(e){var t=e.target,n=t.name,r=t.value,a=h(r);j({name:n,value:r}),S({duration_unit:r,duration:a})},I=function(e){var r=e.target,a=r.name,i=r.value;j({name:a,value:i});var o=i?t:M,u=h(o);g(o,i)||(o=c[0].value,j({name:"".concat(i?"advanced":"simple","_duration_unit"),value:o}));var m={};i||"duration"===y||(m.expiry_type="duration"),i&&y!==n&&(m.expiry_type=n),o===l&&u===s||(m.duration_unit=o,m.duration=u),Object.keys(m).length&&S(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},m))},L={shared_input:{is_hj_whitelisted:!0,onChange:function(e){var n=e.target,r=n.name,a=n.value,i="duration_".concat(b?t:M);j({name:i,value:+a}),k({target:{name:r,value:+a}})},max_value:w,min_value:C},number_input:{type:"number",is_incrementable:!0}},z=N.length>1||c.length>1;return o().createElement(u.Z,{className:a()("trade-container__fieldset",{"trade-container__fieldset--advanced":b})},1===c.length&&!b&&o().createElement(d.Dropdown,{classNameDisplay:"dc-dropdown__display--duration",disabled:!1,id:"duration",is_alignment_left:!0,is_nativepicker:!1,list:c,name:"simple_duration_unit",no_border:!0,onChange:D,value:M}),!z&&o().createElement(U,Ce({name:"duration",value:i},L.shared_input)),z&&o().createElement(o().Fragment,null,b&&o().createElement(ge,{advanced_duration_unit:t,advanced_expiry_type:n,changeDurationUnit:D,duration_t:i,duration_units_list:c,expiry_date:p,expiry_epoch:f,expiry_list:N,expiry_type:y,getDurationFromUnit:h,market_open_times:x,number_input_props:L.number_input,onChange:k,onChangeUiStore:j,server_time:O,shared_input_props:L.shared_input,start_date:T}),!b&&o().createElement(xe,{getDurationFromUnit:h,changeDurationUnit:D,duration_t:i,duration_units_list:c,number_input_props:L.number_input,shared_input_props:L.shared_input,simple_duration_unit:M}),!(0,m.isVanillaContract)(r)&&o().createElement(Y,{name:"is_advanced_duration",onChange:I,value:b})))};je.propTypes={advanced_duration_unit:A().string,advanced_expiry_type:A().string,contract_type:A().string,duration:A().number,duration_t:A().number,duration_unit:A().string,duration_units_list:T.PropTypes.arrayOrObservableArray,expiry_date:A().oneOfType([A().string,A().number]),expiry_time:A().string,expiry_type:A().string,getDurationFromUnit:A().func,hasDurationUnit:A().func,is_advanced_duration:A().bool,is_minimized:A().bool,market_open_times:A().array,max_value:A().number,min_value:A().number,number_input:A().object,onChange:A().func,onChangeMultiple:A().func,onChangeUiStore:A().func,server_time:A().object,shared_input:A().object,simple_duration_unit:A().string,start_date:A().oneOfType([A().number,A().string]),validation_errors:A().object};const Oe=je;function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Me.apply(this,arguments)}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||Ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pe=(0,y.Pi)((function(){var e=(0,y.oR)().ui,t=e.advanced_expiry_type,n=e.advanced_duration_unit,r=e.getDurationFromUnit,a=e.is_advanced_duration,i=e.onChangeUiStore,l=e.simple_duration_unit,u=e.duration_t,c=(0,v.b)(),s=c.contract_expiry_type,d=c.contract_type,_=c.duration,p=c.duration_unit,f=c.duration_units_list,h=c.duration_min_max,g=c.expiry_type,b=c.expiry_date,E=c.expiry_epoch,x=c.expiry_time,w=c.start_date,C=c.market_open_times,k=c.onChange,S=c.onChangeMultiple,j={advanced_duration_unit:n,advanced_expiry_type:t,contract_expiry_type:s,contract_type:d,duration_min_max:h,duration_t:u,duration_unit:p,duration_units_list:f,duration:_,expiry_date:b,expiry_epoch:E,expiry_time:x,expiry_type:g,getDurationFromUnit:r,is_advanced_duration:a,market_open_times:C,onChange:k,onChangeMultiple:S,onChangeUiStore:i,simple_duration_unit:l,start_date:w},O=function(e,t){var n=function(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(f);return n.length>1&&!t&&(n=n.filter((function(e){return"m"===e.value||"t"===e.value}))),n.some((function(t){return t.value===e}))},M=o().useCallback((function(e){var t=Te((0,m.getDurationMinMaxValues)(h,s,p),2),n=t[0],r=t[1];"tick"===s&&e<n&&(i({name:"duration_".concat(p),value:n}),k({target:{name:"duration",value:n}})),!(e<n)&&e>r&&"d"!==p&&(i({name:"duration_".concat(p),value:r}),k({target:{name:"duration",value:r}}))}),[s,p,h,k,i]);o().useEffect((function(){"d"===p&&i({name:"is_advanced_duration",value:!0})}),[p,i]),o().useEffect((function(){var e=a?n:l,t=r(e);p!==e&&i({name:"".concat(a?"advanced":"simple","_duration_unit"),value:p}),+_!=+t&&i({name:"duration_".concat(p),value:_}),"endtime"===g&&(f.length>1||a?(a||i({name:"is_advanced_duration",value:!0}),i({name:"advanced_expiry_type",value:"endtime"})):k({target:{name:"expiry_type",value:"duration"}})),M(t)}),[]),o().useEffect((function(){a&&g!==t&&k({target:{name:"expiry_type",value:t}})}),[a,g,t,k]),o().useEffect((function(){var e=r(p);!a&&"duration"!==g&&k({target:{name:"expiry_type",value:"duration"}}),_!==e&&i({name:"duration_".concat(p),value:_}),M(e)}),[p,a,g,_,M,k,i,r]);var T=!O(a?n:l,a),N=!a&&"d"===l&&4===f.length,A=Te((0,m.getDurationMinMaxValues)(h,s,p),2),P=A[0],F=A[1];return(T||N)&&function(){if((null==f?void 0:f.length)>0){var e=f[0].value,t=r(e);i({name:"".concat(a?"advanced":"simple","_duration_unit"),value:e}),S({duration_unit:e,duration:+t})}}(),o().createElement(Oe,Me({hasDurationUnit:O,max_value:F,min_value:P},j))}));const Fe=Pe;var De=n("./src/Modules/Trading/Components/Form/TradeParams/last-digit.tsx"),Ie=n("./src/Stores/Modules/Trading/Helpers/multiplier.ts");function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Ue=(0,y.Pi)((function(){var e=(0,y.oR)().ui,t=(0,v.b)(),n=t.cancellation_range_list,r=t.cancellation_duration,a=t.has_cancellation,i=t.has_stop_loss,l=t.has_take_profit,c=t.onChangeMultiple,s=e.should_show_cancellation_warning,m=e.toggleCancellationWarning,p=(l||i)&&s,f=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o().useState(!s),2),h=f[0],g=f[1],b=o().useCallback((function(){g((function(e){return!e}))}),[]),E=o().createElement(d.Checkbox,{id:"dt_cancellation-checkbox_input",onChange:function(){return(0,Ie.L)({has_cancellation:a,onChangeMultiple:c})},name:"has_cancellation",label:(0,_.localize)("Deal cancellation"),defaultChecked:a});return o().createElement(o().Fragment,null,!!n.length&&o().createElement(u.Z,{className:"trade-container__fieldset"},o().createElement("div",{className:"dc-input-wrapper--inline"},p?o().createElement(d.Popover,{alignment:"left",classNameBubble:"trade-container__popover",is_bubble_hover_enabled:!0,margin:2,message:o().createElement(d.PopoverMessageCheckbox,{defaultChecked:h,checkboxLabel:(0,_.localize)("Don't show this again"),message:(0,_.localize)("Take profit and/or stop loss are not available while deal cancellation is active."),name:"should_show_cancellation_warning",onChange:b}),onBubbleClose:function(){h&&m()},relative_render:!0},E):o().createElement(o().Fragment,null,E),o().createElement(d.Popover,{alignment:"left",icon:"info",id:"dt_cancellation-checkbox__tooltip",is_bubble_hover_enabled:!0,message:(0,_.localize)("When this is active, you can cancel your trade within the chosen time frame. Your stake will be returned without loss."),classNameBubble:"trade-container__deal-cancellation-popover",margin:216,relative_render:!0})),a&&o().createElement(d.Dropdown,{id:"dt_cancellation_range",className:"trade-container__multiplier-dropdown",is_alignment_left:!0,is_nativepicker:!1,list:n,name:"cancellation_duration",no_border:!0,value:r,onChange:function(e){return(0,Ie.Q)({event:e,onChangeMultiple:c})}})))}));var ze=n("./src/App/Components/Form/number-selector.tsx");const Ye=(0,y.Pi)((function(){var e,t,n=(0,v.b)(),r=n.accumulator_range_list,i=n.growth_rate,l=n.is_accumulator,c=n.onChange,s=n.tick_size_barrier,d=n.proposal_info,p=n.has_open_accu_contract,f=null==r?void 0:r.reduce((function(e,t,n){return n%5==0&&e.push(r.slice(n,n+5)),e}),[]),y=(null==d||null===(e=d.ACCU)||void 0===e?void 0:e.has_error)||!(null!=d&&null!==(t=d.ACCU)&&void 0!==t&&t.id)||(0,m.isEmptyObject)(d);return null!=r&&r.length?o().createElement(u.Z,{className:a()("trade-container__fieldset","accumulator"),header:(0,_.localize)("Growth rate"),is_center:!0,is_tooltip_disabled:y&&l,header_tooltip:(0,_.localize)("Your stake will grow at {{growth_rate}}% per tick as long as the current spot price remains within ±{{tick_size_barrier}} from the previous spot price.",{growth_rate:(0,m.getGrowthRatePercentage)(i),tick_size_barrier:(0,m.getTickSizeBarrierPercentage)(s)})},o().createElement(ze.Z,{arr_arr_numbers:f,name:"growth_rate",onChange:c,selected_number:i,should_show_in_percents:!0,is_disabled:p})):null}));var Ze=n("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/stop-loss.jsx"),He=n("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/take-profit.jsx"),qe=n("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/expiration.jsx"),Ge=n("./src/Modules/Trading/Components/Form/TradeParams/Accumulator/accumulators-info-display.tsx"),Re=n("./src/Modules/Trading/Components/Form/TradeParams/strike.jsx"),Be=n("./src/Modules/Trading/Components/Form/TradeParams/trade-type-tabs.tsx");const $e=(0,y.Pi)((function(e){var t=e.is_minimized,n=void 0!==t&&t,r=(0,v.b)().form_components,i=function(e){return r.includes(e)};return o().createElement(o().Fragment,null,i("duration")&&o().createElement(Fe,{key:"duration",is_minimized:n}),i("barrier")&&o().createElement(O.Z,{key:"barrier",is_minimized:n}),i("last_digit")&&o().createElement(De.Z,{key:"last_digit",is_minimized:n}),i("accumulator")&&o().createElement(Ye,{key:"accumulator"}),(i("trade_type_tabs")||i("strike")||i("barrier_selector"))&&o().createElement(u.Z,{className:a()("trade-container__fieldset","trade-container__fieldset--no-padding")},i("trade_type_tabs")&&o().createElement(Be.Z,{key:"trade_type_tabs"}),i("strike")&&o().createElement(Re.Z,{key:"strike"}),i("barrier_selector")&&o().createElement(M.Z,{key:"barrier_selector"})),i("amount")&&o().createElement(j,{key:"amount",is_minimized:n}),i("take_profit")&&o().createElement(He.Z,{key:"take_profit"}),i("stop_loss")&&o().createElement(Ze.Z,{key:"stop_loss"}),i("cancellation")&&o().createElement(Ue,{key:"cancellation"}),i("expiration")&&o().createElement(qe.Z,{key:"expiration"}),i("accu_info_display")&&o().createElement(Ge.Z,{key:"accu_info_display"}))})),Ve=function(e){var t=e.is_market_closed,n=void 0!==t&&t,r=e.is_trade_enabled;return o().createElement("div",{className:a()("sidebar__items",{"sidebar__items--market-closed":n})},r?o().createElement(o().Fragment,null,o().createElement(u.Z,{className:"trade-container__fieldset trade-types"},o().createElement(c.Z,null)),o().createElement($e,null),o().createElement("div",{className:"purchase-container"},o().createElement(s.Z,{is_market_closed:n}))):o().createElement(l.G,{speed:2}))}}}]);