"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["screen-small"],{"./src/Modules/Trading/Components/Form/screen-small.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>rt});var a=r("react"),n=r.n(a),o=r("@deriv/components"),i=r("./src/App/Components/Elements/ContentLoader/index.js"),l=r("../../node_modules/classnames/index.js"),u=r.n(l),c=r("./src/Stores/useTraderStores.tsx"),s=r("../stores/src/index.ts"),m=r("@deriv/translations"),d=function(e){var t=e.onChange,r=e.is_allow_equal,a=e.has_equals_only,i=e.className;return n().createElement("div",{className:u()("allow-equals","mobile-widget",i)},n().createElement(o.Checkbox,{label:(0,m.localize)("Equals"),value:r,name:"is_equal",onChange:function(e){if(e.persist(),"checked"in e.target){var r=e.target,a=r.name,n=r.checked;t({target:{name:a,value:Number(n)}})}},disabled:a}),n().createElement(o.Text,{as:"p",size:"xxxs"},n().createElement(m.Localize,{i18n_default_text:"Win payout if exit spot is also equal to entry spot."})))};const _=(0,s.Pi)((function(){var e=(0,c.b)(),t={is_allow_equal:!!e.is_equal,has_equals_only:e.has_equals_only,onChange:e.onChange};return n().createElement(d,t)}));var p=r("./src/Stores/Modules/Trading/Helpers/allow-equals.ts"),f=r("@deriv/shared"),b=r("../../node_modules/lodash.debounce/index.js"),v=r.n(b),g=r("./src/Stores/Modules/Trading/Helpers/proposal.ts");function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==y(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=v()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=E(E({},e),t),n=(0,g.RX)(a),o={},i=function(e){!e.error&&e.subscription&&(o[e.subscription.id]=!0,r(e))};if(!(0,f.isEmptyObject)(n)){var l=n;Object.keys(l).forEach((function(e){f.WS.subscribeProposal(l[e],i)}))}return function(){Object.keys(o).forEach((function(e){f.WS.forget(e),delete o[e]}))}}),700),k=r("./src/Modules/Trading/Components/Form/TradeParams/min-max-stake-info.tsx"),S=(0,s.Pi)((function(e){var t=e.basis,r=e.duration_unit,a=e.duration_value,i=e.toggleModal,l=e.has_duration_error,d=e.selected_basis,_=e.setSelectedAmount,p=e.setAmountError,b=(0,s.oR)(),v=b.ui,g=b.client,y=v.addToast,h=g.currency,E=(0,c.b)(),x=E.contract_type,w=E.is_turbos,S=E.is_vanilla,M=E.onChangeMultiple,j=E.amount,C=E.basis,O=E.duration_unit,P=E.duration,N=E.stake_boundary[x.toUpperCase()]||{},T=N.min_stake,A=N.max_stake,z=(0,f.getDecimalPlaces)(h),I=Number("0").toFixed((0,f.getDecimalPlaces)(h)),D=parseFloat(I.toString().replace(/.$/,"1")),F=function(e){var t=n().createElement(m.Localize,{i18n_default_text:"Should not be 0 or empty"}),r=n().createElement(m.Localize,{i18n_default_text:"Stake must be between {{min_stake}} {{currency}} and {{max_stake}} {{currency}}",values:{min_stake:T,currency:h,max_stake:A}}),a=parseFloat(e.toString());return"0."===e.toString()||0===a?(y({key:"amount_error",content:t,type:"error",timeout:2e3}),null==p||p(!0),"error"):isNaN(a)||a<D||e.toString().length<1?(y({key:"amount_error",content:t,type:"error",timeout:2e3}),null==p||p(!0),!1):a<Number(T)?(y({key:"amount_error",content:r,type:"error",timeout:2e3}),null==p||p(!0),"error"):(null==p||p(!1),!0)};return n().createElement(n().Fragment,null,n().createElement("div",{className:"trade-params__stake-container"},(w||S)&&n().createElement(k.Z,{currency:h,max_stake:A,min_stake:T}),n().createElement("div",{className:u()("trade-params__amount-keypad",{strike__pos:S})},n().createElement(o.Numpad,{value:d||"",format:function(e){return isNaN(+e)||""===e?e:Number(e).toFixed(z)},onSubmit:function(e){var n={};r===O||l||(n.duration_unit=r),a===P||l||(n.duration=a),e===j&&t===C||(n.basis=t,n.amount=+e),(0,f.isEmptyObject)(n)||M(n),i()},currency:h,min:D,max:A,is_currency:!0,render:function(e){var t=e.value,r=e.className;return n().createElement("div",{className:r},parseFloat(t)>0?n().createElement(o.Money,{currency:h,amount:t,should_format:!1}):t)},reset_press_interval:450,reset_value:"",pip_size:z,onValidate:F,submit_label:(0,m.localize)("OK"),onValueChange:function(e){_(t,e),F(e)}}))))}));const M=(0,s.Pi)((function(e){var t=e.toggleModal,r=e.duration_value,a=e.duration_unit,i=e.has_duration_error,l=e.amount_tab_idx,u=e.setAmountError,s=e.setAmountTabIdx,m=e.setSelectedAmount,d=e.stake_value,_=e.payout_value,p=(0,c.b)(),f=p.basis,b=p.basis_list,v=void 0!==l?l:b.findIndex((function(e){return e.value===f}));return 1===b.length?n().createElement(S,{toggleModal:t,duration_value:r,duration_unit:a,has_duration_error:i,basis:b[0].value,setAmountError:u,selected_basis:"stake"===b[0].value?d:_,setSelectedAmount:m}):n().createElement("div",null,n().createElement(o.Tabs,{active_index:v,onTabItemClick:s,top:!0},b.map((function(e){switch(e.value){case"stake":return n().createElement("div",{label:e.text,key:e.value},n().createElement(S,{toggleModal:t,duration_value:r,duration_unit:a,has_duration_error:i,basis:e.value,setAmountError:u,selected_basis:d,setSelectedAmount:m}));case"payout":return n().createElement("div",{label:e.text,key:e.value},n().createElement(S,{toggleModal:t,duration_value:r,duration_unit:a,has_duration_error:i,basis:e.value,setAmountError:u,selected_basis:_,setSelectedAmount:m}));default:return null}}))))}));var j=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/info.tsx");function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const P=function(e){var t=e.is_open,r=e.toggleModal;return(0,o.usePreventIOSZoom)(),n().createElement(n().Fragment,null,n().createElement(o.Modal,{id:"dt_trade_parameters_mobile",className:"trade-params dc-modal-header--title-bar",is_open:t,is_title_centered:!0,should_header_stick_body:!1,toggleModal:r,height:"auto",width:"calc(100vw - 32px)",title:(0,m.localize)("Stake")},n().createElement(o.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"48px"},n().createElement(N,{toggleModal:r}))))};var N=(0,s.Pi)((function(e){var t=e.toggleModal,r=(0,c.b)(),a=r.amount,o=C(n().useState(a),2),i=o[0],l=o[1],u=C(n().useState(),2),s=u[0],m=u[1],d=C(n().useState(),2),_=d[0],p=d[1],b=n().useRef(a),v=(0,f.useIsMounted)();return n().useEffect((function(){if(i!==a){var e=w(r,{amount:i},(function(e){var t,r,a=e.proposal,n=e.echo_req,o=e.subscription;v()&&a&&"MULTUP"===n.contract_type&&Number(n.amount)===Number(b.current)?(m(a.commission),(null===(t=a.limit_order)||void 0===t?void 0:t.stop_out)&&p(null===(r=a.limit_order.stop_out)||void 0===r?void 0:r.order_amount)):null!=o&&o.id&&f.WS.forget(o.id)}));return function(){null==e||e()}}}),[i]),n().createElement(n().Fragment,null,n().createElement(M,{toggleModal:t,amount_tab_idx:0,setSelectedAmount:function(e,t){l(t),b.current=t},stake_value:i}),n().createElement(j.Z,{className:"trade-params__multiplier-trade-info",should_show_tooltip:!0,commission:s,stop_out:_,amount:i}))}));const T=function(e){var t,r=e.items_list,a=e.contract_name,i=e.current_value_object,l=e.onChange,u=e.info,c=e.is_tooltip_disabled,s=void 0!==c&&c,m=e.popover_alignment,d=void 0===m?"right":m,_=e.toggleModal,p=e.should_show_tooltip,f=void 0===p||p;return n().createElement(n().Fragment,null,f&&n().createElement("div",{className:"trade-params__".concat(a,"-ic-info-wrapper")},n().createElement(o.Popover,{alignment:d,classNameBubble:"dc-popover__trade-params",disable_target_icon:s,icon:"info",id:"dt_".concat(a,"-stake__tooltip"),is_bubble_hover_enabled:!0,zIndex:"9999",message:u})),n().createElement(o.RadioGroup,{className:"trade-params__".concat(a,"-radio-group"),name:"trade-params__".concat(a,"-radio"),selected:Number.isNaN(i.value)?"":null===(t=i.value)||void 0===t?void 0:t.toString(),onToggle:function(e){l({target:{name:i.name,value:Number(e.target.value)}}),_()}},null==r?void 0:r.map((function(e){var t=e.text,r=e.value;return n().createElement(o.RadioGroup.Item,{key:r,id:t,label:t,value:null==r?void 0:r.toString(),disabled:!1})}))))};function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var I=(0,s.Pi)((function(e){var t=e.toggleModal,r=(0,c.b)(),a=r.amount,o=r.multiplier,i=r.multiplier_range_list,l=r.onChange,u=A(n().useState(),2),s=u[0],m=u[1],d=A(n().useState(),2),_=d[0],p=d[1],b=(0,f.useIsMounted)();return n().useEffect((function(){if(a){var e=w(r,{amount:a},(function(e){var t,r,n=e.echo_req,o=e.proposal,i=e.subscription;b()&&o&&"MULTUP"===n.contract_type&&Number(n.amount)===a?(m(o.commission),(null===(t=o.limit_order)||void 0===t?void 0:t.stop_out)&&p(null===(r=o.limit_order.stop_out)||void 0===r?void 0:r.order_amount)):null!=i&&i.id&&f.WS.forget(i.id)}));return function(){null==e||e()}}}),[a]),n().createElement(n().Fragment,null,n().createElement(T,{contract_name:"multiplier",current_value_object:{name:"multiplier",value:o},items_list:i,onChange:l,toggleModal:t,should_show_tooltip:!1}),n().createElement(j.Z,{className:"trade-params__multiplier-trade-info",should_show_tooltip:!0,commission:s,stop_out:_,amount:a}))}));const D=I,F=(0,s.Pi)((function(e){var t,r,a=e.is_open,i=e.modal_title,l=e.toggleModal,u=(0,c.b)(),s=u.accumulator_range_list,d=u.growth_rate,_=u.onChange,p=u.tick_size_barrier,b=u.proposal_info;(0,o.usePreventIOSZoom)();var v=(null==b||null===(t=b.ACCU)||void 0===t?void 0:t.has_error)||!(null!=b&&null!==(r=b.ACCU)&&void 0!==r&&r.id)||(0,f.isEmptyObject)(b);return n().createElement(n().Fragment,null,n().createElement(o.Modal,{id:"dt_trade_parameters_mobile",className:"trade-params dc-modal-header--title-bar",is_open:a,is_title_centered:!0,should_header_stick_body:!1,toggleModal:l,height:"auto",width:"calc(100vw - 32px)",title:i},n().createElement(o.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"48px"},i===(0,m.localize)("Multiplier")?n().createElement(D,{toggleModal:l}):n().createElement(T,{contract_name:"accumulator",current_value_object:{name:"growth_rate",value:d},info:(0,m.localize)("Your stake will grow at {{growth_rate}}% per tick as long as the current spot price remains within ±{{tick_size_barrier}} from the previous spot price.",{growth_rate:(0,f.getGrowthRatePercentage)(d),tick_size_barrier:(0,f.getTickSizeBarrierPercentage)(p)}),is_tooltip_disabled:v,items_list:null==s?void 0:s.map((function(e){return{text:"".concat((0,f.getGrowthRatePercentage)(e),"%"),value:e}})),onChange:_,popover_alignment:"bottom",toggleModal:l}))))}));var Z=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/expiration.jsx"),L=r("../../node_modules/prop-types/index.js"),q=r.n(L),R=(0,s.Pi)((function(e){var t=e.is_open,r=e.toggleModal,a=(0,s.oR)().ui,i=a.enableApp,l=a.disableApp;return n().createElement(n().Fragment,null,n().createElement(o.Modal,{enableApp:i,is_open:t,disableApp:l,toggleModal:r,has_close_icon:!1,should_header_stick_body:!1,height:"auto",width:"calc(100vw - 3.2rem)",title:(0,m.localize)("Expiration")},n().createElement(o.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"48px"},n().createElement("div",{style:{minHeight:"120px",padding:"1.6rem"}},n().createElement(o.Text,{size:"xs",color:"general"},n().createElement(m.Localize,{i18n_default_text:"Your contract will be closed automatically at the next available asset price on <0></0>.",components:[n().createElement(Z.Z,{key:0,is_text_only:!0,text_size:"xs"})]}))),n().createElement(o.Modal.Footer,{has_separator:!0},n().createElement(o.Button,{style:{width:"100%",height:"4rem"},large:!0,primary:!0,has_effect:!0,text:(0,m.localize)("OK"),onClick:r})))))}));R.propTypes={is_open:q().bool,toggleModal:q().func};const U=R;var G=r("./src/Modules/Trading/Helpers/contract-type.tsx");function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var W=function(e){var t=e.amount,r=e.currency,a=e.expiration,i=e.is_crypto_multiplier,l=$(n().useState(!1),2),u=l[0],c=l[1],s=$(n().useState(!1),2),d=s[0],_=s[1],p=function(){c(!u)},f=function(){_(!d)};return n().createElement(n().Fragment,null,n().createElement(P,{is_open:u,toggleModal:p}),n().createElement("div",{className:"mobile-widget mobile-widget__multiplier",onClick:p},n().createElement("div",{className:"mobile-widget__multiplier-amount"},n().createElement("div",{className:"mobile-widget__item"},n().createElement(o.Text,{weight:"bold",size:"xxs"},n().createElement(o.Money,{amount:t,currency:r,show_currency:!0})))),n().createElement(j.Z,{className:"mobile-widget__multiplier-trade-info",commission_text_size:"xxxxs",stop_out_text_size:"xxxxs"})),i&&n().createElement("div",{className:"mobile-widget",onClick:a?f:null},n().createElement("div",{className:"mobile-widget__multiplier-expiration"},n().createElement(o.Text,{size:"xxs"},(0,m.localize)("Expires on")),n().createElement(Z.Z,{is_text_only:!0,text_size:"xxs"})),n().createElement(U,{is_open:d,toggleModal:f})))},B=(0,s.Pi)((function(){var e=(0,c.b)(),t={amount:e.amount,expiration:e.expiration,currency:e.currency,is_crypto_multiplier:e.is_crypto_multiplier,multiplier:e.multiplier};return n().createElement(W,t)})),Y=function(e){var t=e.displayed_trade_param,r=e.tooltip_message,a=e.is_disabled,i=e.modal_title,l=e.should_show_new_label,c=$(n().useState(!1),2),s=c[0],d=c[1],_=function(){a||d(!s)};return n().createElement(n().Fragment,null,n().createElement(F,{is_open:s,toggleModal:_,modal_title:i}),n().createElement("div",{className:u()("mobile-widget mobile-widget__multiplier-options",{"mobile-widget__label":l}),onClick:_},n().createElement("div",{className:u()("mobile-widget__item",{"mobile-widget__item-disabled":a})},n().createElement("span",{className:"mobile-widget__item-value"},t)),!!r&&n().createElement("span",{className:"mobile-widget__item-tooltip",onClick:function(e){return e.stopPropagation()}},n().createElement(o.Popover,{alignment:"left",classNameBubble:"mobile-widget__item-popover",icon:"info",is_bubble_hover_enabled:!0,zIndex:9999,message:r})),l&&n().createElement(o.Text,{className:"dc-dropdown__label--new",weight:"bold",size:"xxxs",line_height:"s",color:"colored-background"},n().createElement(m.Localize,{i18n_default_text:"NEW!"}))))},H=(0,s.Pi)((function(){var e=(0,c.b)(),t=e.multiplier,r=e.symbol,a="x".concat(t),o=(0,m.localize)("Multiplier");return n().createElement(Y,{displayed_trade_param:a,modal_title:o,should_show_new_label:(0,G.hM)(r)})})),K=(0,s.Pi)((function(){var e=(0,c.b)(),t=e.growth_rate,r=e.has_open_accu_contract,a=e.tick_size_barrier,o="".concat((0,f.getGrowthRatePercentage)(t),"%"),i=(0,m.localize)("Growth rate"),l=n().createElement(m.Localize,{i18n_default_text:"Your stake will grow at {{growth_rate}}% per tick as long as the current spot price remains within ±{{tick_size_barrier}} from the previous spot price.",values:{growth_rate:(0,f.getGrowthRatePercentage)(t),tick_size_barrier:(0,f.getTickSizeBarrierPercentage)(a)}});return n().createElement(Y,{displayed_trade_param:o,is_disabled:r,modal_title:i,tooltip_message:l})})),Q=r("./src/Modules/Trading/Components/Form/LabeledQuantityInputMobile/index.js");const X=(0,s.Pi)((function(e){var t=e.is_nativepicker,r=(0,s.oR)(),a=r.ui,i=r.client,l=a.current_focus,d=a.setCurrentFocus,_=i.is_single_currency,p=(0,c.b)(),b=p.amount,v=p.currency,g=p.onChange,y=p.has_open_accu_contract;return n().createElement(n().Fragment,null,n().createElement(o.MobileWrapper,null,n().createElement(Q.Z,{input_label:(0,m.localize)("Stake"),className:u()("trade-container__amount","trade-container__amount--accumulator"),classNameInlinePrefix:"trade-container__currency",classNameInput:u()("trade-container__input","trade-container__input--accumulator"),currency:v,current_focus:l,fractional_digits:(0,f.getDecimalPlaces)(v),id:"dt_amount_input",inline_prefix:_?v:null,is_autocomplete_disabled:!0,is_disabled:y,is_float:!0,is_hj_whitelisted:!0,is_incrementable:!0,is_nativepicker:t,is_negative_disabled:!0,max_length:f.AMOUNT_MAX_LENGTH,name:"amount",onChange:g,type:"tel",value:b,ariaLabel:(0,m.localize)("Amount"),setCurrentFocus:d})))}));var J=r("./src/Modules/Trading/Components/Form/TradeParams/Accumulator/accumulators-info-display.tsx"),ee=r("./src/Modules/Trading/Components/Form/TradeParams/barrier.tsx"),te=r("./src/Modules/Trading/Components/Form/TradeParams/Duration/expiry-text.jsx"),re=r("./src/Modules/Trading/Components/Form/TradeParams/Duration/duration-range-text.tsx"),ae=r("../../node_modules/moment/moment.js"),ne=r.n(ae);function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var le=(0,m.localize)("OK"),ue=function(e,t,r,a,n,o){"stake"===a&&t!==o?(e.basis="stake",e.amount=t):"payout"===a&&r!==o?(e.basis="payout",e.amount=r):n!==a&&(e.basis=a,e.amount=o)},ce=(0,s.Pi)((function(e){var t=e.setDurationError,r=e.basis_option,a=e.toggleModal,i=e.has_amount_error,l=e.payout_value,u=e.stake_value,s=e.selected_duration,d=e.setSelectedDuration,_=(0,c.b)(),p=_.duration_min_max,b=_.duration,v=_.duration_unit,g=_.basis,y=_.amount,h=_.onChangeMultiple;n().useEffect((function(){t(!1)}),[]);var E=oe((0,f.getDurationMinMaxValues)(p,"tick","t"),2),x=E[0],w=E[1],k=b<x&&s<x?x:s;return n().createElement("div",{className:"trade-params__duration-tickpicker"},n().createElement(o.TickPicker,{default_value:k,submit_label:le,max_value:w,min_value:x,onSubmit:function(e){var t=e.target.value,n={};i||ue(n,u,l,r,g,y),b===t&&"t"===v||(n.duration_unit="t",n.duration=t),(0,f.isEmptyObject)(n)||h(n),a()},onValueChange:function(e){return d("t",e)},singular_label:(0,m.localize)("Tick"),plural_label:(0,m.localize)("Ticks")}))})),se=(0,s.Pi)((function(e){var t=e.basis_option,r=e.contract_expiry,a=void 0===r?"intraday":r,i=e.duration_unit_option,l=e.duration_values,d=e.expiry_epoch,_=e.has_amount_error,p=e.payout_value,b=e.selected_duration,v=e.setDurationError,g=e.setSelectedDuration,y=e.stake_value,h=e.show_expiry,E=void 0!==h&&h,x=e.toggleModal,w=(0,s.oR)().ui.addToast,k=(0,c.b)(),S=k.duration_min_max,M=k.duration,j=k.duration_unit,C=k.basis,O=k.amount,P=k.is_vanilla,N=k.onChangeMultiple,T=i.value,A=oe((0,f.getDurationMinMaxValues)(S,a,T),2),z=A[0],I=A[1],D=oe(n().useState(!1),2),F=D[0],Z=D[1],L=function(e){var t=n().createElement(m.Localize,{i18n_default_text:"Should be between {{min}} and {{max}}",values:{min:z,max:(0,f.addComma)(I,0,!1)}});return parseInt(e)<z||parseInt(b)>I?(w({key:"duration_error",content:t,type:"error",timeout:2e3}),v(!0),Z(!0),"error"):parseInt(e)>I?(w({key:"duration_error",content:t,type:"error",timeout:2e3}),Z(!0),"error"):e.toString().length<1?(w({key:"duration_error",content:t,type:"error",timeout:2e3}),v(!0),Z(!0),!1):(v(!1),Z(!1),!0)},q=F?"":function(e,t){if("d"!==j)return ne().utc().add(Number(t),"days").format("D MMM YYYY, [23]:[59]:[59] [GMT +0]");var r=new Date(1e3*(e-24*M*60*60));return t&&(r=new Date(r.getTime()+24*t*60*60*1e3)),r.toUTCString().replace("GMT","GMT +0").substring(5).replace(/(\d{2}) (\w{3} \d{4})/,"$1 $2,")}(d,null==l?void 0:l.d_duration),R=(0,f.getUnitMap)()[T],U=R.name_plural,G=R.name,$=null!=U?U:G;return n().createElement("div",{className:"trade-params__amount-keypad"},n().createElement("div",{className:u()("text-container",{"text-container--vanilla":P})},P&&n().createElement(re.Z,{min:z,max:I,duration_unit_text:$}),E&&n().createElement(te.Z,{fixed_date:q})),n().createElement(o.Numpad,{value:b,onSubmit:function(e){var r={};_||ue(r,y,p,t,C,O),M===e&&j===T||(r.duration_unit=T,r.duration=e,r.expiry_type="duration"),(0,f.isEmptyObject)(r)||N(r),x()},render:function(e){var t=e.value,r=e.className;return n().createElement("div",{className:r},t)},pip_size:0,submit_label:le,min:z,max:I,reset_press_interval:350,reset_value:"",onValidate:L,onValueChange:function(e){g(T,e),L(e)}}))}));const me=(0,s.Pi)((function(e){var t=e.amount_tab_idx,r=e.d_duration,a=e.duration_tab_idx,i=e.expiry_epoch,l=e.h_duration,u=e.has_amount_error,s=e.m_duration,d=e.payout_value,_=e.s_duration,p=e.setDurationError,b=e.setDurationTabIdx,v=e.setSelectedDuration,g=e.stake_value,y=e.t_duration,h=e.toggleModal,E=(0,c.b)(),x=E.duration_units_list,w=E.duration_min_max,k=E.duration_unit,S=E.basis,M={t_duration:y,s_duration:_,m_duration:s,h_duration:l,d_duration:r},j=void 0!==a?a:x.findIndex((function(e){return e.value===k})),C=oe((0,f.getDurationMinMaxValues)(w,"daily","d"),2),O=C[0],P=C[1],N=function(e){v("d",e)},T=function(){return 0===t?"stake":1===t?"payout":S};return n().createElement("div",null,n().createElement(o.Tabs,{active_index:j,onTabItemClick:function(e){return function(e){b(e);var t=x[e].value;v(t,M["".concat(t,"_duration")])}(e)},single_tab_has_no_label:!0,top:!0},x.map((function(e){switch(e.value){case"t":return n().createElement("div",{label:e.text,key:e.value},n().createElement(ce,{basis_option:T(),has_amount_error:u,toggleModal:h,selected_duration:y,setDurationError:p,setSelectedDuration:v,stake_value:g,payout_value:d}));case"s":return n().createElement("div",{label:e.text,key:e.value},n().createElement(se,{basis_option:T(),has_amount_error:u,toggleModal:h,duration_unit_option:e,selected_duration:_,setDurationError:p,setSelectedDuration:v,stake_value:g,payout_value:d}));case"m":return n().createElement("div",{label:e.text,key:e.value},n().createElement(se,{basis_option:T(),has_amount_error:u,toggleModal:h,duration_unit_option:e,selected_duration:s,setDurationError:p,setSelectedDuration:v,stake_value:g,payout_value:d}));case"h":return n().createElement("div",{label:e.text,key:e.value},n().createElement(se,{basis_option:T(),has_amount_error:u,toggleModal:h,duration_unit_option:e,selected_duration:l,setDurationError:p,setSelectedDuration:v,stake_value:g,payout_value:d}));case"d":return n().createElement("div",{label:e.text,key:e.value},n().createElement(se,{basis_option:T(),has_amount_error:u,toggleModal:h,duration_unit_option:e,contract_expiry:"daily",selected_duration:r,setDurationError:p,setSelectedDuration:v,stake_value:g,show_expiry:!0,payout_value:d,expiry_epoch:i,duration_values:M}),n().createElement(o.RelativeDatepicker,{onChange:N,min_date:O,max_date:P,title:(0,m.localize)("Pick an end date")}));default:return null}}))))}));var de=r("./src/Modules/Trading/Components/Form/TradeParams/last-digit.tsx");function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ve(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==_e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==_e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===_e(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ge=Object.freeze({t:5,s:15,m:3,h:1,d:1}),ye=function(e,t){return be(be({},e),t)};const he=(0,s.Pi)((function(e){var t,r,a=e.is_open,i=e.toggleModal,l=e.tab_index,u=(0,s.oR)().client.currency,m=(0,c.b)(),d=m.amount,_=m.form_components,p=m.duration,f=m.duration_unit,b=m.duration_units_list,v=m.is_vanilla,g=n().useCallback((t=p,r=f,function(e){return r===e?t:ge[e]}),[]),y=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n().useReducer(ye,{trade_param_tab_idx:l,duration_tab_idx:void 0,amount_tab_idx:void 0,has_amount_error:!1,has_duration_error:!1,curr_duration_unit:f,curr_duration_value:p,t_duration:g("t"),s_duration:g("s"),m_duration:g("m"),h_duration:g("h"),d_duration:g("d"),stake_value:d,payout_value:d}),2),h=y[0],E=y[1];(0,o.usePreventIOSZoom)(),n().useEffect((function(){w(f,p),x()}),[p,f]);var x=function(e){return E({duration_tab_idx:e})},w=function(e,t){var r;E((ve(r={},"".concat(e,"_duration"),t),ve(r,"curr_duration_unit",e),ve(r,"curr_duration_value",t),r))};return n().createElement(n().Fragment,null,n().createElement(o.Modal,{id:"dt_trade_parameters_mobile",className:"trade-params",is_open:a,header:n().createElement("div",null),toggleModal:i,height:v?"53.8rem":"auto",width:"calc(100vw - 32px)"},n().createElement(o.ThemedScrollbars,null,n().createElement(o.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"120px"},n().createElement(Ee,{currency:u,toggleModal:i,isVisible:function(e){return _.includes(e)},setTradeParamTabIdx:function(e){return E({trade_param_tab_idx:e})},trade_param_tab_idx:l,setDurationTabIdx:x,duration_tab_idx:h.duration_tab_idx,setAmountTabIdx:function(e){return E({amount_tab_idx:e})},amount_tab_idx:h.amount_tab_idx,setSelectedAmount:function(e,t){return E(ve({},"".concat(e,"_value"),t))},stake_value:h.stake_value,payout_value:h.payout_value,duration_unit:h.curr_duration_unit,duration_value:h.curr_duration_value,duration_units_list:b,has_amount_error:h.has_amount_error,setAmountError:function(e){E({has_amount_error:e})},setSelectedDuration:w,has_duration_error:h.has_duration_error,setDurationError:function(e){E({has_duration_error:e})},t_duration:h.t_duration,s_duration:h.s_duration,m_duration:h.m_duration,h_duration:h.h_duration,d_duration:h.d_duration})))))}));var Ee=(0,s.Pi)((function(e){var t=e.currency,r=e.toggleModal,a=e.isVisible,i=e.setAmountTabIdx,l=e.amount_tab_idx,s=e.setTradeParamTabIdx,d=e.trade_param_tab_idx,_=e.setDurationTabIdx,p=e.duration_unit,f=e.duration_units_list,b=e.duration_value,v=e.duration_tab_idx,g=e.has_amount_error,y=e.has_duration_error,h=e.setAmountError,E=e.setSelectedAmount,x=e.stake_value,w=e.payout_value,k=e.setDurationError,S=e.setSelectedDuration,j=e.t_duration,C=e.s_duration,O=e.m_duration,P=e.h_duration,N=e.d_duration,T=(0,c.b)(),A=T.basis_list,z=T.basis,I=T.expiry_epoch,D=T.is_turbos,F=T.is_vanilla,Z=function(e){switch(e){case"duration":return n().createElement("div",{className:"trade-params__header"},n().createElement("div",{className:"trade-params__header-label"},(0,m.localize)("Duration")),n().createElement("div",{className:u()("trade-params__header-value",{"trade-params__header-value--has-error":y})},y?(0,m.localize)("Error"):(a=f.find((function(e){return e.value===p})),"".concat(b," ").concat(a&&(b>1?(0,m.localize)(a.text):(0,m.localize)(a.text.slice(0,-1)))))));case"amount":return n().createElement("div",{className:"trade-params__header"},n().createElement("div",{className:"trade-params__header-label"},D||F?(0,m.localize)("Stake"):(0,m.localize)("Amount")),n().createElement("div",{className:u()("trade-params__header-value",{"trade-params__header-value--has-error":g})},g?(0,m.localize)("Error"):(r=void 0!==l?l:A.findIndex((function(e){return e.value===z})),n().createElement(o.Money,{currency:t,show_currency:!0,amount:1===r?w:x}))));default:return null}var r,a};return n().createElement(o.Tabs,{active_index:d,className:"trade-params-duration-amount",onTabItemClick:s,top:!0},a("duration")?n().createElement("div",{"data-header-content":Z("duration")},n().createElement(me,{toggleModal:r,amount_tab_idx:l,duration_tab_idx:v,setDurationTabIdx:_,setSelectedDuration:S,setDurationError:k,has_amount_error:g,t_duration:j,s_duration:C,m_duration:O,h_duration:P,d_duration:N,stake_value:x,payout_value:w,expiry_epoch:I})):null,a("amount")?n().createElement("div",{"data-header-content":Z("amount")},n().createElement(M,{duration_unit:p,duration_value:b,toggleModal:r,amount_tab_idx:l,setAmountTabIdx:i,has_duration_error:y,setSelectedAmount:E,setAmountError:h,stake_value:x,payout_value:w})):null)})),xe=(0,s.Pi)((function(){return(0,c.b)().form_components.includes("last_digit")?n().createElement(de.Z,null):null})),we=(0,s.Pi)((function(){return(0,c.b)().form_components.includes("barrier")?n().createElement(ee.Z,null):null})),ke=r("./src/Modules/Trading/Containers/contract-type.tsx");function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const je=(0,s.Pi)((function(){var e=(0,s.oR)().ui.onChangeUiStore,t=(0,c.b)(),r=t.amount,a=t.basis,i=t.currency,l=t.duration,u=t.duration_min_max,d=t.duration_unit,_=t.is_multiplier,p=t.onChange,b=Se(n().useState(!1),2),v=b[0],g=b[1],y=Se(n().useState(0),2),h=y[0],E=y[1];n().useEffect((function(){x()}));var x=function(){var r=(0,f.getExpiryType)(t),a=Se((0,f.getDurationMinMaxValues)(u,r,d),2),n=a[0],o=a[1];"tick"===r&&l<n&&(e({name:"duration_".concat(d),value:n}),p({target:{name:"duration",value:n}})),!(l<n)&&l>o&&(e({name:"duration_".concat(d),value:o}),p({target:{name:"duration",value:o}}))},w=function(e){E(e),g(!v)},k=(0,f.getLocalizedBasis)();return n().createElement("div",{className:"mobile-widget__wrapper"},_?n().createElement(B,null):n().createElement("div",{id:"duration_amount_selector",className:"mobile-widget duration_amount_selector"},n().createElement("div",{className:"mobile-widget__duration",onClick:function(){return w(0)}},function(){if(!d)return"";var e={t:[(0,m.localize)("tick"),(0,m.localize)("ticks")],s:[(0,m.localize)("second"),(0,m.localize)("seconds")],m:[(0,m.localize)("min"),(0,m.localize)("mins")],h:[(0,m.localize)("hour"),(0,m.localize)("hours")],d:[(0,m.localize)("day"),(0,m.localize)("days")]};try{if(!d)return"";var t=1==+l?e[d][0]:e[d][1];return"".concat(l," ").concat(t)}catch(e){return""}}()),n().createElement("div",{className:"mobile-widget__amount",onClick:function(){return w(1)}},n().createElement(o.Money,{amount:r,currency:i,show_currency:!0})),n().createElement("div",{className:"mobile-widget__type",onClick:function(){return w(1)}},function(){switch(a){case"stake":return k.stake;case"payout":return k.payout;default:return a}}())),n().createElement(he,{is_open:v,toggleModal:function(){return w(h)},tab_index:h}))}));var Ce=r("./src/Modules/Trading/Containers/purchase.tsx"),Oe=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/stop-loss.jsx"),Pe=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/take-profit.jsx"),Ne=r("./src/Stores/Modules/Trading/Helpers/multiplier.ts"),Te=r("./src/App/Components/Form/fieldset.tsx");function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var ze=(0,s.Pi)((function(e){var t=e.is_visible,r=e.onConfirm,a=e.onCancel,i=(0,s.oR)().ui,l=i.disableApp,u=i.enableApp,c=i.should_show_cancellation_warning,d=i.toggleCancellationWarning;return n().createElement(o.Dialog,{className:"trade-params__multiplier-deal-cancellation-dialog",title:(0,m.localize)("About deal cancellation"),confirm_button_text:(0,m.localize)("Got it"),cancel_button_text:(0,m.localize)("Cancel"),onConfirm:r,onCancel:a,is_mobile_full_width:!1,is_visible:t,disableApp:l,enableApp:u,portal_element_id:"modal_root"},n().createElement(o.Text,{size:"xxxs",color:"general"},n().createElement(m.Localize,{i18n_default_text:"Take profit and/or stop loss are not available while deal cancellation is active."})),n().createElement(o.Checkbox,{defaultChecked:!c,onChange:function(){return d()},name:"should_show_cancellation_warning",label:(0,m.localize)("Don't show this again")}))}));const Ie=(0,s.Pi)((function(e){var t=e.has_cancellation,r=e.has_take_profit,a=e.has_stop_loss,i=e.onChangeMultiple,l=e.cancellation_duration,u=(0,s.oR)().ui.should_show_cancellation_warning,d=(0,c.b)().cancellation_range_list,_=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n().useState(!1),2),p=_[0],f=_[1];return n().createElement(n().Fragment,null,n().createElement(ze,{is_visible:p,onCancel:function(){return f(!1)},onConfirm:function(){f(!1),(0,Ne.L)({has_cancellation:t,onChangeMultiple:i})}}),n().createElement(Te.Z,{className:"trade-container__fieldset"},n().createElement("div",{className:"dc-input-wrapper--inline"},n().createElement(o.Checkbox,{id:"dt_cancellation-checkbox_input",onChange:function(){var e;(e=(r||a)&&u)&&f(e),e||(0,Ne.L)({has_cancellation:t,onChangeMultiple:i})},name:"has_cancellation",label:(0,m.localize)("Deal cancellation"),defaultChecked:t}),n().createElement(o.Popover,{alignment:"left",icon:"info",id:"dt_multiplier-stake__tooltip",is_bubble_hover_enabled:!0,classNameBubble:"trade-container__deal-cancellation-popover",zIndex:"9999",message:(0,m.localize)("When this is active, you can cancel your trade within the chosen time frame. Your stake will be returned without loss.")})),t&&n().createElement(n().Fragment,null,n().createElement(o.RadioGroup,{className:"trade-params__multiplier-radio-group",name:"trade-params__multiplier-radio",selected:l,onToggle:function(e){return(0,Ne.Q)({event:e,onChangeMultiple:i})}},d.map((function(e){var t=e.text,r=e.value;return n().createElement(o.RadioGroup.Item,{key:r,id:t,label:t,value:r.toString()})}))))))}));function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){Le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==De(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==De(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===De(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const Ue=(0,s.Pi)((function(e){var t,r,a=e.is_open,i=e.onClose,l=e.toggleDialog,s=(0,c.b)(),d=s.is_turbos,_=s.take_profit,p=s.has_take_profit,b=s.has_stop_loss,v=s.stop_loss,g=s.has_cancellation,y=s.cancellation_range_list,h=s.cancellation_duration,E=s.onChangeMultiple,x={take_profit:_,stop_loss:v,has_take_profit:p,has_stop_loss:b,has_cancellation:g,cancellation_duration:h},w=qe(n().useState(x),2),k=w[0],S=w[1],M=qe(n().useState({}),2),j=M[0],C=M[1],O=(null==y?void 0:y.length)>0,P=function(e){var t=["has_take_profit","has_stop_loss","has_cancellation",e.has_take_profit&&"take_profit",e.has_stop_loss&&"stop_loss",e.has_cancellation&&"cancellation_duration"];return(0,f.pick)(e,t)},N=function(e){C({take_profit:e.has_take_profit&&!e.take_profit?[(0,m.localize)("Please enter a take profit amount.")]:[],stop_loss:e.has_stop_loss&&!e.stop_loss?[(0,m.localize)("Please enter a stop loss amount.")]:[]})},T=function(e){var t=e.target,r=t.name,a=t.value,n=Ze({},k);n[r]=a,S(n),N(n)},A=function(e){var t=Ze({},k);Object.assign(t,e),S(t),N(t)};return n().createElement(n().Fragment,null,n().createElement(o.MobileDialog,{portal_element_id:"modal_root",visible:a,has_content_scroll:!0,onClose:function(){S(x),i()}},n().createElement(o.Div100vhContainer,{className:u()("trade-params__multiplier-risk-management-dialog",{"trade-params__multiplier-risk-management-dialog--no-cancel":!O}),height_offset:"54px"},n().createElement(Pe.Z,{take_profit:k.take_profit,has_take_profit:k.has_take_profit,onChange:T,onChangeMultiple:A,validation_errors:j}),!d&&n().createElement(Oe.Z,{stop_loss:k.stop_loss,has_stop_loss:k.has_stop_loss,onChange:T,onChangeMultiple:A,validation_errors:j}),O&&n().createElement(Ie,{has_take_profit:k.has_take_profit,has_stop_loss:k.has_stop_loss,has_cancellation:k.has_cancellation,cancellation_duration:k.cancellation_duration,onChangeMultiple:A}),n().createElement("div",{className:"trade-params__multiplier-risk-management-dialog-bottom-separator"}),n().createElement("div",{className:"trade-params__multiplier-risk-management-dialog-apply-button"},n().createElement(o.Button,{text:(0,m.localize)("Apply"),onClick:function(){E(k),l()},primary:!0,is_disabled:(null===(t=j.take_profit)||void 0===t?void 0:t.length)>0||(null===(r=j.stop_loss)||void 0===r?void 0:r.length)>0||(0,f.isDeepEqual)(P(k),P(x))})))))}));function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const $e=(0,s.Pi)((function(){var e,t=(0,c.b)(),r=t.currency,a=t.stop_loss,i=t.take_profit,l=t.has_take_profit,u=t.has_stop_loss,s=t.cancellation_duration,d=t.cancellation_range_list,_=t.has_cancellation,p=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ge(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n().useState(!1),2),f=p[0],b=p[1],v=l||u||_,g=null===(e=d.find((function(e){return e.value===s})))||void 0===e?void 0:e.text;return n().createElement(n().Fragment,null,n().createElement(Ue,{is_open:f,toggleDialog:function(){b(!f)},onClose:function(){return b(!1)}}),n().createElement("div",{className:"mobile-widget mobile-widget__multiplier-risk-management",onClick:function(){return b(!f)}},!v&&n().createElement("div",{className:"mobile-widget__item"},n().createElement("div",{className:"mobile-widget__item-label"},(0,m.localize)("Risk management")),n().createElement("div",{className:"mobile-widget__item-value"},(0,m.localize)("Not set"))),l&&n().createElement("div",{className:"mobile-widget__item"},n().createElement("div",{className:"mobile-widget__item-label"},(0,m.localize)("Take profit")),n().createElement("div",{className:"mobile-widget__item-value"},n().createElement(o.Money,{amount:i,currency:r,show_currency:!0}))),u&&n().createElement("div",{className:"mobile-widget__item"},n().createElement("div",{className:"mobile-widget__item-label"},(0,m.localize)("Stop loss")),n().createElement("div",{className:"mobile-widget__item-value"},n().createElement(o.Money,{amount:a,currency:r,show_currency:!0}))),_&&n().createElement("div",{className:"mobile-widget__item"},n().createElement("div",{className:"mobile-widget__item-label"},(0,m.localize)("Deal Cancellation")),n().createElement("div",{className:"mobile-widget__item-value"},g))))}));var Ve=r("./src/Modules/Contract/Components/AccumulatorsStats/index.js"),We=r("./src/Modules/Trading/Components/Form/TradeParams/strike.jsx"),Be=r("./src/Modules/Trading/Components/Form/TradeParams/Turbos/barrier-selector.tsx"),Ye=(0,s.Pi)((function(){var e=(0,c.b)(),t=e.currency,r=e.proposal_info,a=e.contract_type,i=e.is_vanilla,l=e.is_vanilla_fx,u=null==a?void 0:a.toUpperCase(),s=(null==r?void 0:r[u])||{},d=s.has_error,_=s.has_increased,p=s.id,b=s.message,v=s.obj_contract_basis||{},g=v.text,y=v.value,h=d||!p,E=n().createElement(m.Localize,{i18n_default_text:"This is the amount you’ll receive at expiry for every point of change in the underlying price, if the spot price never touches or breaches the barrier throughout the contract duration."}),x=l?n().createElement(m.Localize,{i18n_default_text:"The payout at expiry is equal to the payout per pip multiplied by the difference, <0>in pips</0>, between the final price and the strike price.",components:[n().createElement("strong",{key:0})]}):n().createElement(m.Localize,{i18n_default_text:"The payout at expiry is equal to the payout per point multiplied by the difference between the final price and the strike price."}),w=i?x:E;return y?n().createElement(Te.Z,{className:"payout-per-point"},n().createElement("div",{className:"payout-per-point__label-wrapper"},n().createElement(o.Text,{size:"xs",color:"less-prominent",className:"payout-per-point__label"},l?(0,f.getLocalizedBasis)().payout_per_pip:g),n().createElement(o.Popover,{alignment:"top",icon:"info",is_bubble_hover_enabled:!0,margin:0,zIndex:"9999",message:b?w:""})),n().createElement(o.Text,{size:"xs",weight:"bold",className:"payout-per-point__value"},n().createElement(o.Money,{amount:y,currency:t,show_currency:!0,should_format:!1}),n().createElement("span",{className:"trade-container__price-info-movement"},!h&&null!==_&&_?n().createElement(o.Icon,{icon:"IcProfit"}):n().createElement(o.Icon,{icon:"IcLoss"})))):n().createElement(Te.Z,{className:"payout-per-point"})}));const He=Ye;var Ke=r("./src/Modules/Trading/Components/Form/TradeParams/trade-type-tabs.tsx");function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Xe.apply(this,arguments)}function Je(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Qe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==Qe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Qe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var et=function(e){var t=e.form_components,r=e.has_allow_equals,a=e.has_take_profit,i=e.previous_symbol,l=e.is_allow_equal,c=e.is_accumulator,s=e.is_multiplier,d=e.is_trade_params_expanded,p=e.is_turbos,f=e.is_vanilla,b=e.onChange,v=e.take_profit,g=e.setIsTradeParamsExpanded,y=e.last_digit;n().useEffect((function(){i&&l&&r&&g(!0)}),[i]);var h=!d,E=function(e){return t.includes(e)};return n().createElement(o.Collapsible,{position:"top",is_collapsed:h,onClick:function(e){g(e)}},c&&h&&n().createElement(Ve.Z,null),n().createElement("div",{className:"trade-params__contract-type-container"},n().createElement(ke.Z,null),s&&n().createElement(H,null),E("trade_type_tabs")&&n().createElement(Ke.Z,null),c&&n().createElement(K,null),E("last_digit")&&h&&n().createElement(o.Text,{as:"p",size:"xxs",color:"prominent",line_height:"s",weight:"bold",className:"mobile-widget__digit",onClick:function(){g(!0)}},n().createElement(m.Localize,{i18n_default_text:"Digit: {{last_digit}} ",values:{last_digit:y}}))),E("last_digit")&&n().createElement("div",{"data-collapsible":"true"},n().createElement(xe,null)),E("barrier")&&n().createElement("div",{"data-collapsible":"true"},n().createElement(we,null)),E("barrier_selector")&&n().createElement("div",{"data-collapsible":"true"},n().createElement(Be.Z,null)),E("strike")&&n().createElement("div",{"data-collapsible":"true"},n().createElement(We.Z,null)),!c&&n().createElement(je,null),r&&n().createElement("div",{"data-collapsible":"true"},n().createElement(_,null)),s&&n().createElement("div",{"data-collapsible":"true"},n().createElement($e,null)),c&&[n().createElement(X,{key:"accu_amount"}),n().createElement("div",{"data-collapsible":"true",key:"accu_take_profit",className:u()("take-profit","mobile-widget")},n().createElement(Pe.Z,{take_profit:v,has_take_profit:a,onChange:b,has_info:!1})),n().createElement("div",{"data-collapsible":"true",key:"accu_info"},n().createElement(J.Z,null))],p&&n().createElement("div",{"data-collapsible":"true",className:u()("take-profit","mobile-widget")},n().createElement(Pe.Z,{take_profit:v,has_take_profit:a,onChange:b,has_info:!1})),(p||f)&&n().createElement(He,null),n().createElement("div",{className:u()(Je({"purchase-container":!f},"purchase-container__".concat(c?"accumulator":"turbos"),c||p))},n().createElement(Ce.Z,null)))},tt=(0,s.Pi)((function(e){var t=e.is_trade_enabled,r=(0,c.b)(),a=r.is_accumulator,o=r.is_multiplier,l=r.is_turbos,u=r.is_vanilla,s=r.duration_unit,m=r.contract_types_list,d=r.contract_type,_=r.expiry_type,f=r.contract_start_type,b=r.form_components,v=r.has_take_profit,g=r.onChange,y=r.previous_symbol,h=r.is_trade_params_expanded,E=r.setIsTradeParamsExpanded,x=r.take_profit,w=r.last_digit,k={is_accumulator:a,is_multiplier:o,is_turbos:l,is_vanilla:u,form_components:b,has_take_profit:v,onChange:g,previous_symbol:y,is_trade_params_expanded:h,setIsTradeParamsExpanded:E,take_profit:x,is_allow_equal:!!r.is_equal,last_digit:w},S=(0,p.OW)(m,s,f),M=(0,p.vy)(m),j=(0,p.i$)(d)&&(S||"endtime"===_)&&M;return t?n().createElement(et,Xe({has_allow_equals:j},k)):n().createElement("div",{className:"mobile-wrapper__content-loader"},n().createElement(i.G,{speed:2}))}));const rt=tt}}]);