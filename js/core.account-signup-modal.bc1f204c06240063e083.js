"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1301],{1776:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var r=n(32735),i=n(61055),a=n(60216),s=n.n(a),o=n(59349),c=n(68722),l=n(44850),u=n(77178),d=n(42671),p=n(59472);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}var m=function(e){var t=e.class_prefix,n=e.errors,a=e.touched,s=e.setFieldValue,c=e.citizenship_list;return r.createElement("div",{className:"".concat(t,"__residence-selection")},r.createElement(i.Field,{name:"citizenship"},(function(e){var t=e.field;return r.createElement(r.Fragment,null,r.createElement(o.Autocomplete,_({},t,{autoComplete:"off",input_id:"dt_core_set-citizenship-form_signup-citizenship-select",type:"text",label:(0,l.localize)("Citizenship"),error:a.citizenship&&n.citizenship,required:!0,list_items:c,onItemSelection:function(e){var t=e.value,n=e.text;return s("citizenship",t?n:"",!0)}})))})),r.createElement(o.Text,{as:"p",size:"xxs",className:"account-signup__subtext",color:"less-prominent"},r.createElement(l.Localize,{i18n_default_text:"Select your citizenship/nationality as it appears on your passport or other government-issued ID."})))};m.propTypes={class_prefix:s().string,citizenship_list:s().arrayOf(s().object),errors:s().object,setFieldTouched:s().func,setFieldValue:s().func,touched:s().object};const f=m;var g=n(95685),b=n.n(g),v=function(e){var t=e.children;return r.createElement("div",{className:"signup-separator-container"},t)};v.Line=function(e){var t=e.is_invisible;return r.createElement("div",{className:b()("signup-separator-container__line",{"signup-separator-container__line--invisible":t})})};const h=v;function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}const w=(0,p.observer)((function(e){var t=e.api_error,n=e.errors,a=e.handleBlur,s=e.handleChange,d=e.isModalVisible,_=e.isSubmitting,m=e.touched,f=e.pw_input,g=e.setFieldTouched,v=e.updatePassword,w=e.values,E=(0,p.useStore)().ui.is_mobile;return r.useEffect((function(){u.Analytics.trackEvent("ce_virtual_signup_form",{action:"password_screen_opened",form_name:E?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"})}),[]),r.createElement("div",{className:"account-signup__password-selection"},r.createElement(o.Text,{as:"p",size:E?"xs":"s",weight:"bold",className:"account-signup__heading",align:"center"},r.createElement(l.Localize,{i18n_default_text:"Keep your account secure with a password"})),r.createElement(i.Field,{name:"password"},(function(e){var t=e.field;return r.createElement(o.PasswordMeter,{input:f,has_error:!(!m.password||!n.password),custom_feedback_messages:(0,c.getErrorMessages)().password_warnings},r.createElement(o.PasswordInput,y({},t,{autoComplete:"new-password",className:"account-signup__password-field",label:(0,l.localize)("Create a password"),error:m.password&&n.password,required:!0,value:w.password,onBlur:a,onChange:function(e){var t=e.target;g("password",!0),t&&v(t.value),s(e)},input_id:"dt_core_account-signup-modal_account-signup-password-field"})))})),r.createElement(o.Text,{as:"p",size:"xxs",className:"account-signup__subtext",align:"center"},r.createElement(l.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols."})),r.createElement(h,null),t?r.createElement(r.Fragment,null,r.createElement(o.Text,{as:"p",size:"xxs",color:"loss-danger",className:"account-signup__subtext account-signup__subtext--error",align:"center"},t),r.createElement("div",{className:"account-signup__error-wrapper"},r.createElement(o.Button,{large:!0,secondary:!0,text:(0,l.localize)("Cancel"),type:"button",onClick:function(){return d(!1)}}),r.createElement(o.Button,{large:!0,primary:!0,text:(0,l.localize)("Create new account"),type:"button",onClick:function(){return(0,c.redirectToSignUp)()}}))):r.createElement("div",{className:"account-signup__footer"},r.createElement(o.Button,{className:b()("account-signup__btn",{"account-signup__btn--disabled":!w.password||n.password||_}),id:"dt_core_account-signup-modal_submit-btn",type:"submit",is_disabled:!w.password||!!n.password||_,text:(0,l.localize)("Start trading"),large:!0,primary:!0})))}));const E=function(e){var t,n,i,a=e.ab_questionnaire,s=e.handleSignup,c=!(null===(t=a[1].answers)||void 0===t||null===(n=t[0])||void 0===n||!n.header);r.useEffect((function(){u.Analytics.trackEvent("ce_questionnaire_form",{action:"open"})}),[a]);return r.createElement("div",{className:"questionnaire-modal"},r.createElement(o.Text,{as:"h2",size:"xs",weight:"bold",align:"center"},a[1].question),r.createElement("ul",{"data-testid":"questionnaire-modal-variant",className:b()({"questionnaire-modal__answers":c,"questionnaire-modal__options":!c})},null===(i=a[1])||void 0===i?void 0:i.answers.map((function(e,t){var n=e.code,i=e.text,l=e.header;return r.createElement(o.Button,{key:"".concat(n,"_questionnaire"),"data-testid":"".concat(n,"_questionnaire"),onClick:function(){return e=n,r=t+1,u.Analytics.trackEvent("ce_questionnaire_form",{action:"choose_answer",question:a[0].question,answer_content:a[0].answers.filter((function(t){return t.code===e}))[0].text,answer_code:e,answer_index:r}),void s();var e,r},transparent:!0},r.createElement("li",{className:b()({"questionnaire-modal__answers_content":c,"questionnaire-modal__options_card":!c})},l&&r.createElement(o.Text,{as:"p",size:"xs",weight:"bold"},l),r.createElement(o.Text,{as:"p",size:"xs"},i)))}))))};var x=n(99727);const S=function(e,t){var n={};if((0,c.validLength)(e.password,{min:8,max:25})?(0,c.validPassword)(e.password)||(n.password=(0,c.getErrorMessages)().password()):n.password=(0,l.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.residence){var r=t.findIndex((function(t){return t.text.toLowerCase()===e.residence.toLowerCase()}));-1!==r&&"DISABLED"!==t[r].disabled||(n.residence=(0,l.localize)("Unfortunately, {{website_name}} is not available in your country.",{website_name:c.website_name}))}else n.residence=!0;e.citizenship?-1===t.findIndex((function(t){return t.text.toLowerCase()===e.citizenship.toLowerCase()}))&&(n.citizenship=!0):n.citizenship=!0;return n};function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===z(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=function(e){var t=e.enableApp,n=e.is_mobile,a=e.isModalVisible,s=e.clients_country,p=e.onSignup,_=e.residence_list,m=e.setIsFromSignupAccount,g=A(r.useState(!1),2),b=g[0],v=g[1],h=A(r.useState(!0),2),y=h[0],z=h[1],O=A(r.useState(""),2),C=O[0],F=O[1],N=r.useRef(),k=A(r.useState(""),2),T=k[0],q=k[1],P=A(r.useState(!1),2),I=P[0],L=P[1],V=A(r.useState(!1),2),B=V[0],D=V[1],M=A(r.useState(!1),2),R=M[0],U=M[1],Z=A(r.useState(),2),K=Z[0],W=Z[1],Y=A(r.useState({}),2),$=Y[0],G=Y[1],H=(0,l.getLanguage)(),J=function(e){var t,n;return e&&"br"===(null===(t=_[ee(e)])||void 0===t||null===(n=t.value)||void 0===n?void 0:n.toLowerCase())},Q=function(e,t){return!((!J(e.residence)||B)&&e.residence&&!t.residence&&e.citizenship&&!t.citizenship)},X=function(e){q(e)};r.useEffect((function(){d.WS.wait("website_status","residence_list").then((function(){s&&_&&F((0,c.getLocation)(_,s,"text")),z(!1)}));W(function(){var e,t,n,r,i,a,s=u.Analytics.getFeatureValue("questionnaire-config","inactive")||"inactive",o=s;null!==(i=s=null!==(e=null!==(t=null===(n=s)||void 0===n?void 0:n[H])&&void 0!==t?t:null===(r=s)||void 0===r?void 0:r.EN)&&void 0!==e?e:s)&&void 0!==i&&i.show_answers_in_random_order?s=[j({},null==o?void 0:o.default),j(j({},s),{},{answers:(0,c.shuffleArray)(null===(a=s)||void 0===a?void 0:a.answers)})]:"inactive"!==s&&(s=[j({},null==o?void 0:o.default),j({},s)]);return s}()),u.Analytics.trackEvent("ce_virtual_signup_form",{action:"signup_confirmed",form_name:n?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"}),u.Analytics.trackEvent("ce_virtual_signup_form",{action:"country_selection_screen_opened",form_name:n?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"})}),[]);var ee=function(e){return _.findIndex((function(t){return t.text.toLowerCase()===(null==e?void 0:e.toLowerCase())}))},te=function(){return p($,ne)},ne=function(e){e?(v(e),u.Analytics.trackEvent("ce_virtual_signup_form",{action:"signup_flow_error",form_name:n?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default",error_message:e})):(a(!1),m(!0),c.SessionStore.remove("signup_query_param"),t(),u.Analytics.trackEvent("ce_virtual_signup_form",{action:"signup_done",form_name:n?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"}))};return r.createElement("div",{className:"account-signup"},y?r.createElement(o.Loading,{is_fullscreen:!1}):r.createElement(i.Formik,{initialValues:{citizenship:"",password:"",residence:""},validate:function(e){return S(e,_)},onSubmit:function(e){var t=ee(e.residence),n=ee(e.citizenship),r=j(j({},e),{},{residence:_[t].value,citizenship:_[n].value});G(r),"inactive"===K?p(r,ne):U(!!K)},residence_list:_},(function(e){var t=e.isSubmitting,s=e.handleBlur,c=e.errors,u=e.handleChange,d=e.values,p=e.setFieldValue,m=e.setFieldTouched,g=e.touched;return r.createElement(i.Form,null,I?r.createElement(r.Fragment,null,R?r.createElement(E,{ab_questionnaire:K,handleSignup:te}):r.createElement(w,{api_error:b,errors:c,handleBlur:s,handleChange:u,isModalVisible:a,isSubmitting:t,touched:g,pw_input:T,setFieldTouched:m,updatePassword:X,values:d})):r.createElement("div",{className:"account-signup__location-selection"},r.createElement(o.Text,{as:"h1",size:n?"xs":"s",weight:"bold",className:"account-signup__heading"},(0,l.localize)("Select your country and citizenship:")),r.createElement(x.Z,{class_prefix:"account-signup",errors:c,touched:g,onResidenceSelectionChanged:function(){return D(!1)},setFieldTouched:m,setFieldValue:p,residence_list:_,default_value:C,history_value:N.current}),r.createElement(f,{class_prefix:"account-signup",errors:c,touched:g,setFieldTouched:m,setFieldValue:p,citizenship_list:_}),J(d.residence)&&r.createElement(o.Checkbox,{checked:B,onChange:function(){return D(!B)},className:"account-signup__checkbox",classNameLabel:"account-signup__label",label:(0,l.localize)("I hereby confirm that my request for opening an account with Deriv to trade OTC products issued and offered exclusively outside Brazil was initiated by me. I fully understand that Deriv is not regulated by CVM and by approaching Deriv I intend to set up a relation with a foreign company.")}),r.createElement("div",{className:"account-signup__footer"},r.createElement(o.Button,{className:"account-signup__btn",is_disabled:Q(d,c),type:"button",onClick:function(){N.current=d,L(!0)},primary:!0,large:!0,text:(0,l.localize)("Next")}))))})))};N.propTypes={clients_country:s().string,enableApp:s().func,onSignup:s().func,residence_list:s().array,is_mobile:s().bool,isModalVisible:s().func,setIsFromSignupAccount:s().func};const k=(0,p.observer)((function(){var e=(0,p.useStore)(),t=e.ui,n=e.client,i=n.onSignup,a=n.is_logged_in,s=n.residence_list,c=n.clients_country,l=n.logout,u=t.is_account_signup_modal_visible,d=t.toggleAccountSignupModal,_=t.enableApp,m=t.disableApp,f=t.is_loading,g=t.is_mobile,b=t.setIsFromSignupAccount;return r.useEffect((function(){u&&a&&l()}),[u,a,l]),r.createElement(o.Dialog,{className:"account-signup__dialog",is_visible:u,disableApp:m,enableApp:_,is_loading:f||!s.length,is_mobile_full_width:!1},r.createElement(N,{clients_country:c,onSignup:i,residence_list:s,is_mobile:g,isModalVisible:d,enableApp:_,setIsFromSignupAccount:b}))}))},99727:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(32735),i=n(61055),a=n(60216),s=n.n(a),o=n(59349),c=n(44850);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var u=function(e){var t,n=e.children,a=e.class_prefix,s=void 0===a?"set-residence":a,u=e.default_value,d=e.history_value,p=e.errors,_=e.onResidenceSelectionChanged,m=e.touched,f=e.setFieldTouched,g=e.setFieldValue,b=e.residence_list;return r.useEffect((function(){u&&(f("residence",!0),g("residence",u,!0))}),[]),r.createElement("div",{className:"".concat(s,"__residence-selection")},r.createElement(i.Field,{name:"residence"},(function(e){var t=e.field;return r.createElement(r.Fragment,null,r.createElement(o.Autocomplete,l({},t,{autoComplete:"off",input_id:"dt_core_set-residence-form_signup-residence-select",type:"text",label:(0,c.localize)("Country of residence"),historyValue:d,error:m.residence&&p.residence,required:!0,list_items:b,onItemSelection:function(e){var t=e.value,n=e.text;g("residence",t?n:"",!0),null==_||_()}})))})),!(null!=p&&null!==(t=p.residence)&&void 0!==t&&t.length)&&r.createElement(o.Text,{as:"p",size:"xxs",className:"account-signup__subtext",color:"less-prominent"},r.createElement(c.Localize,{i18n_default_text:"Select the country where you currently live."})),r.createElement("div",{className:"".concat(s,"__button_wrapper")},n))};u.propTypes={children:s().object,class_prefix:s().string,default_value:s().string,history_value:s().string,errors:s().object,onResidenceSelectionChanged:s().func,residence_list:s().arrayOf(s().object),setFieldTouched:s().func,setFieldValue:s().func,touched:s().object};const d=u}}]);
//# sourceMappingURL=core.account-signup-modal.bc1f204c06240063e083.js.map